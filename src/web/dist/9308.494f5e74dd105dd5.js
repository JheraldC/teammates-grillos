"use strict";(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[9308],{33522:(R,c,i)=>{i.d(c,{P:()=>z});var a=i(40035),p=i(94089),e=i(17705),d=i(43743),m=i(30715),l=i(60177),f=i(47492),u=i(71128),v=i(33484),_=i(26141),S=i(48599),E=i(45448),g=i(40348),b=i(21753);function C(t,r){if(1&t&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"tm-comment-row",8),e.nI1(3,"commentToCommentRowModel"),e.k0s()()),2&t){const s=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.Y8G("mode",n.CommentRowMode.EDIT)("isVisibilityOptionEnabled",!1)("isDisabled",!0)("shouldHideSavingButton",!0)("shouldHideClosingButton",!0)("shouldHideEditButton",!0)("shouldHideDeleteButton",!0)("isFeedbackParticipantComment",!0)("response",s)("questionShowResponsesTo",n.feedbackQuestion.showResponsesTo)("model",e.bMT(3,11,s.participantComment))}}function D(t,r){if(1&t&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"tm-comment-table",9),e.nI1(3,"commentsToCommentTableModel"),e.k0s()()),2&t){const s=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.Y8G("response",s)("questionShowResponsesTo",n.feedbackQuestion.showResponsesTo)("model",e.brH(3,4,s.instructorComments,!0,n.timezone))("shouldHideClosingButtonForNewComment",!0)}}function I(t,r){if(1&t&&(e.qex(0),e.j41(1,"tr")(2,"td",5)(3,"strong"),e.EFF(4,"From:"),e.k0s(),e.EFF(5),e.k0s()(),e.j41(6,"tr")(7,"td"),e.nrm(8,"tm-single-response",6),e.k0s()(),e.DNE(9,C,4,13,"tr",7),e.DNE(10,D,4,8,"tr",7),e.bVm()),2&t){const s=r.$implicit,n=e.XpG();e.R7$(5),e.SpI(" ",s.giver," "),e.R7$(3),e.Y8G("responseDetails",s.responseDetails)("questionDetails",n.feedbackQuestion.questionDetails)("isStudentPage",!0)("giverEmail",s.giverEmail)("recipientEmail",s.recipientEmail)("statistics",n.statistics),e.R7$(1),e.Y8G("ngIf",s.participantComment),e.R7$(1),e.Y8G("ngIf",s.instructorComments.length>0)}}const P=function(t){return{"text-white":t}};let N=(()=>{class t{constructor(){this.CommentRowMode=v.z,this.feedbackQuestion={feedbackQuestionId:"",questionNumber:1,questionBrief:"",questionDescription:"",questionDetails:{questionType:a.OX.MCQ,questionText:""},questionType:a.OX.MCQ,giverType:a.tp.STUDENTS,recipientType:a.tp.STUDENTS,numberOfEntitiesToGiveFeedbackToSetting:a.cB.UNLIMITED,customNumberOfEntitiesToGiveFeedbackTo:0,showResponsesTo:[],showGiverNameTo:[],showRecipientNameTo:[]},this.responses=[],this.statistics="",this.isSelfResponses=!1,this.timezone="UTC",this.recipient=""}ngOnInit(){this.recipient=this.responses.length?this.responses[0].recipient:""}static#e=this.\u0275fac=function(n){return new(n||t)};static#s=this.\u0275cmp=e.VBU({type:t,selectors:[["tm-student-view-responses"]],inputs:{feedbackQuestion:"feedbackQuestion",responses:"responses",statistics:"statistics",isSelfResponses:"isSelfResponses",timezone:"timezone"},decls:10,vars:11,consts:[[3,"ngClass"],[1,"response-recipient"],[1,"card-body","table-responsive",2,"padding","0"],[1,"table"],[4,"ngFor","ngForOf"],[1,"response-giver"],[3,"responseDetails","questionDetails","isStudentPage","giverEmail","recipientEmail","statistics"],[4,"ngIf"],[3,"mode","isVisibilityOptionEnabled","isDisabled","shouldHideSavingButton","shouldHideClosingButton","shouldHideEditButton","shouldHideDeleteButton","isFeedbackParticipantComment","response","questionShowResponsesTo","model"],[3,"response","questionShowResponsesTo","model","shouldHideClosingButtonForNewComment"]],template:function(n,o){1&n&&(e.j41(0,"div")(1,"div",0)(2,"span",1)(3,"b"),e.EFF(4,"To:"),e.k0s(),e.EFF(5),e.k0s()(),e.j41(6,"div",2)(7,"table",3)(8,"tbody"),e.DNE(9,I,11,9,"ng-container",4),e.k0s()()()()),2&n&&(e.ZvI("card border-",o.isSelfResponses?"info":"primary"," mt-4"),e.R7$(1),e.ZvI("card-header bg-",o.isSelfResponses?"info":"primary",""),e.Y8G("ngClass",e.eq3(9,P,!o.isSelfResponses)),e.R7$(4),e.SpI(" ",o.recipient,""),e.R7$(4),e.Y8G("ngForOf",o.responses))},dependencies:[l.YU,l.Sq,l.bT,_.b,S.d,E.N,g.r,b.W]})}return t})();var F=i(88370),Q=i(57645),w=i(72890);function O(t,r){1&t&&e.nrm(0,"div")}function G(t,r){1&t&&(e.j41(0,"div",15),e.nrm(1,"i",16),e.EFF(2," Some comments (on responses) received for this question are omitted from this preview because they are not visible to instructors, as per their visibility settings. "),e.k0s())}function y(t,r){1&t&&(e.j41(0,"div")(1,"p",21),e.nrm(2,"i",22),e.EFF(3," Individual Responses are not configured to be shown for this question type."),e.k0s()())}function M(t,r){if(1&t&&e.nrm(0,"tm-student-view-responses",26),2&t){const s=e.XpG(5).$implicit,n=e.XpG();e.Y8G("responses",s.responsesToSelf)("feedbackQuestion",s.feedbackQuestion)("timezone",n.session.timeZone)("statistics",s.questionStatistics)}}function k(t,r){if(1&t&&e.nrm(0,"tm-student-view-responses",26),2&t){const s=e.XpG().$implicit,n=e.XpG(5).$implicit,o=e.XpG();e.Y8G("responses",s)("feedbackQuestion",n.feedbackQuestion)("timezone",o.session.timeZone)("statistics",n.questionStatistics)}}function $(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,k,1,4,"tm-student-view-responses",23),e.k0s()),2&t){const s=r.$implicit;e.R7$(1),e.Y8G("ngIf",s.length)}}function x(t,r){1&t&&(e.j41(0,"div",27)(1,"strong"),e.EFF(2,"Other responses (to you): "),e.k0s(),e.EFF(3,"No responses received yet. "),e.k0s())}function B(t,r){if(1&t&&(e.DNE(0,M,1,4,"tm-student-view-responses",23),e.DNE(1,$,2,1,"div",24),e.DNE(2,x,4,0,"div",25)),2&t){const s=e.XpG(4).$implicit;e.Y8G("ngIf",s.responsesToSelf.length),e.R7$(1),e.Y8G("ngForOf",s.otherResponses),e.R7$(1),e.Y8G("ngIf",!s.otherResponses.length&&!s.responsesToSelf.length)}}function U(t,r){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"tm-single-statistics",18),e.DNE(2,y,4,0,"div",19),e.DNE(3,B,3,3,"ng-template",null,20,e.C5r),e.k0s()),2&t){const s=e.sdS(4),n=e.XpG(3).$implicit,o=e.XpG();e.R7$(1),e.Y8G("question",n.feedbackQuestion.questionDetails)("responses",n.allResponses)("statistics",n.questionStatistics)("isStudent",!0),e.R7$(1),e.Y8G("ngIf",o.RESPONSE_HIDDEN_QUESTIONS.includes(n.feedbackQuestion.questionType))("ngIfElse",s)}}function V(t,r){1&t&&(e.j41(0,"div",27)(1,"strong"),e.EFF(2,"Other responses (to you): "),e.k0s(),e.EFF(3,"Responses are not visible to you. "),e.k0s())}const Y=function(t){return[t]};function L(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"tm-student-view-responses",29),e.k0s()),2&t){const s=r.$implicit,n=e.XpG(4).$implicit,o=e.XpG();e.R7$(1),e.Y8G("responses",e.eq3(5,Y,s))("isSelfResponses",!0)("feedbackQuestion",n.feedbackQuestion)("timezone",o.session.timeZone)("statistics",n.questionStatistics)}}function X(t,r){if(1&t&&(e.j41(0,"div",28)(1,"strong"),e.EFF(2,"Your own responses (to others):"),e.k0s(),e.DNE(3,L,2,7,"div",24),e.k0s()),2&t){const s=e.XpG(3).$implicit;e.R7$(3),e.Y8G("ngForOf",s.responsesFromSelf)}}function j(t,r){if(1&t&&(e.j41(0,"div",10),e.DNE(1,G,3,0,"div",11),e.DNE(2,U,5,6,"div",12),e.DNE(3,V,4,0,"ng-template",null,13,e.C5r),e.DNE(5,X,4,1,"div",14),e.k0s()),2&t){const s=e.sdS(4),n=e.XpG(2).$implicit,o=e.XpG();e.R7$(1),e.Y8G("ngIf",n.hasCommentNotVisibleForPreview),e.R7$(1),e.Y8G("ngIf",o.canUserSeeResponses(n))("ngIfElse",s),e.R7$(3),e.Y8G("ngIf",n.responsesFromSelf.length)}}function A(t,r){1&t&&(e.j41(0,"div",30),e.nrm(1,"i",16),e.EFF(2," Responses received for this question are omitted from this preview because some or all parts of them are not visible to instructors, as per their visibility settings. "),e.k0s())}function q(t,r){if(1&t&&(e.j41(0,"div",5)(1,"div",6),e.nrm(2,"tm-question-text-with-info",7),e.DNE(3,j,6,4,"div",8),e.DNE(4,A,3,0,"ng-template",null,9,e.C5r),e.k0s()()),2&t){const s=e.sdS(5),n=e.XpG().$implicit;e.Mz_("id","question-",n.feedbackQuestion.questionNumber,"-responses"),e.R7$(2),e.Y8G("questionNumber",n.feedbackQuestion.questionNumber)("questionDetails",n.feedbackQuestion.questionDetails),e.R7$(1),e.Y8G("ngIf",!n.hasResponseButNotVisibleForPreview)("ngIfElse",s)}}function K(t,r){if(1&t){const s=e.RV6();e.j41(0,"div",1),e.bIt("inViewportAction",function(o){const h=e.eBV(s).$implicit,H=e.XpG();return e.Njj(H.loadQuestion(o,h))}),e.DNE(1,O,1,0,"div",2),e.j41(2,"tm-loading-retry",3),e.bIt("retryEvent",function(){const T=e.eBV(s).$implicit,h=e.XpG();return e.Njj(h.loadQuestionResults(T))}),e.DNE(3,q,6,5,"div",4),e.k0s()()}if(2&t){const s=r.$implicit;e.R7$(1),e.Y8G("tmIsLoading",s.isLoading&&!s.errorMessage),e.R7$(1),e.Y8G("shouldShowRetry",!!s.errorMessage)("message",s.errorMessage),e.R7$(1),e.Y8G("ngIf",s.hasResponse)}}let z=(()=>{class t{constructor(s,n){this.feedbackSessionsService=s,this.statusMessageService=n,this.RESPONSE_HIDDEN_QUESTIONS=[a.OX.CONTRIB],this.questions=[],this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:a.Be.AT_OPEN,responseVisibleSetting:a.KG.AT_VISIBLE,submissionStatus:a.u.OPEN,publishStatus:a.DG.NOT_PUBLISHED,isClosingSoonEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0,studentDeadlines:{},instructorDeadlines:{}},this.intent=p.JD.STUDENT_RESULT,this.regKey="",this.previewAsPerson=""}canUserSeeResponses(s){const n=s.feedbackQuestion.showResponsesTo;return this.intent===p.JD.STUDENT_RESULT?n.filter(o=>o!==p.sk.INSTRUCTORS).length>0:this.intent===p.JD.INSTRUCTOR_RESULT&&n.filter(o=>o===p.sk.INSTRUCTORS).length>0}loadQuestionResults(s){s.isLoaded||this.feedbackSessionsService.getFeedbackSessionResults({questionId:s.feedbackQuestion.feedbackQuestionId,courseId:this.session.courseId,feedbackSessionName:this.session.feedbackSessionName,intent:this.intent,key:this.regKey,previewAs:this.previewAsPerson}).subscribe({next:n=>{const o=n.questions[0];o?(s.hasResponse=!0,s.feedbackQuestion=o.feedbackQuestion,s.allResponses=o.allResponses,s.otherResponses=o.otherResponses,s.questionStatistics=o.questionStatistics,s.responsesFromSelf=o.responsesFromSelf,s.responsesToSelf=o.responsesToSelf,s.hasResponseButNotVisibleForPreview=o.hasResponseButNotVisibleForPreview,s.hasCommentNotVisibleForPreview=o.hasCommentNotVisibleForPreview):(s.hasResponse=!1,s.errorMessage&&this.statusMessageService.showSuccessToast("Question ".concat(s.feedbackQuestion.questionNumber.toString()).concat(" has no responses.")))},complete:()=>{s.isLoaded=!0,s.isLoading=!1,s.errorMessage=""},error:n=>{s.errorMessage=n.error.message,this.statusMessageService.showErrorToast(n.error.message)}})}loadQuestion(s,n){s&&s.visible&&!n.isLoaded&&!n.isLoading&&(n.isLoading=!0,this.loadQuestionResults(n))}static#e=this.\u0275fac=function(n){return new(n||t)(e.rXU(d.u),e.rXU(m.x))};static#s=this.\u0275cmp=e.VBU({type:t,selectors:[["tm-question-response-panel"]],inputs:{questions:"questions",session:"session",intent:"intent",regKey:"regKey",previewAsPerson:"previewAsPerson"},decls:1,vars:1,consts:[["inViewport","",3,"inViewportAction",4,"ngFor","ngForOf"],["inViewport","",3,"inViewportAction"],[4,"tmIsLoading"],[3,"shouldShowRetry","message","retryEvent"],["class","card bg-light mt-4",3,"id",4,"ngIf"],[1,"card","bg-light","mt-4",3,"id"],[1,"card-body"],[1,"question-text-with-info",3,"questionNumber","questionDetails"],["class","all-responses",4,"ngIf","ngIfElse"],["nonViewableForPreview",""],[1,"all-responses"],["class","alert alert-warning my-3 non-visible-comment-alert","role","alert",4,"ngIf"],["class","other-responses",4,"ngIf","ngIfElse"],["nonViewableResponse",""],["class","given-responses mt-4",4,"ngIf"],["role","alert",1,"alert","alert-warning","my-3","non-visible-comment-alert"],[1,"fas","fa-eye-slash"],[1,"other-responses"],[3,"question","responses","statistics","isStudent"],[4,"ngIf","ngIfElse"],["dontShowAdditionalMsg",""],[2,"color","gray","font-size","small"],[1,"fas","fa-info-circle",2,"color","#087CFC"],[3,"responses","feedbackQuestion","timezone","statistics",4,"ngIf"],[4,"ngFor","ngForOf"],["class","other-response",4,"ngIf"],[3,"responses","feedbackQuestion","timezone","statistics"],[1,"other-response"],[1,"given-responses","mt-4"],[3,"responses","isSelfResponses","feedbackQuestion","timezone","statistics"],["role","alert",1,"alert","alert-warning","other-response","non-visible-response-alert"]],template:function(n,o){1&n&&e.DNE(0,K,4,4,"div",0),2&n&&e.Y8G("ngForOf",o.questions)},dependencies:[l.Sq,l.bT,f.B,u.t,N,F.dQ,Q.n,w.Y],styles:[".question-text-with-info[_ngcontent-%COMP%]{font-size:.9375rem}.other-response[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:25px}"]})}return t})()},20093:(R,c,i)=>{i.d(c,{E:()=>v});var a=i(60177),p=i(88370),e=i(34029),d=i(84309),m=i(42720),l=i(51443),f=i(70981),u=i(17705);let v=(()=>{class _{static#e=this.\u0275fac=function(g){return new(g||_)};static#s=this.\u0275mod=u.$C({type:_});static#t=this.\u0275inj=u.G2t({imports:[a.MD,f.o,m.C,l.N,p.Q5,d.y,e.Z]})}return _})()},51443:(R,c,i)=>{i.d(c,{N:()=>m});var a=i(60177),p=i(75425),e=i(76449),d=i(17705);let m=(()=>{class l{static#e=this.\u0275fac=function(v){return new(v||l)};static#s=this.\u0275mod=d.$C({type:l});static#t=this.\u0275inj=d.G2t({imports:[a.MD,e.k,p.n]})}return l})()}}]);