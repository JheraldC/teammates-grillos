"use strict";(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[1279],{57286:(M,R,r)=>{r.d(R,{y:()=>I});var o=r(17705);let I=(()=>{class i{constructor(){this.useBlueSpinner=!1,this.color="white"}static#t=this.\u0275fac=function(N){return new(N||i)};static#i=this.\u0275cmp=o.VBU({type:i,selectors:[["tm-ajax-loading"]],inputs:{useBlueSpinner:"useBlueSpinner",color:"color"},decls:2,vars:3,consts:[[1,"loading-container"],["role","status"]],template:function(N,m){1&N&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.k0s()),2&N&&(o.R7$(1),o.ZvI("spinner-border spinner-border-sm text-",m.useBlueSpinner?"primary":m.color,""))},styles:[".loading-container[_ngcontent-%COMP%]{display:inline;margin-right:10px}"]})}return i})()},13406:(M,R,r)=>{r.d(R,{p:()=>N});var o=r(94227),I=r(96508),i=r.n(I),a=r(17705);const p="ddd, DD MMM, YYYY";let N=(()=>{class m extends o.tN{format(_){if(null==_)return"";const c=i()();return c.set("year",_.year),c.set("month",_.month-1),c.set("date",_.day),c.format(p)}parse(_){const c=i()(_,p);return{year:c.year(),month:c.month()+1,day:c.date()}}static#t=this.\u0275fac=function(){let _;return function(E){return(_||(_=a.xGo(m)))(E||m)}}();static#i=this.\u0275prov=a.jDH({token:m,factory:m.\u0275fac})}return m})()},516:(M,R,r)=>{r.d(R,{O:()=>p});var o=r(17705),I=r(94227),i=r(89417);function a(N,m){if(1&N){const C=o.RV6();o.j41(0,"button",6),o.bIt("click",function(){o.eBV(C);const c=o.XpG(),E=o.sdS(4);return o.Njj(c.selectTodayDate(E))}),o.EFF(1," Today "),o.k0s()}}let p=(()=>{class N{constructor(C){this.calendar=C,this.isDisabled=!1,this.dateChangeCallback=new o.bkB}changeDate(C){this.dateChangeCallback.emit(C)}selectTodayDate(C){this.dateChangeCallback.emit(this.calendar.getToday()),C.navigateTo(this.calendar.getToday())}static#t=this.\u0275fac=function(_){return new(_||N)(o.rXU(I.iF))};static#i=this.\u0275cmp=o.VBU({type:N,selectors:[["tm-datepicker"]],inputs:{date:"date",isDisabled:"isDisabled",maxDate:"maxDate",minDate:"minDate"},outputs:{dateChangeCallback:"dateChangeCallback"},decls:7,vars:6,consts:[[1,"input-group"],["footer",""],["type","text","ngbDatepicker","","readonly","","aria-label","Date",1,"form-control",3,"ngModel","maxDate","minDate","disabled","footerTemplate","ngModelChange"],["timeDp","ngbDatepicker"],["aria-label","Change date","type","button",1,"btn","btn-light","input-group-text",3,"disabled","click"],[1,"fas","fa-calendar-alt"],["type","button",1,"footer-button",3,"click"]],template:function(_,c){if(1&_){const E=o.RV6();o.j41(0,"div",0),o.DNE(1,a,2,0,"ng-template",null,1,o.C5r),o.j41(3,"input",2,3),o.bIt("ngModelChange",function(f){return c.changeDate(f)}),o.k0s(),o.j41(5,"button",4),o.bIt("click",function(){o.eBV(E);const f=o.sdS(4);return o.Njj(f.toggle())}),o.nrm(6,"i",5),o.k0s()()}if(2&_){const E=o.sdS(2);o.R7$(3),o.Y8G("ngModel",c.date)("maxDate",c.maxDate)("minDate",c.minDate)("disabled",c.isDisabled)("footerTemplate",E),o.R7$(2),o.Y8G("disabled",c.isDisabled)}},dependencies:[i.me,i.BC,i.vS,I.cw],styles:[".footer-button[_ngcontent-%COMP%]{background:none!important;border:none;float:right;padding:20px!important;color:#6495ed;text-decoration:none;cursor:pointer;outline:none}.form-control[readonly][_ngcontent-%COMP%]{background-color:transparent}.form-control[_ngcontent-%COMP%]:disabled{background-color:#e9ecef}"]})}return N})()},72890:(M,R,r)=>{r.d(R,{Y:()=>N});var o=r(17705),I=r(60177);function i(m,C){if(1&m){const _=o.RV6();o.j41(0,"div",2)(1,"p",3),o.EFF(2),o.k0s(),o.j41(3,"button",4),o.bIt("click",function(){o.eBV(_);const E=o.XpG();return o.Njj(E.retryEvent.emit())}),o.nrm(4,"i",5),o.EFF(5,"\xa0Retry"),o.k0s()()}if(2&m){const _=o.XpG();o.R7$(2),o.JRh(_.message),o.R7$(1),o.Y8G("disabled",_.retryButtonDisabled)}}function a(m,C){1&m&&o.SdG(0)}const p=["*"];let N=(()=>{class m{constructor(){this.message="",this.shouldShowRetry=!1,this.retryButtonDisabled=!1,this.retryEvent=new o.bkB}static#t=this.\u0275fac=function(c){return new(c||m)};static#i=this.\u0275cmp=o.VBU({type:m,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry",retryButtonDisabled:"retryButtonDisabled"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:p,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(c,E){if(1&c&&(o.NAR(),o.DNE(0,i,6,2,"div",0),o.DNE(1,a,1,0,"ng-template",null,1,o.C5r)),2&c){const d=o.sdS(2);o.Y8G("ngIf",E.shouldShowRetry)("ngIfElse",d)}},dependencies:[I.bT]})}return m})()},34029:(M,R,r)=>{r.d(R,{Z:()=>i});var o=r(60177),I=r(17705);let i=(()=>{class a{static#t=this.\u0275fac=function(m){return new(m||a)};static#i=this.\u0275mod=I.$C({type:a});static#e=this.\u0275inj=I.G2t({imports:[o.MD]})}return a})()},14725:(M,R,r)=>{r.d(R,{C:()=>i});var o=r(17705),I=r(50833);let i=(()=>{class a{constructor(N){this.timezoneService=N}transform(N,m){return this.timezoneService.formatToString(N,m,"D MMM h:mm A")}static#t=this.\u0275fac=function(m){return new(m||a)(o.rXU(I.D,16))};static#i=this.\u0275pipe=o.EJ8({name:"formatDateBrief",type:a,pure:!0})}return a})()},23934:(M,R,r)=>{r.d(R,{L:()=>i});var o=r(17705),I=r(50833);let i=(()=>{class a{constructor(N){this.timezoneService=N}transform(N,m){return this.timezoneService.formatToString(N,m,"ddd, DD MMM YYYY, hh:mm A z")}static#t=this.\u0275fac=function(m){return new(m||a)(o.rXU(I.D,16))};static#i=this.\u0275pipe=o.EJ8({name:"formatDateDetail",type:a,pure:!0})}return a})()},42138:(M,R,r)=>{r.d(R,{n:()=>_});var o=r(17705),I=r(47650),i=r(60177),a=r(89417);const p=function(c){return{hour:c,minute:0}};function N(c,E){if(1&c&&(o.j41(0,"option",2),o.EFF(1),o.k0s()),2&c){const d=E.$implicit,f=o.XpG();o.Y8G("ngValue",o.eq3(3,p,d))("disabled",f.isOptionDisabled(o.eq3(5,p,d))),o.R7$(1),o.SpI(" ",f.addLeadingZeros(2,d),":00H ")}}function m(c,E){if(1&c&&(o.j41(0,"option",4),o.EFF(1),o.k0s()),2&c){const d=o.XpG();o.Y8G("ngValue",d.time),o.R7$(1),o.Lme("",d.addLeadingZeros(2,d.time.hour),":",d.addLeadingZeros(2,d.time.minute),"H")}}const C=function(){return{hour:23,minute:59}};let _=(()=>{class c{constructor(){this.isDisabled=!1,this.time=(0,I.qt)(),this.date=(0,I.l$)(),this.timeChange=new o.bkB}triggerTimeChange(d){this.timeChange.emit(d)}range(d,f){const t=[];for(let h=d;h<f;h+=1)t.push(h);return t}timeCompareFn(d,f){return d&&f&&d.hour===f.hour&&d.minute===f.minute}isOptionDisabled(d){const f=this.toJsDate(this.date,d);return!!(this.minDate&&this.minTime&&f<this.toJsDate(this.minDate,this.minTime))||!!(this.maxDate&&this.maxTime&&f>this.toJsDate(this.maxDate,this.maxTime))}toJsDate(d,f){return new Date(d.year,d.month-1,d.day,f.hour,f.minute)}isInFixedList(d){return d.hour>=1&&d.hour<=23&&0===d.minute||23===d.hour&&59===d.minute}addLeadingZeros(d,f){return("0".repeat(d)+f).slice(-d)}static#t=this.\u0275fac=function(f){return new(f||c)};static#i=this.\u0275cmp=o.VBU({type:c,selectors:[["tm-timepicker"]],inputs:{isDisabled:"isDisabled",time:"time",minTime:"minTime",maxTime:"maxTime",date:"date",minDate:"minDate",maxDate:"maxDate"},outputs:{timeChange:"timeChange"},decls:5,vars:9,consts:[["aria-label","Select time",1,"form-control","form-select",3,"ngModel","disabled","compareWith","ngModelChange"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[3,"ngValue","disabled"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(f,t){1&f&&(o.j41(0,"select",0),o.bIt("ngModelChange",function(O){return t.triggerTimeChange(O)}),o.DNE(1,N,2,7,"option",1),o.j41(2,"option",2),o.EFF(3,"23:59H"),o.k0s(),o.DNE(4,m,2,3,"option",3),o.k0s()),2&f&&(o.Y8G("ngModel",t.time)("disabled",t.isDisabled)("compareWith",t.timeCompareFn),o.R7$(1),o.Y8G("ngForOf",t.range(1,24)),o.R7$(1),o.Y8G("ngValue",o.lJ4(7,C))("disabled",t.isOptionDisabled(o.lJ4(8,C))),o.R7$(2),o.Y8G("ngIf",!t.isInFixedList(t.time)))},dependencies:[i.Sq,i.bT,a.xH,a.y7,a.wz,a.BC,a.vS]})}return c})()},11279:(M,R,r)=>{r.r(R),r.d(R,{AdminNotificationsPageModule:()=>bt});var o=r(60177),I=r(89417),i=r(82646),a=r(94227),p=r(96508),N=r.n(p),m=r(70980),C=function(s){return s[s.ADD=0]="ADD",s[s.EDIT=1]="EDIT",s}(C||{}),_=r(94089),c=r(47650),E=r(26195),d=r(21894),f=r(44199),t=r(17705),h=r(67880),O=r(6294),D=r(30715),v=r(16),F=r(50833),L=r(57645),P=r(72890),A=function(s){return s[s.BLUE=0]="BLUE",s[s.WHITE=1]="WHITE",s}(A||{}),U=r(23934),G=r(14725);const w={PRIMARY:"Primary (blue)",SECONDARY:"Secondary (grey)",SUCCESS:"Success (green)",DANGER:"Danger (red)",WARNING:"Warning (yellow)",INFO:"Info (cyan)",LIGHT:"Light",DARK:"Dark"};let S=(()=>{class s{transform(n){return w[n]}static#t=this.\u0275fac=function(l){return new(l||s)};static#i=this.\u0275pipe=t.EJ8({name:"notificationStyleDescription",type:s,pure:!0})}return s})();var b=r(92228);function k(s,g){1&s&&t.nrm(0,"i",10)}function j(s,g){1&s&&t.nrm(0,"i",11)}function Y(s,g){1&s&&t.nrm(0,"i",10)}function V(s,g){1&s&&t.nrm(0,"i",11)}function $(s,g){1&s&&t.nrm(0,"i",10)}function H(s,g){1&s&&t.nrm(0,"i",11)}function y(s,g){1&s&&t.nrm(0,"i",10)}function Q(s,g){1&s&&t.nrm(0,"i",11)}function W(s,g){1&s&&t.nrm(0,"i",10)}function K(s,g){1&s&&t.nrm(0,"i",11)}function x(s,g){1&s&&t.nrm(0,"i",10)}function X(s,g){1&s&&t.nrm(0,"i",11)}const z=function(s){return{"table-success":s}};function J(s,g){if(1&s){const n=t.RV6();t.j41(0,"tr",12)(1,"td",13),t.EFF(2),t.k0s(),t.j41(3,"td",13)(4,"span",14),t.nI1(5,"formatDateDetail"),t.EFF(6),t.nI1(7,"formatDateBrief"),t.k0s()(),t.j41(8,"td",13)(9,"span",14),t.nI1(10,"formatDateDetail"),t.EFF(11),t.nI1(12,"formatDateBrief"),t.k0s()(),t.j41(13,"td",13),t.EFF(14),t.k0s(),t.j41(15,"td",15),t.nI1(16,"notificationStyleClass"),t.EFF(17),t.nI1(18,"notificationStyleDescription"),t.k0s(),t.j41(19,"td",13)(20,"span",14),t.nI1(21,"formatDateDetail"),t.EFF(22),t.nI1(23,"formatDateBrief"),t.k0s()(),t.j41(24,"td",16)(25,"div",17)(26,"button",18),t.bIt("click",function(){const T=t.eBV(n).$implicit,u=t.XpG();return t.Njj(u.loadNotificationEditForm(T.notification))}),t.EFF(27," Edit "),t.k0s(),t.j41(28,"button",19),t.bIt("click",function(){const T=t.eBV(n).$implicit,u=t.XpG();return t.Njj(u.deleteNotification(T.notification.notificationId,T.notification.title))}),t.EFF(29," Delete "),t.k0s()()()()}if(2&s){const n=g.$implicit,l=t.XpG();t.Y8G("id",n.notification.notificationId)("ngClass",t.eq3(34,z,n.isHighlighted)),t.R7$(2),t.JRh(n.notification.title),t.R7$(2),t.FS9("ngbTooltip",t.i5U(5,12,n.notification.startTimestamp,l.guessTimezone)),t.R7$(2),t.JRh(t.i5U(7,15,n.notification.startTimestamp,l.guessTimezone)),t.R7$(3),t.FS9("ngbTooltip",t.i5U(10,18,n.notification.endTimestamp,l.guessTimezone)),t.R7$(2),t.JRh(t.i5U(12,21,n.notification.endTimestamp,l.guessTimezone)),t.R7$(3),t.JRh(n.notification.targetUser),t.R7$(1),t.Y8G("ngClass",t.bMT(16,24,n.notification.style)),t.R7$(2),t.JRh(t.bMT(18,26,n.notification.style)),t.R7$(3),t.FS9("ngbTooltip",t.i5U(21,28,n.notification.createdAt,l.guessTimezone)),t.R7$(2),t.JRh(t.i5U(23,31,n.notification.createdAt,l.guessTimezone))}}const Z=function(s){return{"bg-primary text-white":s}};let B=(()=>{class s{constructor(n){this.simpleModalService=n,this.SortBy=E.g,this.SortOrder=E.x,this.NotificationsTableHeaderColorScheme=A,this.guessTimezone="UTC",this.notificationsTableRowModels=[],this.notificationsTableRowModelsSortBy=E.g.NOTIFICATION_CREATE_TIME,this.notificationsTableRowModelsSortOrder=E.x.DESC,this.headerColorScheme=A.BLUE,this.sortNotificationsTableRowModelsEvent=new t.bkB,this.deleteNotificationEvent=new t.bkB,this.loadNotificationEditFormEvent=new t.bkB}sortNotificationsTableRowModels(n){this.sortNotificationsTableRowModelsEvent.emit(n)}getAriaSort(n){return n!==this.notificationsTableRowModelsSortBy?"none":this.notificationsTableRowModelsSortOrder===E.x.ASC?"ascending":"descending"}deleteNotification(n,l){this.simpleModalService.openConfirmationModal("Confirm your action",d.i.DANGER,`Do you want to delete this notification (titled "${l}") permanently? This action will not be reversible.`).result.then(()=>this.deleteNotificationEvent.emit(n))}loadNotificationEditForm(n){this.loadNotificationEditFormEvent.emit(n)}static#t=this.\u0275fac=function(l){return new(l||s)(t.rXU(O.r))};static#i=this.\u0275cmp=t.VBU({type:s,selectors:[["tm-notifications-table"]],inputs:{guessTimezone:"guessTimezone",notificationsTableRowModels:"notificationsTableRowModels",notificationsTableRowModelsSortBy:"notificationsTableRowModelsSortBy",notificationsTableRowModelsSortOrder:"notificationsTableRowModelsSortOrder",headerColorScheme:"headerColorScheme"},outputs:{sortNotificationsTableRowModelsEvent:"sortNotificationsTableRowModelsEvent",deleteNotificationEvent:"deleteNotificationEvent",loadNotificationEditFormEvent:"loadNotificationEditFormEvent"},decls:51,vars:22,consts:[[1,"row"],[1,"col-12","table-responsive"],["id","notifications-table",1,"table","table-responsive-lg","table-striped","table-bordered","margin-bottom-0"],[3,"ngClass"],[1,"sortable-header",3,"click"],["aria-hidden","true",1,"fa-stack"],[1,"fas","fa-sort"],["class","fas fa-sort-down",4,"ngIf"],["class","fas fa-sort-up",4,"ngIf"],[3,"id","ngClass",4,"ngFor","ngForOf"],[1,"fas","fa-sort-down"],[1,"fas","fa-sort-up"],[3,"id","ngClass"],[1,"text-break"],[1,"ngb-tooltip-class",3,"ngbTooltip"],[1,"text-break",3,"ngClass"],[1,"actions-cell"],[1,"d-flex"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(l,e){1&l&&(t.j41(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead")(4,"tr",3)(5,"th",4),t.bIt("click",function(){return e.sortNotificationsTableRowModels(e.SortBy.NOTIFICATION_TITLE)}),t.j41(6,"button"),t.EFF(7," Title "),t.j41(8,"span",5),t.nrm(9,"i",6),t.DNE(10,k,1,0,"i",7),t.DNE(11,j,1,0,"i",8),t.k0s()()(),t.j41(12,"th",4),t.bIt("click",function(){return e.sortNotificationsTableRowModels(e.SortBy.NOTIFICATION_START_TIME)}),t.j41(13,"button"),t.EFF(14," Start Time "),t.j41(15,"span",5),t.nrm(16,"i",6),t.DNE(17,Y,1,0,"i",7),t.DNE(18,V,1,0,"i",8),t.k0s()()(),t.j41(19,"th",4),t.bIt("click",function(){return e.sortNotificationsTableRowModels(e.SortBy.NOTIFICATION_END_TIME)}),t.j41(20,"button"),t.EFF(21," End Time "),t.j41(22,"span",5),t.nrm(23,"i",6),t.DNE(24,$,1,0,"i",7),t.DNE(25,H,1,0,"i",8),t.k0s()()(),t.j41(26,"th",4),t.bIt("click",function(){return e.sortNotificationsTableRowModels(e.SortBy.NOTIFICATION_TARGET_USER)}),t.j41(27,"button"),t.EFF(28," Target User "),t.j41(29,"span",5),t.nrm(30,"i",6),t.DNE(31,y,1,0,"i",7),t.DNE(32,Q,1,0,"i",8),t.k0s()()(),t.j41(33,"th",4),t.bIt("click",function(){return e.sortNotificationsTableRowModels(e.SortBy.NOTIFICATION_STYLE)}),t.j41(34,"button"),t.EFF(35," Style "),t.j41(36,"span",5),t.nrm(37,"i",6),t.DNE(38,W,1,0,"i",7),t.DNE(39,K,1,0,"i",8),t.k0s()()(),t.j41(40,"th",4),t.bIt("click",function(){return e.sortNotificationsTableRowModels(e.SortBy.NOTIFICATION_CREATE_TIME)}),t.j41(41,"button"),t.EFF(42," Creation Time "),t.j41(43,"span",5),t.nrm(44,"i",6),t.DNE(45,x,1,0,"i",7),t.DNE(46,X,1,0,"i",8),t.k0s()()(),t.j41(47,"th"),t.EFF(48,"Actions"),t.k0s()()(),t.j41(49,"tbody"),t.DNE(50,J,30,36,"tr",9),t.k0s()()()()),2&l&&(t.R7$(4),t.Y8G("ngClass",t.eq3(20,Z,e.headerColorScheme===e.NotificationsTableHeaderColorScheme.BLUE)),t.R7$(1),t.BMQ("aria-sort",e.getAriaSort(e.SortBy.NOTIFICATION_TITLE)),t.R7$(5),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_TITLE&&e.notificationsTableRowModelsSortOrder===e.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_TITLE&&e.notificationsTableRowModelsSortOrder===e.SortOrder.ASC),t.R7$(1),t.BMQ("aria-sort",e.getAriaSort(e.SortBy.NOTIFICATION_START_TIME)),t.R7$(5),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_START_TIME&&e.notificationsTableRowModelsSortOrder===e.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_START_TIME&&e.notificationsTableRowModelsSortOrder===e.SortOrder.ASC),t.R7$(1),t.BMQ("aria-sort",e.getAriaSort(e.SortBy.NOTIFICATION_END_TIME)),t.R7$(5),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_END_TIME&&e.notificationsTableRowModelsSortOrder===e.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_END_TIME&&e.notificationsTableRowModelsSortOrder===e.SortOrder.ASC),t.R7$(1),t.BMQ("aria-sort",e.getAriaSort(e.SortBy.NOTIFICATION_TARGET_USER)),t.R7$(5),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_TARGET_USER&&e.notificationsTableRowModelsSortOrder===e.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_TARGET_USER&&e.notificationsTableRowModelsSortOrder===e.SortOrder.ASC),t.R7$(1),t.BMQ("aria-sort",e.getAriaSort(e.SortBy.NOTIFICATION_STYLE)),t.R7$(5),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_STYLE&&e.notificationsTableRowModelsSortOrder===e.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_STYLE&&e.notificationsTableRowModelsSortOrder===e.SortOrder.ASC),t.R7$(1),t.BMQ("aria-sort",e.getAriaSort(e.SortBy.NOTIFICATION_CREATE_TIME)),t.R7$(5),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_CREATE_TIME&&e.notificationsTableRowModelsSortOrder===e.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",e.notificationsTableRowModelsSortBy===e.SortBy.NOTIFICATION_CREATE_TIME&&e.notificationsTableRowModelsSortOrder===e.SortOrder.ASC),t.R7$(4),t.Y8G("ngForOf",e.notificationsTableRowModels))},dependencies:[o.YU,o.Sq,o.bT,a.md,U.L,G.C,S,b.R],styles:[".actions-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.dropdown-item){margin-left:var(--btn-margin)}.sortable-header[_ngcontent-%COMP%]{cursor:pointer}.sortable-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.3em}.sortable-header[_ngcontent-%COMP%]   .fa-stack[_ngcontent-%COMP%]{width:20%}.sortable-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;text-align:left;width:100%;font:inherit;cursor:inherit}.clickable[_ngcontent-%COMP%]{cursor:pointer}.margin-bottom-0[_ngcontent-%COMP%]{margin-bottom:0}.padding-left-7px[_ngcontent-%COMP%]{padding-left:7px}#notifications-table[_ngcontent-%COMP%]{min-width:650px}"]})}return s})();var q=r(8059),tt=r(13406),it=r(57286),et=r(516),ot=r(52916),nt=r(42138);function at(s,g){1&s&&(t.j41(0,"div",4)(1,"div",45)(2,"h5"),t.nrm(3,"i",46),t.EFF(4,"\xa0This notification has already been shown to users."),t.k0s(),t.j41(5,"p"),t.EFF(6,"Major edits to the notification are not recommended."),t.k0s()()())}function st(s,g){if(1&s&&(t.j41(0,"option",11),t.EFF(1),t.nI1(2,"notificationStyleDescription"),t.k0s()),2&s){const n=g.$implicit;t.Y8G("ngValue",n.value),t.R7$(1),t.JRh(t.bMT(2,2,n.key))}}function rt(s,g){1&s&&t.nrm(0,"tm-ajax-loading")}function lt(s,g){if(1&s){const n=t.RV6();t.j41(0,"div")(1,"button",47),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.submitFormHandler())}),t.DNE(2,rt,1,0,"tm-ajax-loading",44),t.EFF(3,"Create Notification "),t.k0s()()}if(2&s){const n=t.XpG();t.R7$(1),t.Y8G("disabled",n.model.isSaving),t.R7$(1),t.Y8G("ngIf",n.model.isSaving)}}function ct(s,g){1&s&&t.nrm(0,"tm-ajax-loading")}function dt(s,g){if(1&s){const n=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.submitFormHandler())}),t.DNE(1,ct,1,0,"tm-ajax-loading",44),t.EFF(2,"Save Changes "),t.k0s()}if(2&s){const n=t.XpG(2);t.Y8G("disabled",n.model.isSaving),t.R7$(1),t.Y8G("ngIf",n.model.isSaving)}}function Et(s,g){if(1&s&&(t.j41(0,"div"),t.DNE(1,dt,3,2,"button",48),t.k0s()),2&s){const n=t.XpG();t.R7$(1),t.Y8G("ngIf",n.formMode===n.NotificationEditFormMode.EDIT)}}let _t=(()=>{class s{constructor(n){this.simpleModalService=n,this.NotificationEditFormMode=C,this.NotificationStyle=_.Bz,this.NotificationTargetUser=_.Ih,this.NOTIFICATION_TITLE_MAX_LENGTH=q.YU.NOTIFICATION_TITLE_MAX_LENGTH,this.guessTimezone="UTC",this.model={notificationId:"",shown:!1,startTime:(0,c.qt)(),startDate:(0,c.l$)(),endTime:(0,c.qt)(),endDate:(0,c.l$)(),style:_.Bz.SUCCESS,targetUser:_.Ih.GENERAL,title:"",message:"",isSaving:!1,isDeleting:!1},this.modelChange=new t.bkB,this.formMode=C.ADD,this.courseCandidates=[],this.addNewNotificationEvent=new t.bkB,this.editExistingNotificationEvent=new t.bkB,this.cancelEditingNotificationEvent=new t.bkB}triggerModelChange(n,l){this.modelChange.emit({...this.model,[n]:l})}submitFormHandler(){this.formMode===C.ADD&&this.addNewNotificationEvent.emit(),this.formMode===C.EDIT&&this.editExistingNotificationEvent.emit()}cancelHandler(){this.simpleModalService.openConfirmationModal("Discard unsaved edit?",d.i.WARNING,"Warning: Any unsaved changes will be lost.").result.then(()=>{this.cancelEditingNotificationEvent.emit()})}static#t=this.\u0275fac=function(l){return new(l||s)(t.rXU(O.r))};static#i=this.\u0275cmp=t.VBU({type:s,selectors:[["tm-notification-edit-form"]],inputs:{guessTimezone:"guessTimezone",model:"model",formMode:"formMode",courseCandidates:"courseCandidates"},outputs:{modelChange:"modelChange",addNewNotificationEvent:"addNewNotificationEvent",editExistingNotificationEvent:"editExistingNotificationEvent",cancelEditingNotificationEvent:"cancelEditingNotificationEvent"},features:[t.Jv_([{provide:a.tN,useClass:tt.p}])],decls:83,vars:24,consts:[[1,"card","card-plain"],[1,"close-header"],["type","button","aria-label","Close",1,"btn-close","float-end",3,"click"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"card","border-primary"],[1,"row","text-center"],[1,"col-md-2","text-md-end","fw-bold"],["ngbTooltip","The intended recipients of this notification.",1,"ngb-tooltip-class"],[1,"col-md-auto","text-md-start"],["id","notification-target-user",1,"form-control","form-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["ngbTooltip","Different styles correspond to different background colours at display.",1,"ngb-tooltip-class"],["id","notification-style",1,"form-control","form-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-auto","text-md-middle","d-flex","mb-0","border","border-secondary",3,"ngClass"],[1,"align-self-center"],["ngbTooltip","Enter the name of the notification e.g. Version Changelog 8.9.1.",1,"ngb-tooltip-class"],[1,"col-md-10","text-md-start"],["id","notification-title","type","text","placeholder","e.g. Version Changelog 8.9.1",1,"form-control",3,"ngModel","maxlength","ngModelChange"],["ngbTooltip","Message body of the notification.",1,"ngb-tooltip-class"],["id","notification-message",3,"richText","richTextChange"],[1,"card","border-primary","margin-top-20px"],["ngbTooltip","This timezone is deduced based on your system/browser's settings.",1,"ngb-tooltip-class"],["id","submission-status",1,"col-md-4","text-md-start"],[1,"row","text-center","margin-top-20px"],[1,"col-md-6"],[1,"col-12","text-md-start"],["ngbTooltip","Users will be able to see the notification.",1,"ngb-tooltip-class","label-control","fw-bold"],[1,"row","text-center","align-items-center"],["id","notification-start-date",1,"col-md-7","col-xs-center"],[3,"date","dateChangeCallback"],[1,"col-md-5"],["id","notification-start-time",3,"time","timeChange"],[1,"col-md-6","border-left-gray"],[1,"col-12","text-md-start","ms-md-2"],["ngbTooltip","Notification will be hidden from users.",1,"ngb-tooltip-class","label-control","fw-bold"],[1,"row","align-items-center"],["id","notification-end-date",1,"col-md-7","col-xs-center"],[3,"minDate","date","dateChangeCallback"],["id","notification-end-time",3,"time","timeChange"],[1,"row","margin-top-20px"],[1,"col-12","text-center"],[1,"loader"],[4,"ngIf"],[1,"alert","alert-danger","mb-0"],[1,"fas","fa-exclamation-circle"],["id","btn-create-notification","type","button",1,"btn","btn-primary",3,"disabled","click"],["id","btn-edit-notification","type","button","class","btn btn-success",3,"disabled","click",4,"ngIf"],["id","btn-edit-notification","type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(l,e){1&l&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return e.cancelHandler()}),t.k0s()(),t.DNE(3,at,7,0,"div",3),t.j41(4,"div",4)(5,"div",5)(6,"div",4)(7,"div",6)(8,"div",7)(9,"span",8),t.EFF(10,"Target user group"),t.k0s()(),t.j41(11,"div",9)(12,"select",10),t.bIt("ngModelChange",function(u){return e.triggerModelChange("targetUser",u)}),t.j41(13,"option",11),t.EFF(14,"Students"),t.k0s(),t.j41(15,"option",11),t.EFF(16,"Instructors"),t.k0s(),t.j41(17,"option",11),t.EFF(18,"General (for both students and instructors)"),t.k0s()()()(),t.nrm(19,"br"),t.j41(20,"div",6)(21,"div",7)(22,"span",12),t.EFF(23,"Notification style"),t.k0s()(),t.j41(24,"div",9)(25,"select",13),t.bIt("ngModelChange",function(u){return e.triggerModelChange("style",u)}),t.DNE(26,st,3,4,"option",14),t.nI1(27,"keyvalue"),t.k0s()(),t.j41(28,"div",15),t.nI1(29,"notificationStyleClass"),t.j41(30,"span",16),t.EFF(31,"Style Demonstration"),t.k0s()()(),t.nrm(32,"br"),t.j41(33,"div",6)(34,"div",7)(35,"span",17),t.EFF(36,"Title"),t.k0s()(),t.j41(37,"div",18)(38,"input",19),t.bIt("ngModelChange",function(u){return e.triggerModelChange("title",u)}),t.k0s(),t.j41(39,"div"),t.EFF(40),t.k0s()()(),t.nrm(41,"br"),t.j41(42,"div",6)(43,"div",7)(44,"span",20),t.EFF(45,"Message content"),t.k0s()(),t.j41(46,"div",18)(47,"tm-rich-text-editor",21),t.bIt("richTextChange",function(u){return e.triggerModelChange("message",u)}),t.k0s()()(),t.nrm(48,"br"),t.k0s()(),t.j41(49,"div",22)(50,"div",4)(51,"div",6)(52,"div",7)(53,"span",23),t.EFF(54,"Timezone"),t.k0s()(),t.j41(55,"div",24),t.EFF(56),t.k0s()(),t.j41(57,"div",25)(58,"div",26)(59,"div",27)(60,"div")(61,"label",28),t.EFF(62," Notification start time "),t.k0s()()(),t.j41(63,"div",29)(64,"div",30)(65,"tm-datepicker",31),t.bIt("dateChangeCallback",function(u){return e.triggerModelChange("startDate",u)}),t.k0s()(),t.j41(66,"div",32)(67,"tm-timepicker",33),t.bIt("timeChange",function(u){return e.triggerModelChange("startTime",u)}),t.k0s()()()(),t.j41(68,"div",34)(69,"div",6)(70,"div",35)(71,"label",36),t.EFF(72," Notification end time "),t.k0s()()(),t.j41(73,"div",37)(74,"div",38)(75,"tm-datepicker",39),t.bIt("dateChangeCallback",function(u){return e.triggerModelChange("endDate",u)}),t.k0s()(),t.j41(76,"div",32)(77,"tm-timepicker",40),t.bIt("timeChange",function(u){return e.triggerModelChange("endTime",u)}),t.k0s()()()()()()(),t.j41(78,"div",41)(79,"div",42),t.nrm(80,"span",43),t.DNE(81,lt,4,2,"div",44),t.DNE(82,Et,2,1,"div",44),t.k0s()()()()),2&l&&(t.R7$(3),t.Y8G("ngIf",e.model.shown),t.R7$(9),t.Y8G("ngModel",e.model.targetUser),t.R7$(1),t.Y8G("ngValue",e.NotificationTargetUser.STUDENT),t.R7$(2),t.Y8G("ngValue",e.NotificationTargetUser.INSTRUCTOR),t.R7$(2),t.Y8G("ngValue",e.NotificationTargetUser.GENERAL),t.R7$(8),t.Y8G("ngModel",e.model.style),t.R7$(1),t.Y8G("ngForOf",t.bMT(27,20,e.NotificationStyle)),t.R7$(2),t.Y8G("ngClass",t.bMT(29,22,e.model.style)),t.R7$(10),t.FS9("maxlength",e.NOTIFICATION_TITLE_MAX_LENGTH),t.Y8G("ngModel",e.model.title),t.R7$(2),t.SpI(" ",e.NOTIFICATION_TITLE_MAX_LENGTH-e.model.title.length," characters left "),t.R7$(7),t.Y8G("richText",e.model.message),t.R7$(9),t.SpI(" ",e.guessTimezone," "),t.R7$(9),t.Y8G("date",e.model.startDate),t.R7$(2),t.Y8G("time",e.model.startTime),t.R7$(8),t.Y8G("minDate",e.model.startDate)("date",e.model.endDate),t.R7$(2),t.Y8G("time",e.model.endTime),t.R7$(4),t.Y8G("ngIf",e.formMode===e.NotificationEditFormMode.ADD),t.R7$(1),t.Y8G("ngIf",e.formMode===e.NotificationEditFormMode.EDIT))},dependencies:[it.y,o.YU,o.Sq,o.bT,et.O,I.xH,I.y7,I.me,I.wz,I.BC,I.tU,I.vS,ot.q,a.md,nt.n,o.lG,S,b.R],styles:[".card-plain[_ngcontent-%COMP%]{background-color:#eaeff5;background-image:none;border:0;box-shadow:0 0}.close-header[_ngcontent-%COMP%]{padding-top:.75rem;padding-right:1.25rem;margin-bottom:0}.border-left-gray[_ngcontent-%COMP%]{border-left:1px solid #ddd}.margin-top-20px[_ngcontent-%COMP%]{margin-top:20px}.align-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.padding-left-7px[_ngcontent-%COMP%]{padding-left:7px}"],data:{animation:[f.j]}})}return s})();function Tt(s,g){1&s&&(t.j41(0,"span"),t.nrm(1,"i",8),t.EFF(2," Add New Notification"),t.k0s())}function mt(s,g){1&s&&(t.nrm(0,"i",9),t.EFF(1," Edit Existing Notification"))}function ft(s,g){if(1&s){const n=t.RV6();t.j41(0,"div",6)(1,"tm-notification-edit-form",10),t.bIt("modelChange",function(e){t.eBV(n);const T=t.XpG();return t.Njj(T.notificationEditFormModel=e)})("addNewNotificationEvent",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.addNewNotificationHandler())})("editExistingNotificationEvent",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.editExistingNotificationHandler())})("cancelEditingNotificationEvent",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.initNotificationEditFormModel())}),t.k0s()()}if(2&s){const n=t.XpG();t.Y8G("@collapseAnim",void 0),t.R7$(1),t.Y8G("formMode",n.currentNotificationEditFormMode)("model",n.notificationEditFormModel)("guessTimezone",n.guessTimezone)}}function Nt(s,g){1&s&&(t.j41(0,"div",13),t.EFF(1," You have not created any notifications yet. Use the form above to create a notification. "),t.k0s())}function It(s,g){if(1&s){const n=t.RV6();t.j41(0,"tm-notifications-table",14),t.bIt("deleteNotificationEvent",function(e){t.eBV(n);const T=t.XpG(2);return t.Njj(T.deleteNotificationHandler(e))})("loadNotificationEditFormEvent",function(e){t.eBV(n);const T=t.XpG(2);return t.Njj(T.loadNotificationEditFormHandler(e))})("sortNotificationsTableRowModelsEvent",function(e){t.eBV(n);const T=t.XpG(2);return t.Njj(T.sortNotificationsTableRowModelsHandler(e))}),t.k0s()}if(2&s){const n=t.XpG(2);t.Y8G("guessTimezone",n.guessTimezone)("notificationsTableRowModels",n.notificationsTableRowModels)("notificationsTableRowModelsSortBy",n.notificationsTableRowModelsSortBy)("notificationsTableRowModelsSortOrder",n.notificationsTableRowModelsSortOrder)}}function gt(s,g){if(1&s&&(t.j41(0,"div"),t.DNE(1,Nt,2,0,"div",11),t.DNE(2,It,1,4,"tm-notifications-table",12),t.k0s()),2&s){const n=t.XpG();t.R7$(1),t.Y8G("ngIf",0===n.notificationsTableRowModels.length&&!n.isNotificationLoading),t.R7$(1),t.Y8G("ngIf",n.notificationsTableRowModels.length>0)}}let Ct=(()=>{class s{constructor(n,l,e,T,u){this.notificationService=n,this.simpleModalService=l,this.statusMessageService=e,this.tableComparatorService=T,this.timezoneService=u,this.NotificationEditFormMode=C,this.currentNotificationEditFormMode=C.ADD,this.isNotificationLoading=!1,this.hasNotificationLoadingFailed=!1,this.isNotificationEditFormExpanded=!1,this.notificationEditFormModel={notificationId:"",shown:!1,startTime:(0,c.qt)(),startDate:(0,c.l$)(),endTime:(0,c.qt)(),endDate:(0,c.l$)(),style:_.Bz.SUCCESS,targetUser:_.Ih.GENERAL,title:"",message:"",isSaving:!1,isDeleting:!1},this.notificationsTableRowModels=[],this.notificationsTableRowModelsSortBy=E.g.NOTIFICATION_CREATE_TIME,this.notificationsTableRowModelsSortOrder=E.x.DESC,this.guessTimezone="UTC"}ngOnInit(){this.initNotificationEditFormModel(),this.loadNotifications(),this.guessTimezone=this.timezoneService.guessTimezone()}initNotificationEditFormModel(){this.isNotificationEditFormExpanded=!1;const n=N()().add(1,"hours"),l=N()().add(1,"days");this.notificationEditFormModel={notificationId:"",shown:!1,startTime:{minute:0===n.hour()?59:0,hour:0===n.hour()?23:n.hour()},startDate:{year:n.year(),month:n.month()+1,day:n.date()},endTime:(0,c.gW)(),endDate:{year:l.year(),month:l.month()+1,day:l.date()},style:_.Bz.SUCCESS,targetUser:_.Ih.GENERAL,title:"",message:"",isSaving:!1,isDeleting:!1},this.currentNotificationEditFormMode=C.ADD}loadNotifications(){this.isNotificationLoading=!0,this.notificationService.getNotifications().pipe((0,m.j)(()=>{this.isNotificationLoading=!1})).subscribe({next:n=>{n.notifications.forEach(l=>{this.notificationsTableRowModels.push({isHighlighted:!1,notification:l})}),this.notificationsTableRowModelsSortOrder=E.x.ASC,this.sortNotificationsTableRowModelsHandler(E.g.NOTIFICATION_CREATE_TIME)},error:n=>{this.hasNotificationLoadingFailed=!0,this.statusMessageService.showErrorToast(n.error.message)}})}retryLoadingAllData(){this.isNotificationLoading=!1,this.hasNotificationLoadingFailed=!1,this.loadNotifications()}loadNotificationEditFormHandler(n){this.isNotificationEditFormExpanded?this.notificationEditFormModel.notificationId!==n.notificationId&&this.simpleModalService.openConfirmationModal("Discard unsaved edit?",d.i.WARNING,"Warning: If you choose to edit another notification, any unsaved changes will be lost.").result.then(()=>{this.loadNotificationEditForm(n)}):this.loadNotificationEditForm(n)}loadNotificationEditForm(n){const l=N()(n.startTimestamp),e=N()(n.endTimestamp);this.notificationEditFormModel={notificationId:n.notificationId,shown:n.shown,startTime:{minute:0===l.hour()?59:0,hour:0===l.hour()?23:l.hour()},startDate:{year:l.year(),month:l.month()+1,day:l.date()},endTime:{minute:0===e.hour()?59:0,hour:0===e.hour()?23:e.hour()},endDate:{year:e.year(),month:e.month()+1,day:e.date()},style:n.style,targetUser:n.targetUser,title:n.title,message:n.message,isSaving:!1,isDeleting:!1},this.currentNotificationEditFormMode=C.EDIT,this.isNotificationEditFormExpanded=!0}addNewNotificationHandler(){this.notificationEditFormModel.isSaving=!0;const n=this.timezoneService.resolveLocalDateTime(this.notificationEditFormModel.startDate,this.notificationEditFormModel.startTime),l=this.timezoneService.resolveLocalDateTime(this.notificationEditFormModel.endDate,this.notificationEditFormModel.endTime);this.notificationService.createNotification({title:this.notificationEditFormModel.title,message:this.notificationEditFormModel.message,style:this.notificationEditFormModel.style,targetUser:this.notificationEditFormModel.targetUser,startTimestamp:n,endTimestamp:l}).pipe((0,m.j)(()=>{this.notificationEditFormModel.isSaving=!1})).subscribe({next:e=>{this.notificationsTableRowModels.unshift({isHighlighted:!0,notification:e}),this.initNotificationEditFormModel(),this.statusMessageService.showSuccessToast("Notification created successfully.")},error:e=>{this.statusMessageService.showErrorToast(e.error.message)}})}editExistingNotificationHandler(){this.notificationEditFormModel.isSaving=!0;const n=this.timezoneService.resolveLocalDateTime(this.notificationEditFormModel.startDate,this.notificationEditFormModel.startTime),l=this.timezoneService.resolveLocalDateTime(this.notificationEditFormModel.endDate,this.notificationEditFormModel.endTime);this.notificationService.updateNotification({title:this.notificationEditFormModel.title,message:this.notificationEditFormModel.message,style:this.notificationEditFormModel.style,targetUser:this.notificationEditFormModel.targetUser,startTimestamp:n,endTimestamp:l},this.notificationEditFormModel.notificationId).pipe((0,m.j)(()=>{this.notificationEditFormModel.isSaving=!1})).subscribe({next:e=>{this.statusMessageService.showSuccessToast("Notification updated successfully."),this.notificationsTableRowModels.forEach(T=>{T.notification.notificationId===e.notificationId&&(T.isHighlighted=!0,T.notification=e)}),this.initNotificationEditFormModel()},error:e=>{this.statusMessageService.showErrorToast(e.error.message)}})}deleteNotificationHandler(n){this.notificationService.deleteNotification(n).subscribe({next:l=>{this.statusMessageService.showSuccessToast(l.message),this.notificationsTableRowModels=this.notificationsTableRowModels.filter(e=>e.notification.notificationId!==n)},error:l=>{this.statusMessageService.showErrorToast(l.error.message)}})}sortNotificationsTableRowModelsHandler(n){this.notificationsTableRowModelsSortBy===n?this.notificationsTableRowModelsSortOrder=this.notificationsTableRowModelsSortOrder===E.x.ASC?E.x.DESC:E.x.ASC:this.notificationsTableRowModelsSortBy=n,this.notificationsTableRowModels.forEach(l=>{l.isHighlighted=!1}),this.notificationsTableRowModels.sort(this.getNotificationsTableRowModelsComparator())}getNotificationsTableRowModelsComparator(){return(n,l)=>{let e,T;switch(this.notificationsTableRowModelsSortBy){case E.g.NOTIFICATION_CREATE_TIME:e=String(n.notification.createdAt),T=String(l.notification.createdAt);break;case E.g.NOTIFICATION_TITLE:e=n.notification.title,T=l.notification.title;break;case E.g.NOTIFICATION_START_TIME:e=String(n.notification.startTimestamp),T=String(l.notification.startTimestamp);break;case E.g.NOTIFICATION_END_TIME:e=String(n.notification.endTimestamp),T=String(l.notification.endTimestamp);break;case E.g.NOTIFICATION_TARGET_USER:e=String(n.notification.targetUser),T=String(l.notification.targetUser);break;case E.g.NOTIFICATION_STYLE:e=String(n.notification.style),T=String(l.notification.style);break;default:e="",T=""}return this.tableComparatorService.compare(this.notificationsTableRowModelsSortBy,this.notificationsTableRowModelsSortOrder,e,T)}}static#t=this.\u0275fac=function(l){return new(l||s)(t.rXU(h.J),t.rXU(O.r),t.rXU(D.x),t.rXU(v.C),t.rXU(F.D))};static#i=this.\u0275cmp=t.VBU({type:s,selectors:[["tm-admin-notifications-page"]],decls:17,vars:8,consts:[["id","notifications-timezone"],["id","btn-add-notification",1,"btn","btn-success",3,"disabled","click"],[4,"ngIf","ngIfElse"],["editbtn",""],["class","margin-top-30px",4,"ngIf"],[3,"shouldShowRetry","message","retryEvent"],[1,"margin-top-30px"],[4,"tmIsLoading"],[1,"fas","fa-plus"],[1,"fas","fa-cog"],[3,"formMode","model","guessTimezone","modelChange","addNewNotificationEvent","editExistingNotificationEvent","cancelEditingNotificationEvent"],["class","alert alert-warning margin-top-30px","role","alert",4,"ngIf"],[3,"guessTimezone","notificationsTableRowModels","notificationsTableRowModelsSortBy","notificationsTableRowModelsSortOrder","deleteNotificationEvent","loadNotificationEditFormEvent","sortNotificationsTableRowModelsEvent",4,"ngIf"],["role","alert",1,"alert","alert-warning","margin-top-30px"],[3,"guessTimezone","notificationsTableRowModels","notificationsTableRowModelsSortBy","notificationsTableRowModelsSortOrder","deleteNotificationEvent","loadNotificationEditFormEvent","sortNotificationsTableRowModelsEvent"]],template:function(l,e){if(1&l&&(t.j41(0,"h1"),t.EFF(1,"Notifications"),t.k0s(),t.j41(2,"p"),t.EFF(3,"This page allows you to create and manage notifications which are shown to respective target users when they access TEAMMATES."),t.k0s(),t.j41(4,"div",0)(5,"p"),t.EFF(6),t.k0s()(),t.j41(7,"div")(8,"button",1),t.bIt("click",function(){return e.isNotificationEditFormExpanded=!0}),t.DNE(9,Tt,3,0,"span",2),t.DNE(10,mt,2,0,"ng-template",null,3,t.C5r),t.k0s()(),t.DNE(12,ft,2,4,"div",4),t.j41(13,"tm-loading-retry",5),t.bIt("retryEvent",function(){return e.retryLoadingAllData()}),t.j41(14,"div",6),t.DNE(15,gt,3,2,"div",7),t.k0s(),t.nrm(16,"br"),t.k0s()),2&l){const T=t.sdS(11);t.R7$(6),t.SpI("All dates are displayed in ",e.guessTimezone," time."),t.R7$(2),t.Y8G("disabled",e.isNotificationEditFormExpanded||e.isNotificationLoading),t.R7$(1),t.Y8G("ngIf",e.currentNotificationEditFormMode===e.NotificationEditFormMode.ADD)("ngIfElse",T),t.R7$(3),t.Y8G("ngIf",e.isNotificationEditFormExpanded&&!e.isNotificationLoading),t.R7$(1),t.Y8G("shouldShowRetry",e.hasNotificationLoadingFailed)("message","Failed to load data"),t.R7$(2),t.Y8G("tmIsLoading",e.isNotificationLoading)}},dependencies:[o.bT,L.n,P.Y,B,_t],styles:[".margin-top-30px[_ngcontent-%COMP%]{margin-top:30px}.sortable-header[_ngcontent-%COMP%]{cursor:pointer}.actions-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:2px}"],data:{animation:[f.j]}})}return s})();var Rt=r(85385),ut=r(3939),pt=r(34029),Mt=r(84309),ht=r(99315),Ot=r(44661),At=r(90637);const St=[{path:"",component:Ct}];let bt=(()=>{class s{static#t=this.\u0275fac=function(l){return new(l||s)};static#i=this.\u0275mod=t.$C({type:s});static#e=this.\u0275inj=t.G2t({imports:[Rt.D,o.MD,ut.x,I.YN,ht.b,i.iI.forChild(St),Mt.y,pt.Z,a.n8,Ot.x,At.g]})}return s})()},16:(M,R,r)=>{r.d(R,{C:()=>N});var o=r(96508),I=r.n(o),i=r(94089),a=r(26195),p=r(17705);let N=(()=>{class m{compareChronologically(_,c,E){const d=I()(_),f=I()(c);return d.isValid()?f.isValid()?E===a.x.ASC?d.diff(f):E===a.x.DESC?f.diff(d):0:-1:1}compareLexicographically(_,c,E){return E===a.x.ASC?_.localeCompare(c):E===a.x.DESC?c.localeCompare(_):0}compareNaturally(_,c,E){return E===a.x.ASC?_.localeCompare(c,void 0,{numeric:!0}):E===a.x.DESC?c.localeCompare(_,void 0,{numeric:!0}):0}compareNumbers(_,c,E){const d=Number(_),f=Number(c);return Number.isNaN(d)?1:Number.isNaN(f)?-1:(E===a.x.DESC?-1:1)*Math.sign(d-f)}compareRoles(_,c,E){const d=Object.keys(i.vD),f=d.indexOf(_),t=d.indexOf(c);return Number.isNaN(f)?1:Number.isNaN(t)?-1:(E===a.x.DESC?-1:1)*Math.sign(t-f)}compare(_,c,E,d){switch(_){case a.g.CONTRIBUTION_TEAM:case a.g.CONTRIBUTION_VALUE:case a.g.RUBRIC_SUBQUESTION:case a.g.RUBRIC_CHOICE:case a.g.RANK_RECIPIENTS_TEAM:case a.g.RANK_RECIPIENTS_RECIPIENT:case a.g.MCQ_TEAM:case a.g.MCQ_OPTION_SELECTED_TIMES:case a.g.MSQ_TEAM:case a.g.MSQ_OPTION_SELECTED_TIMES:case a.g.SECTION_NAME:case a.g.TEAM_NAME:case a.g.SESSION_NAME:case a.g.GIVER_TEAM:case a.g.RECIPIENT_TEAM:case a.g.INSTRUCTOR_DISPLAYED_TEXT:return this.compareNaturally(E,d,c);case a.g.CONSTSUM_OPTIONS_OPTION:case a.g.CONTRIBUTION_RECIPIENT:case a.g.COMMENTS_CREATION_DATE:case a.g.RANK_OPTIONS_OPTION:case a.g.MCQ_CHOICE:case a.g.MCQ_RECIPIENT_NAME:case a.g.MSQ_CHOICE:case a.g.MSQ_RECIPIENT_NAME:case a.g.RESPONDENT_NAME:case a.g.RESPONDENT_EMAIL:case a.g.JOIN_STATUS:case a.g.COURSE_ID:case a.g.COURSE_NAME:case a.g.COURSE_CREATION_DATE:case a.g.SESSION_COMPLETION_STATUS:case a.g.SESSION_START_DATE:case a.g.SESSION_END_DATE:case a.g.SESSION_CREATION_DATE:case a.g.SESSION_DELETION_DATE:case a.g.NOTIFICATION_START_TIME:case a.g.NOTIFICATION_END_TIME:case a.g.NOTIFICATION_CREATE_TIME:case a.g.NOTIFICATION_TITLE:case a.g.NOTIFICATION_TARGET_USER:case a.g.NOTIFICATION_STYLE:case a.g.QUESTION_TYPE:case a.g.QUESTION_TEXT:case a.g.GIVER_NAME:case a.g.RECIPIENT_NAME:case a.g.LOG_TYPE:case a.g.RESULT_VIEW_STATUS:return this.compareLexicographically(E,d,c);case a.g.MCQ_RESPONSE_COUNT:case a.g.MSQ_RESPONSE_COUNT:case a.g.RANK_OPTIONS_OVERALL_RANK:case a.g.RANK_RECIPIENTS_SELF_RANK:case a.g.RANK_RECIPIENTS_OVERALL_RANK:case a.g.RANK_RECIPIENTS_OVERALL_RANK_EXCLUDING_SELF:case a.g.RANK_RECIPIENTS_TEAM_RANK:case a.g.RANK_RECIPIENTS_TEAM_RANK_EXCLUDING_SELF:case a.g.CONSTSUM_OPTIONS_POINTS:case a.g.CONSTSUM_RECIPIENTS_POINTS:case a.g.RUBRIC_WEIGHT_AVERAGE:case a.g.RUBRIC_TOTAL_CHOSEN_WEIGHT:case a.g.NUMERICAL_SCALE_MAX:case a.g.NUMERICAL_SCALE_MIN:case a.g.NUMERICAL_SCALE_AVERAGE:case a.g.NUMERICAL_SCALE_AVERAGE_EXCLUDE_SELF:case a.g.MCQ_WEIGHT:case a.g.MCQ_PERCENTAGE:case a.g.MCQ_WEIGHTED_PERCENTAGE:case a.g.MCQ_WEIGHT_TOTAL:case a.g.MCQ_WEIGHT_AVERAGE:case a.g.MSQ_WEIGHT:case a.g.MSQ_PERCENTAGE:case a.g.MSQ_WEIGHTED_PERCENTAGE:case a.g.MSQ_WEIGHT_TOTAL:case a.g.MSQ_WEIGHT_AVERAGE:return this.compareNumbers(E,d,c);case a.g.LOG_DATE:return this.compareChronologically(E,d,c);case a.g.INSTRUCTOR_PERMISSION_ROLE:return this.compareRoles(E,d,c);default:return 0}}static#t=this.\u0275fac=function(c){return new(c||m)};static#i=this.\u0275prov=p.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},26195:(M,R,r)=>{r.d(R,{g:()=>o,x:()=>I});var o=function(i){return i[i.NONE=0]="NONE",i[i.SECTION_NAME=1]="SECTION_NAME",i[i.TEAM_NAME=2]="TEAM_NAME",i[i.RESPONDENT_NAME=3]="RESPONDENT_NAME",i[i.RESPONDENT_EMAIL=4]="RESPONDENT_EMAIL",i[i.INSTRUCTOR_PERMISSION_ROLE=5]="INSTRUCTOR_PERMISSION_ROLE",i[i.INSTRUCTOR_DISPLAYED_TEXT=6]="INSTRUCTOR_DISPLAYED_TEXT",i[i.JOIN_STATUS=7]="JOIN_STATUS",i[i.COURSE_ID=8]="COURSE_ID",i[i.COURSE_NAME=9]="COURSE_NAME",i[i.COURSE_CREATION_DATE=10]="COURSE_CREATION_DATE",i[i.COURSE_DELETION_DATE=11]="COURSE_DELETION_DATE",i[i.SESSION_COMPLETION_STATUS=12]="SESSION_COMPLETION_STATUS",i[i.SESSION_NAME=13]="SESSION_NAME",i[i.SESSION_START_DATE=14]="SESSION_START_DATE",i[i.SESSION_END_DATE=15]="SESSION_END_DATE",i[i.SESSION_CREATION_DATE=16]="SESSION_CREATION_DATE",i[i.SESSION_DELETION_DATE=17]="SESSION_DELETION_DATE",i[i.QUESTION_TYPE=18]="QUESTION_TYPE",i[i.QUESTION_TEXT=19]="QUESTION_TEXT",i[i.GIVER_TEAM=20]="GIVER_TEAM",i[i.GIVER_NAME=21]="GIVER_NAME",i[i.RECIPIENT_TEAM=22]="RECIPIENT_TEAM",i[i.RECIPIENT_NAME=23]="RECIPIENT_NAME",i[i.RECIPIENT_EMAIL=24]="RECIPIENT_EMAIL",i[i.NUMERICAL_SCALE_AVERAGE=25]="NUMERICAL_SCALE_AVERAGE",i[i.NUMERICAL_SCALE_MAX=26]="NUMERICAL_SCALE_MAX",i[i.NUMERICAL_SCALE_MIN=27]="NUMERICAL_SCALE_MIN",i[i.NUMERICAL_SCALE_AVERAGE_EXCLUDE_SELF=28]="NUMERICAL_SCALE_AVERAGE_EXCLUDE_SELF",i[i.MCQ_CHOICE=29]="MCQ_CHOICE",i[i.MCQ_WEIGHT=30]="MCQ_WEIGHT",i[i.MCQ_RESPONSE_COUNT=31]="MCQ_RESPONSE_COUNT",i[i.MCQ_PERCENTAGE=32]="MCQ_PERCENTAGE",i[i.MCQ_WEIGHTED_PERCENTAGE=33]="MCQ_WEIGHTED_PERCENTAGE",i[i.MCQ_TEAM=34]="MCQ_TEAM",i[i.MCQ_RECIPIENT_NAME=35]="MCQ_RECIPIENT_NAME",i[i.MCQ_OPTION_SELECTED_TIMES=36]="MCQ_OPTION_SELECTED_TIMES",i[i.MCQ_WEIGHT_TOTAL=37]="MCQ_WEIGHT_TOTAL",i[i.MCQ_WEIGHT_AVERAGE=38]="MCQ_WEIGHT_AVERAGE",i[i.MSQ_CHOICE=39]="MSQ_CHOICE",i[i.MSQ_WEIGHT=40]="MSQ_WEIGHT",i[i.MSQ_RESPONSE_COUNT=41]="MSQ_RESPONSE_COUNT",i[i.MSQ_PERCENTAGE=42]="MSQ_PERCENTAGE",i[i.MSQ_WEIGHTED_PERCENTAGE=43]="MSQ_WEIGHTED_PERCENTAGE",i[i.MSQ_TEAM=44]="MSQ_TEAM",i[i.MSQ_RECIPIENT_NAME=45]="MSQ_RECIPIENT_NAME",i[i.MSQ_OPTION_SELECTED_TIMES=46]="MSQ_OPTION_SELECTED_TIMES",i[i.MSQ_WEIGHT_TOTAL=47]="MSQ_WEIGHT_TOTAL",i[i.MSQ_WEIGHT_AVERAGE=48]="MSQ_WEIGHT_AVERAGE",i[i.RANK_OPTIONS_OPTION=49]="RANK_OPTIONS_OPTION",i[i.RANK_OPTIONS_OVERALL_RANK=50]="RANK_OPTIONS_OVERALL_RANK",i[i.RANK_RECIPIENTS_TEAM=51]="RANK_RECIPIENTS_TEAM",i[i.RANK_RECIPIENTS_RECIPIENT=52]="RANK_RECIPIENTS_RECIPIENT",i[i.RANK_RECIPIENTS_SELF_RANK=53]="RANK_RECIPIENTS_SELF_RANK",i[i.RANK_RECIPIENTS_OVERALL_RANK=54]="RANK_RECIPIENTS_OVERALL_RANK",i[i.RANK_RECIPIENTS_OVERALL_RANK_EXCLUDING_SELF=55]="RANK_RECIPIENTS_OVERALL_RANK_EXCLUDING_SELF",i[i.RANK_RECIPIENTS_TEAM_RANK=56]="RANK_RECIPIENTS_TEAM_RANK",i[i.RANK_RECIPIENTS_TEAM_RANK_EXCLUDING_SELF=57]="RANK_RECIPIENTS_TEAM_RANK_EXCLUDING_SELF",i[i.RUBRIC_SUBQUESTION=58]="RUBRIC_SUBQUESTION",i[i.RUBRIC_CHOICE=59]="RUBRIC_CHOICE",i[i.RUBRIC_WEIGHT_AVERAGE=60]="RUBRIC_WEIGHT_AVERAGE",i[i.RUBRIC_TOTAL_CHOSEN_WEIGHT=61]="RUBRIC_TOTAL_CHOSEN_WEIGHT",i[i.RUBRIC_OVERALL_WEIGHT_AVERAGE=62]="RUBRIC_OVERALL_WEIGHT_AVERAGE",i[i.RUBRIC_OVERALL_TOTAL_WEIGHT=63]="RUBRIC_OVERALL_TOTAL_WEIGHT",i[i.CONSTSUM_OPTIONS_OPTION=64]="CONSTSUM_OPTIONS_OPTION",i[i.CONSTSUM_OPTIONS_POINTS=65]="CONSTSUM_OPTIONS_POINTS",i[i.CONSTSUM_RECIPIENTS_POINTS=66]="CONSTSUM_RECIPIENTS_POINTS",i[i.CONTRIBUTION_TEAM=67]="CONTRIBUTION_TEAM",i[i.CONTRIBUTION_RECIPIENT=68]="CONTRIBUTION_RECIPIENT",i[i.CONTRIBUTION_VALUE=69]="CONTRIBUTION_VALUE",i[i.COMMENTS_CREATION_DATE=70]="COMMENTS_CREATION_DATE",i[i.LOG_TYPE=71]="LOG_TYPE",i[i.LOG_DATE=72]="LOG_DATE",i[i.RESULT_VIEW_STATUS=73]="RESULT_VIEW_STATUS",i[i.NOTIFICATION_TITLE=74]="NOTIFICATION_TITLE",i[i.NOTIFICATION_START_TIME=75]="NOTIFICATION_START_TIME",i[i.NOTIFICATION_END_TIME=76]="NOTIFICATION_END_TIME",i[i.NOTIFICATION_CREATE_TIME=77]="NOTIFICATION_CREATE_TIME",i[i.NOTIFICATION_TARGET_USER=78]="NOTIFICATION_TARGET_USER",i[i.NOTIFICATION_STYLE=79]="NOTIFICATION_STYLE",i}(o||{}),I=function(i){return i[i.DESC=0]="DESC",i[i.ASC=1]="ASC",i}(I||{})}}]);