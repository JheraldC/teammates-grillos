"use strict";(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[5449],{72890:(S,v,o)=>{o.d(v,{Y:()=>t});var i=o(17705),u=o(60177);function p(s,r){if(1&s){const g=i.RV6();i.j41(0,"div",2)(1,"p",3),i.EFF(2),i.k0s(),i.j41(3,"button",4),i.bIt("click",function(){i.eBV(g);const E=i.XpG();return i.Njj(E.retryEvent.emit())}),i.nrm(4,"i",5),i.EFF(5,"\xa0Retry"),i.k0s()()}if(2&s){const g=i.XpG();i.R7$(2),i.JRh(g.message),i.R7$(1),i.Y8G("disabled",g.retryButtonDisabled)}}function m(s,r){1&s&&i.SdG(0)}const c=["*"];let t=(()=>{class s{constructor(){this.message="",this.shouldShowRetry=!1,this.retryButtonDisabled=!1,this.retryEvent=new i.bkB}static#t=this.\u0275fac=function(f){return new(f||s)};static#e=this.\u0275cmp=i.VBU({type:s,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry",retryButtonDisabled:"retryButtonDisabled"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:c,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(f,E){if(1&f&&(i.NAR(),i.DNE(0,p,6,2,"div",0),i.DNE(1,m,1,0,"ng-template",null,1,i.C5r)),2&f){const R=i.sdS(2);i.Y8G("ngIf",E.shouldShowRetry)("ngIfElse",R)}},dependencies:[u.bT]})}return s})()},34029:(S,v,o)=>{o.d(v,{Z:()=>p});var i=o(60177),u=o(17705);let p=(()=>{class m{static#t=this.\u0275fac=function(s){return new(s||m)};static#e=this.\u0275mod=u.$C({type:m});static#s=this.\u0275inj=u.G2t({imports:[i.MD]})}return m})()},25449:(S,v,o)=>{o.r(v),o.d(v,{StudentCourseDetailsPageModule:()=>G});var i=o(60177),u=o(82646),p=o(70980),m=o(40035),c=o(26195),t=o(17705),s=o(16),r=o(21036),g=o(86978),f=o(89734),E=o(30715),R=o(57645),I=o(72890);function C(n,l){if(1&n&&(t.j41(0,"h1",5),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI("Team Details for ",e.course.courseId,"")}}function F(n,l){if(1&n&&(t.qex(0),t.j41(1,"div",11)(2,"div",12)(3,"label"),t.EFF(4,"Course ID:"),t.k0s()(),t.j41(5,"div",13)(6,"span",14),t.EFF(7),t.k0s()()(),t.j41(8,"div",11)(9,"div",12)(10,"label"),t.EFF(11,"Course name:"),t.k0s()(),t.j41(12,"div",13)(13,"span",15),t.EFF(14),t.k0s()()(),t.j41(15,"div",11)(16,"div",12)(17,"label"),t.EFF(18,"Course institute:"),t.k0s()(),t.j41(19,"div",13)(20,"span",16),t.EFF(21),t.k0s()()(),t.bVm()),2&n){const e=t.XpG(3);t.R7$(7),t.JRh(e.course.courseId),t.R7$(7),t.JRh(e.course.courseName),t.R7$(7),t.JRh(e.course.institute)}}function T(n,l){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.j41(2,"a",19),t.EFF(3),t.k0s()()),2&n){const e=l.$implicit;t.R7$(1),t.SpI(" ",e.displayedToStudentsAs,": "),t.R7$(1),t.Mz_("href","mailto:",e.email,"",t.B4B),t.R7$(1),t.Lme("",e.name," (",e.email,")")}}function D(n,l){if(1&n&&(t.qex(0),t.j41(1,"div",11)(2,"div",12)(3,"label"),t.EFF(4,"Instructors:"),t.k0s()(),t.j41(5,"div",17),t.DNE(6,T,4,4,"div",18),t.k0s()(),t.bVm()),2&n){const e=t.XpG(3);t.R7$(6),t.Y8G("ngForOf",e.instructorDetails)}}function b(n,l){if(1&n&&(t.qex(0),t.j41(1,"div",11)(2,"div",12)(3,"label"),t.EFF(4,"Your section:"),t.k0s()(),t.j41(5,"div",13)(6,"span",20),t.EFF(7),t.k0s()()(),t.j41(8,"div",11)(9,"div",12)(10,"label"),t.EFF(11,"Your team:"),t.k0s()(),t.j41(12,"div",13)(13,"span",21),t.EFF(14),t.k0s()()(),t.j41(15,"div",11)(16,"div",12)(17,"label"),t.EFF(18,"Your name:"),t.k0s()(),t.j41(19,"div",13)(20,"span",22),t.EFF(21),t.k0s()()(),t.j41(22,"div",11)(23,"div",12)(24,"label"),t.EFF(25,"Your email:"),t.k0s()(),t.j41(26,"div",13)(27,"span",23),t.EFF(28),t.k0s()()(),t.bVm()),2&n){const e=t.XpG(3);t.R7$(7),t.JRh(e.student.sectionName),t.R7$(7),t.JRh(e.student.teamName),t.R7$(7),t.JRh(e.student.name),t.R7$(7),t.JRh(e.student.email)}}function L(n,l){if(1&n&&(t.j41(0,"div",8)(1,"div",9),t.DNE(2,F,22,3,"ng-container",10),t.DNE(3,D,7,1,"ng-container",10),t.DNE(4,b,29,4,"ng-container",10),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("ngIf",e.course.courseId),t.R7$(1),t.Y8G("ngIf",e.instructorDetails&&e.instructorDetails.length),t.R7$(1),t.Y8G("ngIf",e.student.courseId)}}function N(n,l){if(1&n&&(t.j41(0,"div",6),t.DNE(1,L,5,3,"div",7),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("tmIsLoading",e.isLoadingCourse||e.isLoadingInstructor||e.isLoadingStudent)}}function M(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",24)(1,"div",25)(2,"span",26),t.EFF(3,"Sort By: "),t.k0s(),t.j41(4,"div",27)(5,"button",28),t.bIt("click",function(){t.eBV(e);const d=t.XpG();return t.Njj(d.sortTeammatesBy(d.SortBy.RESPONDENT_NAME))}),t.EFF(6,"Name"),t.k0s(),t.j41(7,"button",29),t.bIt("click",function(){t.eBV(e);const d=t.XpG();return t.Njj(d.sortTeammatesBy(d.SortBy.RESPONDENT_EMAIL))}),t.EFF(8,"Email"),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(5),t.Y8G("disabled",e.isSelectedForSorting(e.SortBy.RESPONDENT_NAME)),t.R7$(2),t.Y8G("disabled",e.isSelectedForSorting(e.SortBy.RESPONDENT_EMAIL))}}function j(n,l){1&n&&(t.j41(0,"div",33)(1,"strong"),t.EFF(2,"Your teammates:"),t.k0s()())}function y(n,l){if(1&n&&(t.j41(0,"tr")(1,"td",34)(2,"div")(3,"label"),t.EFF(4,"Name:"),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"div")(7,"label"),t.EFF(8,"Email:"),t.k0s(),t.EFF(9,"\xa0"),t.j41(10,"a",19),t.EFF(11),t.k0s()()()()),2&n){const e=l.$implicit,a=l.index;t.R7$(1),t.Mz_("id","teammates-details-",a,""),t.R7$(4),t.SpI(" ",e.name," "),t.R7$(5),t.Mz_("href","mailto:",e.email,"",t.B4B),t.R7$(1),t.JRh(e.email)}}function O(n,l){if(1&n&&(t.j41(0,"div",6)(1,"div",30),t.DNE(2,j,3,0,"div",31),t.j41(3,"div",32)(4,"table")(5,"tbody"),t.DNE(6,y,12,4,"tr",18),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.teammateProfiles.length),t.R7$(4),t.Y8G("ngForOf",e.teammateProfiles)}}let P=(()=>{class n{constructor(e,a,d,h,_,U){this.tableComparatorService=e,this.route=a,this.instructorService=d,this.studentService=h,this.courseService=_,this.statusMessageService=U,this.SortBy=c.g,this.teammateProfilesSortBy=c.g.NONE,this.student={email:"",courseId:"",name:"",comments:"",joinState:m.SR.NOT_JOINED,teamName:"",sectionName:""},this.course={courseId:"",courseName:"",institute:"",timeZone:"UTC",creationTimestamp:0,deletionTimestamp:0},this.courseId="",this.instructorDetails=[],this.teammateProfiles=[],this.isLoadingCourse=!1,this.isLoadingStudent=!1,this.isLoadingInstructor=!1,this.isLoadingTeammates=!1,this.hasLoadingFailed=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.courseId=e.courseid,this.loadStudent(e.courseid),this.loadCourse(e.courseid),this.loadInstructors(e.courseid)})}loadCourse(e){this.isLoadingCourse=!0,this.courseService.getCourseAsStudent(e).pipe((0,p.j)(()=>{this.isLoadingCourse=!1})).subscribe({next:a=>{this.course=a},error:a=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(a.error.message)}})}loadStudent(e){this.isLoadingStudent=!0,this.studentService.getStudent(e).pipe((0,p.j)(()=>{this.isLoadingStudent=!1})).subscribe({next:a=>{this.student=a,this.loadTeammates(e,a.teamName)},error:a=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(a.error.message)}})}loadTeammates(e,a){this.isLoadingTeammates=!0,this.teammateProfiles=[],this.studentService.getStudentsFromCourseAndTeam(e,a).subscribe({next:d=>{1===d.students.length&&d.students[0].email===this.student.email&&(this.isLoadingTeammates=!1),d.students.forEach(h=>{h.email!==this.student.email&&this.teammateProfiles.push(h)}),this.isLoadingTeammates=!1},error:d=>{this.isLoadingTeammates=!1,this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(d.error.message)}})}loadInstructors(e){this.isLoadingInstructor=!0,this.instructorService.loadInstructors({courseId:e}).pipe((0,p.j)(()=>{this.isLoadingInstructor=!1})).subscribe({next:a=>{this.instructorDetails=a.instructors},error:a=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(a.error.message)}})}isSelectedForSorting(e){return this.teammateProfilesSortBy===e}sortTeammatesBy(e){this.teammateProfilesSortBy=e,this.teammateProfiles.length>1&&this.teammateProfiles.sort(this.sortPanelsBy(e))}sortPanelsBy(e){return(a,d)=>{let h,_;switch(e){case c.g.RESPONDENT_NAME:h=a.name,_=d.name;break;case c.g.RESPONDENT_EMAIL:h=a.email,_=d.email;break;default:h="",_=""}return this.tableComparatorService.compare(e,c.x.ASC,h,_)}}retryLoading(){this.hasLoadingFailed=!1,this.loadCourse(this.courseId),this.loadInstructors(this.courseId),this.loadStudent(this.courseId)}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(s.C),t.rXU(u.nX),t.rXU(r.p),t.rXU(g.b),t.rXU(f.f),t.rXU(E.x))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["tm-student-course-details-page"]],decls:5,vars:6,consts:[["class","page-title text-break",4,"ngIf"],[3,"shouldShowRetry","message","retryEvent"],["class","section",4,"ngIf"],["class","card bg-light mb-4",4,"ngIf"],["class","section",4,"tmIsLoading"],[1,"page-title","text-break"],[1,"section"],["class","card",4,"tmIsLoading"],[1,"card"],[1,"card-body","fill-plain"],[4,"ngIf"],[1,"row"],[1,"col-3","text-end"],[1,"col-9"],["id","course-id"],["id","course-name"],["id","course-institute"],["id","instructors",1,"col-9",2,"margin-bottom",".5rem"],[4,"ngFor","ngForOf"],[3,"href"],["id","student-section"],["id","student-team"],["id","student-name"],["id","student-email"],[1,"card","bg-light","mb-4"],[1,"card-body"],[1,"d-inline","h5","fw-bold"],["data-toggle","buttons",1,"btn-group"],["id","sort-name",1,"btn","btn-light",3,"disabled","click"],[1,"btn","btn-light",3,"disabled","click"],[1,"row","top-padded"],["class","col-md-2",4,"ngIf"],[1,"col-md-10"],[1,"col-md-2"],[1,"team-member-profile-cell",3,"id"]],template:function(a,d){1&a&&(t.DNE(0,C,2,1,"h1",0),t.j41(1,"tm-loading-retry",1),t.bIt("retryEvent",function(){return d.retryLoading()}),t.DNE(2,N,2,1,"div",2),t.DNE(3,M,9,2,"div",3),t.k0s(),t.DNE(4,O,7,2,"div",4)),2&a&&(t.Y8G("ngIf",d.course.courseId),t.R7$(1),t.Y8G("shouldShowRetry",d.hasLoadingFailed)("message","Failed to load details"),t.R7$(1),t.Y8G("ngIf",d.course.courseId),t.R7$(1),t.Y8G("ngIf",!d.isLoadingTeammates&&d.teammateProfiles.length),t.R7$(1),t.Y8G("tmIsLoading",d.isLoadingTeammates))},dependencies:[i.Sq,i.bT,R.n,I.Y],styles:[".page-title[_ngcontent-%COMP%]{margin-bottom:30px}.section[_ngcontent-%COMP%]{margin-bottom:40px}.fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}label[_ngcontent-%COMP%]{font-weight:700}.top-padded[_ngcontent-%COMP%]{margin-top:20px}.team-member-profile-cell[_ngcontent-%COMP%]{padding-bottom:15px;padding-left:30px;vertical-align:middle}.team-member-profile-cell[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}"]})}return n})();var B=o(34029),x=o(84309),k=o(44661);const $=[{path:"",component:P}];let G=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#s=this.\u0275inj=t.G2t({imports:[i.MD,u.iI.forChild($),k.x,x.y,B.Z]})}return n})()},21036:(S,v,o)=>{o.d(v,{p:()=>m});var i=o(8059),u=o(17705),p=o(16507);let m=(()=>{class c{constructor(s){this.httpRequestService=s}loadInstructors(s){const r={courseid:s.courseId};return s.intent&&(r.intent=s.intent),this.httpRequestService.get(i.Ld.INSTRUCTORS,r)}getInstructor(s){const r={courseid:s.courseId,intent:s.intent};return s.feedbackSessionName&&(r.fsname=s.feedbackSessionName),s.key&&(r.key=s.key),s.moderatedPerson&&(r.moderatedperson=s.moderatedPerson),s.previewAs&&(r.previewas=s.previewAs),this.httpRequestService.get(i.Ld.INSTRUCTOR,r)}createInstructor(s){return this.httpRequestService.post(i.Ld.INSTRUCTOR,{courseid:s.courseId},s.requestBody)}updateInstructor(s){return this.httpRequestService.put(i.Ld.INSTRUCTOR,{courseid:s.courseId},s.requestBody)}deleteInstructor(s){const r={courseid:s.courseId};return s.instructorEmail&&(r.instructoremail=s.instructorEmail),s.instructorId&&(r.instructorid=s.instructorId),this.httpRequestService.delete(i.Ld.INSTRUCTOR,r)}loadInstructorPrivilege(s){const r={courseid:s.courseId};return s.instructorEmail&&(r.instructoremail=s.instructorEmail),s.instructorId&&(r.instructorid=s.instructorId),this.httpRequestService.get(i.Ld.INSTRUCTOR_PRIVILEGE,r)}updateInstructorPrivilege(s){return this.httpRequestService.put(i.Ld.INSTRUCTOR_PRIVILEGE,{courseid:s.courseId,instructoremail:s.instructorEmail},s.requestBody)}regenerateInstructorKey(s,r){return this.httpRequestService.post(i.Ld.INSTRUCTOR_KEY,{courseid:s,instructoremail:r})}static#t=this.\u0275fac=function(r){return new(r||c)(u.KVO(p.R))};static#e=this.\u0275prov=u.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);