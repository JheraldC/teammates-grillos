"use strict";(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[3316],{75425:(M,C,e)=>{e.d(C,{n:()=>v});var t=e(60177),l=e(89417),r=e(94227),E=e(40348),d=e(76449),a=e(99315),f=e(44661),c=e(17705);let v=(()=>{class n{static#t=this.\u0275fac=function(b){return new(b||n)};static#e=this.\u0275mod=c.$C({type:n});static#i=this.\u0275inj=c.G2t({providers:[E.r],imports:[f.x,t.MD,d.k,a.b,r.n8,l.YN]})}return n})()},58640:(M,C,e)=>{e.d(C,{f:()=>g});var t=e(17705),l=e(18340),r=e(40035),E=e(71261),d=e(44199),a=e(33484),f=e(7439),c=e(60177),v=e(52916),n=e(94227),s=e(64943),u=e(33927);function b(m,T){1&m&&(t.j41(0,"div",2),t.EFF(1," Your comment about the above response "),t.k0s())}function D(m,T){if(1&m&&(t.j41(0,"div",2),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.k0s()),2&m){const o=t.XpG();t.R7$(1),t.Lme(" Giver: ",o.response.giver," (",o.response.giverTeam,")"),t.R7$(2),t.Lme(" Recipient: ",o.response.recipient," (",o.response.recipientTeam,") ")}}function O(m,T){if(1&m){const o=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.toggleVisibilityTable())}),t.nrm(1,"i",13),t.EFF(2),t.k0s()}if(2&m){const o=t.XpG();t.R7$(2),t.SpI(" ",o.isVisibilityTableExpanded?"Hide":"Show"," Visibility Options")}}function S(m,T){if(1&m){const o=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(o);const _=t.XpG(2);return t.Njj(_.triggerCloseCommentBoxEvent())}),t.k0s()}}function I(m,T){if(1&m&&(t.j41(0,"span",14),t.DNE(1,S,1,0,"button",15),t.k0s()),2&m){const o=t.XpG();t.R7$(1),t.Y8G("ngIf",!o.shouldHideClosingButton)}}function V(m,T){1&m&&(t.j41(0,"p"),t.EFF(1,"You may change comment's visibility using the visibility options on the right hand side."),t.k0s())}function P(m,T){if(1&m&&(t.j41(0,"th",21),t.EFF(1),t.nI1(2,"commentVisibilityControlName"),t.k0s()),2&m){const o=T.$implicit;t.R7$(1),t.JRh(t.bMT(2,1,o))}}function B(m,T){if(1&m){const o=t.RV6();t.j41(0,"td",24)(1,"input",25),t.bIt("click",function(_){const G=t.eBV(o).$implicit,F=t.XpG(2).$implicit,w=t.XpG(2);return t.Njj(w.modifyVisibilityControl(_.target.checked,F,G))}),t.k0s()()}if(2&m){const o=T.$implicit,h=t.XpG(2).$implicit,_=t.XpG(2);t.R7$(1),t.Y8G("checked",_.visibilityStateMachine.isVisible(h,o))}}function N(m,T){if(1&m&&(t.j41(0,"tr")(1,"td")(2,"span",22),t.nI1(3,"commentVisibilityTypeDescription"),t.EFF(4),t.nI1(5,"commentVisibilityTypeName"),t.k0s()(),t.DNE(6,B,2,1,"td",23),t.nI1(7,"enumToArray"),t.k0s()),2&m){const o=t.XpG().$implicit,h=t.XpG(2);t.R7$(2),t.Y8G("ngbTooltip",t.bMT(3,3,o)),t.R7$(2),t.JRh(t.bMT(5,5,o)),t.R7$(2),t.Y8G("ngForOf",t.bMT(7,7,h.CommentVisibilityControl))}}function p(m,T){if(1&m&&(t.qex(0),t.DNE(1,N,8,9,"tr",6),t.bVm()),2&m){const o=T.$implicit,h=t.XpG(2);t.R7$(1),t.Y8G("ngIf",h.visibilityStateMachine.isVisibilityTypeApplicable(o))}}function R(m,T){if(1&m&&(t.j41(0,"div")(1,"table",17)(2,"thead")(3,"tr")(4,"th",18),t.EFF(5,"User/Group"),t.k0s(),t.DNE(6,P,3,3,"th",19),t.nI1(7,"enumToArray"),t.k0s()(),t.j41(8,"tbody"),t.DNE(9,p,2,1,"ng-container",20),t.nI1(10,"enumToArray"),t.k0s()()()),2&m){const o=t.XpG();t.Y8G("@collapseAnim",void 0),t.R7$(6),t.Y8G("ngForOf",t.bMT(7,3,o.CommentVisibilityControl)),t.R7$(3),t.Y8G("ngForOf",t.bMT(10,5,o.CommentVisibilityType))}}function i(m,T){if(1&m){const o=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.triggerCloseCommentBoxEvent())}),t.nrm(1,"i",27),t.EFF(2," Cancel "),t.k0s()}if(2&m){const o=t.XpG();t.Y8G("disabled",o.isDisabled)}}function y(m,T){if(1&m){const o=t.RV6();t.j41(0,"button",28),t.bIt("click",function(){t.eBV(o);const _=t.XpG();return t.Njj(_.triggerSaveCommentEvent())}),t.nrm(1,"i",29),t.EFF(2),t.k0s()}if(2&m){const o=t.XpG();t.Y8G("disabled",o.isDisabled),t.R7$(2),t.SpI(" ",o.mode===o.CommentRowMode.EDIT?"Save":"Add"," ")}}let g=(()=>{class m{constructor(o){this.commentService=o,this.FeedbackParticipantType=r.tp,this.CommentVisibilityType=r.CD,this.CommentVisibilityControl=E.z,this.CommentRowMode=a.z,this.mode=a.z.ADD,this.model={commentText:"",isUsingCustomVisibilities:!1,showCommentTo:[],showGiverNameTo:[]},this.isFeedbackParticipantComment=!1,this.questionShowResponsesTo=[],this.modelChange=new t.bkB,this.isDisabled=!1,this.shouldHideSavingButton=!1,this.shouldHideClosingButton=!1,this.isVisibilityOptionEnabled=!0,this.closeCommentBoxEvent=new t.bkB,this.saveCommentEvent=new t.bkB,this.isVisibilityTableExpanded=!1,this.visibilityStateMachine=this.commentService.getNewVisibilityStateMachine(this.questionShowResponsesTo)}ngOnInit(){this.response&&(this.response.giver=l.M.removeAnonymousHash(this.response.giver),this.response.recipient=l.M.removeAnonymousHash(this.response.recipient))}ngOnChanges(){this.visibilityStateMachine=this.commentService.getNewVisibilityStateMachine(this.questionShowResponsesTo),this.model.isUsingCustomVisibilities?this.visibilityStateMachine.applyVisibilitySettings({SHOW_COMMENT:this.model.showCommentTo,SHOW_GIVER_NAME:this.model.showGiverNameTo}):(this.visibilityStateMachine.allowAllApplicableTypesToSee(),this.triggerModelChangeBatch({isUsingCustomVisibilities:!0,showCommentTo:this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(E.z.SHOW_COMMENT),showGiverNameTo:this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(E.z.SHOW_GIVER_NAME)}))}toggleVisibilityTable(){this.isVisibilityTableExpanded=!this.isVisibilityTableExpanded}triggerModelChange(o,h){this.modelChange.emit({...this.model,[o]:h})}triggerModelChangeBatch(o){this.modelChange.emit({...this.model,...o})}triggerCloseCommentBoxEvent(){this.closeCommentBoxEvent.emit()}triggerSaveCommentEvent(){this.saveCommentEvent.emit()}modifyVisibilityControl(o,h,_){o?this.visibilityStateMachine.allowToSee(h,_):this.visibilityStateMachine.disallowToSee(h,_),this.triggerModelChangeBatch({showCommentTo:this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(E.z.SHOW_COMMENT),showGiverNameTo:this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(E.z.SHOW_GIVER_NAME)})}static#t=this.\u0275fac=function(h){return new(h||m)(t.rXU(f.r))};static#e=this.\u0275cmp=t.VBU({type:m,selectors:[["tm-comment-edit-form"]],inputs:{mode:"mode",model:"model",isFeedbackParticipantComment:"isFeedbackParticipantComment",response:"response",questionShowResponsesTo:"questionShowResponsesTo",isDisabled:"isDisabled",shouldHideSavingButton:"shouldHideSavingButton",shouldHideClosingButton:"shouldHideClosingButton",isVisibilityOptionEnabled:"isVisibilityOptionEnabled"},outputs:{modelChange:"modelChange",closeCommentBoxEvent:"closeCommentBoxEvent",saveCommentEvent:"saveCommentEvent"},features:[t.OA$],decls:15,vars:10,consts:[[1,"row"],["class","col-6",4,"ngIf"],[1,"col-6"],[1,"float-end"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["style","margin-left: 10px;",4,"ngIf"],[4,"ngIf"],[2,"margin","10px 0"],["placeholderText","Enter your comment here",3,"richText","isDisabled","richTextChange"],[1,"d-flex","justify-content-end"],["type","button","class","btn btn-light btn-sm me-2","aria-label","Cancel editing",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-success btn-sm","aria-label","Save comment",3,"disabled","click",4,"ngIf"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fas","fa-eye"],[2,"margin-left","10px"],["type","button","class","btn-close","aria-label","Close",3,"click",4,"ngIf"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"table","margin-bottom-0","background-color-white","table-striped","table-responsive-md"],["scope","col",1,"text-start"],["scope","col","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col",1,"text-center"],["container","body",1,"ngb-tooltip-class",3,"ngbTooltip"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],["type","checkbox",3,"checked","click"],["type","button","aria-label","Cancel editing",1,"btn","btn-light","btn-sm","me-2",3,"disabled","click"],[1,"fas","fa-times"],["type","button","aria-label","Save comment",1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"fas","fa-save"]],template:function(h,_){1&h&&(t.j41(0,"div",0),t.DNE(1,b,2,0,"div",1),t.DNE(2,D,4,4,"div",1),t.j41(3,"div",2)(4,"div",3)(5,"span"),t.DNE(6,O,3,1,"button",4),t.k0s(),t.DNE(7,I,2,1,"span",5),t.k0s()()(),t.DNE(8,V,2,0,"p",6),t.DNE(9,R,11,7,"div",6),t.j41(10,"div",7)(11,"tm-rich-text-editor",8),t.bIt("richTextChange",function(G){return _.triggerModelChange("commentText",G)}),t.k0s()(),t.j41(12,"div",9),t.DNE(13,i,3,1,"button",10),t.DNE(14,y,3,2,"button",11),t.k0s()),2&h&&(t.R7$(1),t.Y8G("ngIf",_.isFeedbackParticipantComment),t.R7$(1),t.Y8G("ngIf",!_.isFeedbackParticipantComment&&_.response),t.R7$(4),t.Y8G("ngIf",_.isVisibilityOptionEnabled),t.R7$(1),t.Y8G("ngIf",!_.isVisibilityOptionEnabled),t.R7$(1),t.Y8G("ngIf",_.isVisibilityOptionEnabled),t.R7$(1),t.Y8G("ngIf",_.isVisibilityTableExpanded),t.R7$(2),t.Y8G("richText",_.model.commentText)("isDisabled",_.isDisabled),t.R7$(2),t.Y8G("ngIf",!_.shouldHideClosingButton),t.R7$(1),t.Y8G("ngIf",!_.shouldHideSavingButton))},dependencies:[c.Sq,c.bT,v.q,n.md,s.y,u.q6,u.SC,u.v9],data:{animation:[d.j]}})}return m})()},48599:(M,C,e)=>{e.d(C,{d:()=>N});var t=e(17705),l=e(33484),r=e(71261),E=e(21894),d=e(6294),a=e(7439),f=e(60177),c=e(94227),v=e(58640),n=e(23934),s=e(8035),u=e(14725),b=e(33927);function D(p,R){if(1&p){const i=t.RV6();t.j41(0,"tm-comment-edit-form",2),t.bIt("modelChange",function(g){t.eBV(i);const m=t.XpG();return t.Njj(m.triggerModelChange("commentEditFormModel",g))})("closeCommentBoxEvent",function(){t.eBV(i);const g=t.XpG();return t.Njj(g.triggerCloseEditing())})("saveCommentEvent",function(){t.eBV(i);const g=t.XpG();return t.Njj(g.triggerSaveCommentEvent())}),t.k0s()}if(2&p){const i=t.XpG();t.Y8G("mode",i.mode)("model",i.model.commentEditFormModel)("isVisibilityOptionEnabled",i.isVisibilityOptionEnabled)("isDisabled",i.isDisabled)("shouldHideSavingButton",i.shouldHideSavingButton)("questionShowResponsesTo",i.questionShowResponsesTo)("response",i.response)("isFeedbackParticipantComment",i.isFeedbackParticipantComment)("shouldHideClosingButton",i.shouldHideClosingButton)}}function O(p,R){1&p&&(t.j41(0,"span",14),t.EFF(1," Comment by response giver. "),t.k0s())}function S(p,R){if(1&p&&(t.qex(0),t.nrm(1,"i",19),t.j41(2,"span",20),t.nI1(3,"formatDateDetail"),t.EFF(4),t.k0s(),t.bVm()),2&p){const i=t.XpG(3);t.R7$(2),t.Y8G("ngbTooltip",t.i5U(3,2,i.model.originalComment.lastEditedAt,i.model.timezone)),t.R7$(2),t.SpI("edited by ",i.model.lastEditorName?i.model.lastEditorName:i.model.originalComment.lastEditorEmail,"")}}function I(p,R){if(1&p&&(t.qex(0,15),t.j41(1,"span",16),t.EFF(2),t.k0s(),t.j41(3,"span",17),t.nI1(4,"formatDateDetail"),t.EFF(5),t.nI1(6,"formatDateBrief"),t.k0s(),t.DNE(7,S,5,5,"ng-container",18),t.bVm()),2&p){const i=t.XpG(2);t.R7$(2),t.SpI("",i.model.commentGiverName?i.model.commentGiverName:i.model.originalComment.commentGiver," commented at "),t.R7$(1),t.Y8G("ngbTooltip",t.i5U(4,4,i.model.originalComment.createdAt,i.model.timezone)),t.R7$(2),t.SpI(" ",t.i5U(6,7,i.model.originalComment.createdAt,i.model.timezone),""),t.R7$(2),t.Y8G("ngIf",i.model.originalComment.lastEditedAt&&i.model.originalComment.lastEditedAt!==i.model.originalComment.createdAt)}}function V(p,R){if(1&p){const i=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(i);const g=t.XpG(2);return t.Njj(g.triggerModelChange("isEditing",!0))}),t.nrm(1,"i",22),t.k0s()}if(2&p){const i=t.XpG(2);t.Y8G("disabled",i.isDisabled)}}function P(p,R){if(1&p){const i=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(i);const g=t.XpG(2);return t.Njj(g.triggerDeleteCommentEvent())}),t.nrm(1,"i",24),t.k0s()}if(2&p){const i=t.XpG(2);t.Y8G("disabled",i.isDisabled)}}function B(p,R){if(1&p&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.DNE(4,O,2,0,"span",7),t.DNE(5,I,8,10,"ng-container",8),t.nrm(6,"i",9),t.nI1(7,"commentVisibilityTypesJointName"),t.j41(8,"div",10),t.DNE(9,V,2,1,"button",11),t.DNE(10,P,2,1,"button",12),t.k0s()(),t.nrm(11,"div",13),t.nI1(12,"safeHtml"),t.k0s()()()),2&p){const i=t.XpG();t.R7$(4),t.Y8G("ngIf",i.isFeedbackParticipantComment),t.R7$(1),t.Y8G("ngIf",!i.isFeedbackParticipantComment),t.R7$(1),t.Mz_("ngbTooltip","This response comment is visible to ",t.bMT(7,6,i.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(i.CommentVisibilityControl.SHOW_COMMENT)),""),t.R7$(3),t.Y8G("ngIf",!i.shouldHideEditButton),t.R7$(1),t.Y8G("ngIf",!i.shouldHideDeleteButton),t.R7$(1),t.Y8G("innerHTML",t.bMT(12,8,i.model.originalComment.commentText),t.npT)}}let N=(()=>{class p{constructor(i,y){this.simpleModalService=i,this.commentService=y,this.CommentRowMode=l.z,this.CommentVisibilityControl=r.z,this.mode=l.z.ADD,this.isVisibilityOptionEnabled=!0,this.isDisabled=!1,this.shouldHideSavingButton=!1,this.shouldHideClosingButton=!1,this.shouldHideEditButton=!1,this.shouldHideDeleteButton=!1,this.isFeedbackParticipantComment=!1,this.questionShowResponsesTo=[],this.model={commentEditFormModel:{commentText:"",isUsingCustomVisibilities:!1,showCommentTo:[],showGiverNameTo:[]},isEditing:!1},this.modelChange=new t.bkB,this.saveCommentEvent=new t.bkB,this.deleteCommentEvent=new t.bkB,this.closeEditingEvent=new t.bkB,this.visibilityStateMachine=this.commentService.getNewVisibilityStateMachine(this.questionShowResponsesTo)}ngOnChanges(){this.model.originalComment&&(this.visibilityStateMachine=this.commentService.getNewVisibilityStateMachine(this.questionShowResponsesTo),this.model.originalComment.isVisibilityFollowingFeedbackQuestion?this.visibilityStateMachine.allowAllApplicableTypesToSee():this.visibilityStateMachine.applyVisibilitySettings({SHOW_COMMENT:this.model.originalComment.showCommentTo,SHOW_GIVER_NAME:this.model.originalComment.showCommentTo}))}triggerCloseEditing(){this.closeEditingEvent.emit()}triggerSaveCommentEvent(){this.saveCommentEvent.emit()}triggerDeleteCommentEvent(){this.simpleModalService.openConfirmationModal("Delete the comment permanently?",E.i.DANGER,"Are you sure you want to continue?").result.then(()=>{this.deleteCommentEvent.emit()},()=>{})}triggerModelChange(i,y){this.modelChange.emit({...this.model,[i]:y})}static#t=this.\u0275fac=function(y){return new(y||p)(t.rXU(d.r),t.rXU(a.r))};static#e=this.\u0275cmp=t.VBU({type:p,selectors:[["tm-comment-row"]],inputs:{mode:"mode",isVisibilityOptionEnabled:"isVisibilityOptionEnabled",isDisabled:"isDisabled",shouldHideSavingButton:"shouldHideSavingButton",shouldHideClosingButton:"shouldHideClosingButton",shouldHideEditButton:"shouldHideEditButton",shouldHideDeleteButton:"shouldHideDeleteButton",isFeedbackParticipantComment:"isFeedbackParticipantComment",response:"response",questionShowResponsesTo:"questionShowResponsesTo",model:"model"},outputs:{modelChange:"modelChange",saveCommentEvent:"saveCommentEvent",deleteCommentEvent:"deleteCommentEvent",closeEditingEvent:"closeEditingEvent"},features:[t.OA$],decls:2,vars:2,consts:[[3,"mode","model","isVisibilityOptionEnabled","isDisabled","shouldHideSavingButton","questionShowResponsesTo","response","isFeedbackParticipantComment","shouldHideClosingButton","modelChange","closeCommentBoxEvent","saveCommentEvent",4,"ngIf"],["class","card",4,"ngIf"],[3,"mode","model","isVisibilityOptionEnabled","isDisabled","shouldHideSavingButton","questionShowResponsesTo","response","isFeedbackParticipantComment","shouldHideClosingButton","modelChange","closeCommentBoxEvent","saveCommentEvent"],[1,"card"],[1,"card-body"],[1,"row","comment-row"],[1,"col-12"],["class","by-response-giver text-secondary",4,"ngIf"],["class","text-secondary",4,"ngIf"],["aria-hidden","true",1,"fa","fa-eye",3,"ngbTooltip"],[1,"float-end"],["type","button","class","btn-edit-comment btn btn-outline-primary btn-sm","ngbTooltip","Edit this comment","aria-label","Edit comment",3,"disabled","click",4,"ngIf"],["type","button","class","btn-delete-comment btn btn-outline-primary btn-sm btn-margin-left","ngbTooltip","Delete this comment","aria-label","Delete comment",3,"disabled","click",4,"ngIf"],[1,"comment-text","col-12",3,"innerHTML"],[1,"by-response-giver","text-secondary"],[1,"text-secondary"],[1,"comment-giver-name"],[1,"ngb-tooltip-class",2,"margin-right",".25rem",3,"ngbTooltip"],[4,"ngIf"],[1,"fas","fa-circle","dot-xs","align-middle",2,"margin-right",".25rem"],["id","last-editor-name",1,"ngb-tooltip-class",2,"margin-right",".25rem",3,"ngbTooltip"],["type","button","ngbTooltip","Edit this comment","aria-label","Edit comment",1,"btn-edit-comment","btn","btn-outline-primary","btn-sm",3,"disabled","click"],[1,"fas","fa-pencil-alt"],["type","button","ngbTooltip","Delete this comment","aria-label","Delete comment",1,"btn-delete-comment","btn","btn-outline-primary","btn-sm","btn-margin-left",3,"disabled","click"],[1,"fas","fa-trash"]],template:function(y,g){1&y&&(t.DNE(0,D,1,9,"tm-comment-edit-form",0),t.DNE(1,B,13,10,"div",1)),2&y&&(t.Y8G("ngIf",g.model.isEditing||g.mode===g.CommentRowMode.ADD),t.R7$(1),t.Y8G("ngIf",!g.model.isEditing&&g.mode===g.CommentRowMode.EDIT&&g.model.originalComment))},dependencies:[f.bT,c.md,v.f,n.L,s.$,u.C,b.IG],styles:[".dot-xs[_ngcontent-%COMP%]{font-size:.3em}"]})}return p})()},33484:(M,C,e)=>{e.d(C,{z:()=>t});var t=function(l){return l[l.ADD=0]="ADD",l[l.EDIT=1]="EDIT",l}(t||{})},40348:(M,C,e)=>{e.d(C,{r:()=>l});var t=e(17705);let l=(()=>{class r{transform(d,a){return{timezone:a,originalComment:d,commentGiverName:d.commentGiverName,lastEditorName:d.lastEditorName,commentEditFormModel:{commentText:d.commentText,isUsingCustomVisibilities:!d.isVisibilityFollowingFeedbackQuestion,showCommentTo:d.showCommentTo,showGiverNameTo:d.showGiverNameTo},isEditing:!1}}static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275pipe=t.EJ8({name:"commentToCommentRowModel",type:r,pure:!0})}return r})()},33927:(M,C,e)=>{e.d(C,{IG:()=>f,SC:()=>d,q6:()=>E,v9:()=>a});var t=e(40035),l=e(71261),r=e(17705);let E=(()=>{class c{transform(n){switch(n){case l.z.SHOW_COMMENT:return"Can see this comment";case l.z.SHOW_GIVER_NAME:return"Can see comment giver's name";default:return"Unknown"}}static#t=this.\u0275fac=function(s){return new(s||c)};static#e=this.\u0275pipe=r.EJ8({name:"commentVisibilityControlName",type:c,pure:!0})}return c})(),d=(()=>{class c{transform(n){switch(n){case t.CD.GIVER:return"Control what response giver(s) can view";case t.CD.RECIPIENT:return"Control what response recipient(s) can view";case t.CD.INSTRUCTORS:return"Control what instructors can view";case t.CD.GIVER_TEAM_MEMBERS:return"Control what team members of response giver can view";case t.CD.RECIPIENT_TEAM_MEMBERS:return"Control what team members of response recipient(s) can view";case t.CD.STUDENTS:return"Control what other students in this course can view";default:return"Unknown"}}static#t=this.\u0275fac=function(s){return new(s||c)};static#e=this.\u0275pipe=r.EJ8({name:"commentVisibilityTypeDescription",type:c,pure:!0})}return c})(),a=(()=>{class c{transform(n){switch(n){case t.CD.GIVER:return"Response Giver(s)";case t.CD.RECIPIENT:return"Response Recipient(s)";case t.CD.INSTRUCTORS:return"Instructors";case t.CD.GIVER_TEAM_MEMBERS:return"Response Giver's Team Members";case t.CD.RECIPIENT_TEAM_MEMBERS:return"Response Recipient's Team Members";case t.CD.STUDENTS:return"Other students in this course";default:return"Unknown"}}static#t=this.\u0275fac=function(s){return new(s||c)};static#e=this.\u0275pipe=r.EJ8({name:"commentVisibilityTypeName",type:c,pure:!0})}return c})(),f=(()=>{class c{transform(n){if(0===n.length)return"nobody";const s=new a;let u="";return n.forEach((b,D)=>{u+=s.transform(b).toLowerCase(),D!==n.length-1&&(u+=", and ")}),u}static#t=this.\u0275fac=function(s){return new(s||c)};static#e=this.\u0275pipe=r.EJ8({name:"commentVisibilityTypesJointName",type:c,pure:!0})}return c})()},76449:(M,C,e)=>{e.d(C,{k:()=>d});var t=e(60177),l=e(44661),r=e(17705);let E=(()=>{class a{static#t=this.\u0275fac=function(v){return new(v||a)};static#e=this.\u0275mod=r.$C({type:a});static#i=this.\u0275inj=r.G2t({imports:[t.MD,l.x]})}return a})(),d=(()=>{class a{static#t=this.\u0275fac=function(v){return new(v||a)};static#e=this.\u0275mod=r.$C({type:a});static#i=this.\u0275inj=r.G2t({imports:[t.MD,E]})}return a})()},64943:(M,C,e)=>{e.d(C,{y:()=>l});var t=e(17705);let l=(()=>{class r{transform(d){return Object.keys(d).map(a=>d[a])}static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275pipe=t.EJ8({name:"enumToArray",type:r,pure:!0})}return r})()},14725:(M,C,e)=>{e.d(C,{C:()=>r});var t=e(17705),l=e(50833);let r=(()=>{class E{constructor(a){this.timezoneService=a}transform(a,f){return this.timezoneService.formatToString(a,f,"D MMM h:mm A")}static#t=this.\u0275fac=function(f){return new(f||E)(t.rXU(l.D,16))};static#e=this.\u0275pipe=t.EJ8({name:"formatDateBrief",type:E,pure:!0})}return E})()},8035:(M,C,e)=>{e.d(C,{$:()=>r});var t=e(17705),l=e(345);let r=(()=>{class E{constructor(a){this.domSanitizer=a}transform(a){return this.domSanitizer.bypassSecurityTrustHtml(a)}static#t=this.\u0275fac=function(f){return new(f||E)(t.rXU(l.up,16))};static#e=this.\u0275pipe=t.EJ8({name:"safeHtml",type:E,pure:!0})}return E})()},7439:(M,C,e)=>{e.d(C,{r:()=>c});var t=e(40035),l=e(71261),r=e(40261);class E{constructor(n){this.visibility=new Map,this.applicability=new Set,this.reset(),this.startFromNewState(n)}reset(){this.visibility.clear();for(const n of Object.keys(t.CD)){const s=t.CD[n];this.visibility.set(s,new Map),this.applicability.add(s);for(const u of Object.keys(r.e)){const b=l.z[u];this.visibility.get(s).set(b,!1)}}}resetVisibility(){for(const n of Array.from(this.visibility.keys()))for(const s of Array.from(this.visibility.get(n).keys()))this.disallowToSee(n,s)}startFromNewState(n){this.reset(),n.includes(t.sk.RECIPIENT)||this.applicability.delete(t.CD.RECIPIENT),n.includes(t.sk.GIVER_TEAM_MEMBERS)||this.applicability.delete(t.CD.GIVER_TEAM_MEMBERS),n.includes(t.sk.RECIPIENT_TEAM_MEMBERS)||this.applicability.delete(t.CD.RECIPIENT_TEAM_MEMBERS),n.includes(t.sk.STUDENTS)||this.applicability.delete(t.CD.STUDENTS),n.includes(t.sk.INSTRUCTORS)||this.applicability.delete(t.CD.INSTRUCTORS)}applyVisibilitySettings(n){this.resetVisibility();for(const s of n.SHOW_COMMENT)this.allowToSee(s,l.z.SHOW_COMMENT);for(const s of n.SHOW_GIVER_NAME)this.allowToSee(s,l.z.SHOW_GIVER_NAME)}allowToSee(n,s){this.isVisibilityTypeApplicable(n)&&(this.visibility.get(n).set(s,!0),s===l.z.SHOW_GIVER_NAME)&&this.visibility.get(n).set(l.z.SHOW_COMMENT,!0)}allowAllApplicableTypesToSee(){for(const n of Object.keys(t.CD)){const s=t.CD[n];for(const u of Object.keys(r.e))this.allowToSee(s,l.z[u])}}disallowToSee(n,s){this.isVisibilityTypeApplicable(n)&&(this.visibility.get(n).set(s,!1),s===l.z.SHOW_COMMENT)&&this.visibility.get(n).set(l.z.SHOW_GIVER_NAME,!1)}isVisibilityTypeApplicable(n){return this.applicability.has(n)}isVisible(n,s){return this.visibility.get(n).get(s)}getVisibilityTypesUnderVisibilityControl(n){const s=[];for(const u of Object.keys(t.CD)){const b=t.CD[u];this.isVisible(b,n)&&s.push(b)}return s}}var d=e(8059),a=e(17705),f=e(16507);let c=(()=>{class v{constructor(s){this.httpRequestService=s}createComment(s,u,b,D={}){return this.httpRequestService.post(d.Ld.RESPONSE_COMMENT,{intent:b,responseid:u,...D},s)}updateComment(s,u,b,D={}){return this.httpRequestService.put(d.Ld.RESPONSE_COMMENT,{intent:b,responsecommentid:u.toString(),...D},s)}deleteComment(s,u,b={}){return this.httpRequestService.delete(d.Ld.RESPONSE_COMMENT,{intent:u,responsecommentid:s.toString(),...b})}getNewVisibilityStateMachine(s){return new E(s)}static#t=this.\u0275fac=function(u){return new(u||v)(a.KVO(f.R))};static#e=this.\u0275prov=a.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},71261:(M,C,e)=>{e.d(C,{z:()=>t});var t=function(l){return l.SHOW_COMMENT="SHOW_COMMENT",l.SHOW_GIVER_NAME="SHOW_GIVER_NAME",l}(t||{})}}]);