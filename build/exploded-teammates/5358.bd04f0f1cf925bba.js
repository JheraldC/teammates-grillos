(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[5358],{57286:(F,R,s)=>{"use strict";s.d(R,{y:()=>l});var t=s(17705);let l=(()=>{class I{constructor(){this.useBlueSpinner=!1,this.color="white"}static#t=this.\u0275fac=function(T){return new(T||I)};static#e=this.\u0275cmp=t.VBU({type:I,selectors:[["tm-ajax-loading"]],inputs:{useBlueSpinner:"useBlueSpinner",color:"color"},decls:2,vars:3,consts:[[1,"loading-container"],["role","status"]],template:function(T,o){1&T&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.k0s()),2&T&&(t.R7$(1),t.ZvI("spinner-border spinner-border-sm text-",o.useBlueSpinner?"primary":o.color,""))},styles:[".loading-container[_ngcontent-%COMP%]{display:inline;margin-right:10px}"]})}return I})()},8843:(F,R,s)=>{"use strict";s.d(R,{e:()=>I});var t=s(60177),l=s(17705);let I=(()=>{class c{static#t=this.\u0275fac=function(o){return new(o||c)};static#e=this.\u0275mod=l.$C({type:c});static#n=this.\u0275inj=l.G2t({imports:[t.MD]})}return c})()},72890:(F,R,s)=>{"use strict";s.d(R,{Y:()=>T});var t=s(17705),l=s(60177);function I(o,p){if(1&o){const b=t.RV6();t.j41(0,"div",2)(1,"p",3),t.EFF(2),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){t.eBV(b);const h=t.XpG();return t.Njj(h.retryEvent.emit())}),t.nrm(4,"i",5),t.EFF(5,"\xa0Retry"),t.k0s()()}if(2&o){const b=t.XpG();t.R7$(2),t.JRh(b.message),t.R7$(1),t.Y8G("disabled",b.retryButtonDisabled)}}function c(o,p){1&o&&t.SdG(0)}const y=["*"];let T=(()=>{class o{constructor(){this.message="",this.shouldShowRetry=!1,this.retryButtonDisabled=!1,this.retryEvent=new t.bkB}static#t=this.\u0275fac=function(m){return new(m||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry",retryButtonDisabled:"retryButtonDisabled"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:y,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(m,h){if(1&m&&(t.NAR(),t.DNE(0,I,6,2,"div",0),t.DNE(1,c,1,0,"ng-template",null,1,t.C5r)),2&m){const A=t.sdS(2);t.Y8G("ngIf",h.shouldShowRetry)("ngIfElse",A)}},dependencies:[l.bT]})}return o})()},34029:(F,R,s)=>{"use strict";s.d(R,{Z:()=>I});var t=s(60177),l=s(17705);let I=(()=>{class c{static#t=this.\u0275fac=function(o){return new(o||c)};static#e=this.\u0275mod=l.$C({type:c});static#n=this.\u0275inj=l.G2t({imports:[t.MD]})}return c})()},17422:(F,R,s)=>{"use strict";s.d(R,{a:()=>c});var t=s(17705),l=s(58240),I=s(94227);let c=(()=>{class y{constructor(o){this.progressBarService=o,this.progressPercentage=10}ngOnInit(){this.getProgress()}getProgress(){this.progressBarService.progressPercentage.subscribe(o=>{this.progressPercentage=o})}static#t=this.\u0275fac=function(p){return new(p||y)(t.rXU(l.W))};static#e=this.\u0275cmp=t.VBU({type:y,selectors:[["tm-progress-bar"]],decls:2,vars:3,consts:[["type","info","height","26px","showValue","true",3,"value","striped","animated"]],template:function(p,b){1&p&&(t.j41(0,"div"),t.nrm(1,"ngb-progressbar",0),t.k0s()),2&p&&(t.R7$(1),t.Y8G("value",b.progressPercentage)("striped",!0)("animated",!0))},dependencies:[I.EH],encapsulation:2})}return y})()},21894:(F,R,s)=>{"use strict";s.d(R,{i:()=>t});var t=function(l){return l[l.WARNING=0]="WARNING",l[l.DANGER=1]="DANGER",l[l.INFO=2]="INFO",l[l.NEUTRAL=3]="NEUTRAL",l[l.LOAD=4]="LOAD",l}(t||{})},7730:(F,R,s)=>{"use strict";s.d(R,{c:()=>D,u:()=>d});var t=s(17705),l=s(26195),I=s(16),c=s(60177),y=s(94227),T=s(99488);function o(r,E){1&r&&t.nrm(0,"i",13)}function p(r,E){1&r&&t.nrm(0,"i",14)}const b=function(r){return{"ngb-tooltip-class":r}};function m(r,E){if(1&r&&(t.j41(0,"button",7)(1,"span",8),t.EFF(2),t.k0s(),t.j41(3,"span",9),t.nrm(4,"i",10),t.DNE(5,o,1,0,"i",11),t.DNE(6,p,1,0,"i",12),t.k0s()()),2&r){const n=t.XpG().$implicit,g=t.XpG();t.R7$(1),t.Y8G("ngClass",t.eq3(5,b,n.headerToolTip))("ngbTooltip",n.headerToolTip),t.R7$(1),t.JRh(n.header),t.R7$(3),t.Y8G("ngIf",n.sortBy&&g.columnToSortBy===n.header&&g.sortOrder===g.SortOrder.DESC),t.R7$(1),t.Y8G("ngIf",n.sortBy&&g.columnToSortBy===n.header&&g.sortOrder===g.SortOrder.ASC)}}function h(r,E){if(1&r&&(t.j41(0,"span",15),t.EFF(1),t.k0s()),2&r){const n=t.XpG().$implicit;t.Y8G("ngbTooltip",n.headerToolTip)("ngClass",t.eq3(3,b,n.headerToolTip)),t.R7$(1),t.JRh(n.header)}}const A=function(r){return{"sortable-header":r}};function u(r,E){if(1&r){const n=t.RV6();t.j41(0,"th",4),t.bIt("click",function(){const N=t.eBV(n).$implicit,$=t.XpG();return t.Njj(N.sortBy&&$.onClickHeader(N.header))}),t.DNE(1,m,7,7,"button",5),t.DNE(2,h,2,5,"span",6),t.k0s()}if(2&r){const n=E.$implicit,g=t.XpG();t.HbH(null==n?null:n.headerClass),t.Y8G("ngClass",t.eq3(8,A,n.sortBy))("ngStyle",g.getAlignment(n)),t.BMQ("aria-sort",g.getAriaSort(n.header)),t.R7$(1),t.Y8G("ngIf",n.sortBy),t.R7$(1),t.Y8G("ngIf",!n.sortBy)}}function O(r,E){if(1&r&&t.nrm(0,"ndc-dynamic",19),2&r){const n=t.XpG().$implicit,g=t.XpG().index;t.Y8G("ngComponentOutlet",n.customComponent.component)("ndcDynamicInputs",n.customComponent.componentData(g))}}function x(r,E){if(1&r&&(t.qex(0),t.nrm(1,"span",20),t.bVm()),2&r){const n=t.XpG().$implicit;t.R7$(1),t.Y8G("innerHTML",n.displayValue,t.npT)}}function e(r,E){if(1&r&&(t.qex(0),t.EFF(1),t.bVm()),2&r){const n=t.XpG().$implicit;t.R7$(1),t.JRh(n.value)}}function P(r,E){if(1&r&&(t.j41(0,"td"),t.DNE(1,O,1,2,"ndc-dynamic",17),t.DNE(2,x,2,1,"ng-container",18),t.DNE(3,e,2,1,"ng-container",18),t.k0s()),2&r){const n=E.$implicit,g=t.XpG(2);t.Aen(g.getStyle(n)),t.R7$(1),t.Y8G("ngIf",n.customComponent),t.R7$(1),t.Y8G("ngIf",!n.customComponent&&n.displayValue),t.R7$(1),t.Y8G("ngIf",!n.customComponent&&!n.displayValue)}}function G(r,E){if(1&r&&(t.j41(0,"tr"),t.DNE(1,P,4,5,"td",16),t.k0s()),2&r){const n=E.$implicit;t.R7$(1),t.Y8G("ngForOf",n)}}var d=function(r){return r[r.BLUE=0]="BLUE",r[r.WHITE=1]="WHITE",r[r.OTHERS=2]="OTHERS",r}(d||{});let D=(()=>{class r{constructor(n){this.tableComparatorService=n,this.SortOrder=l.x,this.tableId="",this.headerColorScheme=d.BLUE,this.customHeaderStyle="",this.columns=[],this.rows=[],this.initialSortBy=l.g.NONE,this.sortOrder=l.x.ASC,this.sortEvent=new t.bkB,this.columnToSortBy="",this.tableRows=[],this.setMainTableStyle=!0}ngOnInit(){this.tableRows=this.rows,this.initialSort(),this.setMainTableStyle=this.headerColorScheme===d.BLUE}ngOnChanges(){this.tableRows=this.rows,this.sortRows()}onClickHeader(n){this.sortOrder=this.columnToSortBy===n&&this.sortOrder===l.x.ASC?l.x.DESC:l.x.ASC,this.columnToSortBy=n,this.sortRows()}getAriaSort(n){return n!==this.columnToSortBy?"none":this.sortOrder===l.x.ASC?"ascending":"descending"}sortRows(){if(!this.columnToSortBy)return;const n=this.columns.findIndex(L=>L.header===this.columnToSortBy);if(n<0)return;const g=this.columns[n].sortBy;g&&(this.sortEvent.emit({sortBy:g,sortOrder:this.sortOrder}),this.tableRows.sort((L,N)=>this.tableComparatorService.compare(g,this.sortOrder,String(L[n].value),String(N[n].value))))}initialSort(){const n=this.columns.findIndex(g=>g.sortBy===this.initialSortBy);n<0||(this.columnToSortBy=this.columns[n].header,this.sortRows())}getStyle(n){return n.style}getAlignment(n){return{"text-align":`${n?.alignment||"start"}`}}static#t=this.\u0275fac=function(g){return new(g||r)(t.rXU(I.C))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["tm-sortable-table"]],inputs:{tableId:"tableId",headerColorScheme:"headerColorScheme",customHeaderStyle:"customHeaderStyle",columns:"columns",rows:"rows",initialSortBy:"initialSortBy",sortOrder:"sortOrder"},outputs:{sortEvent:"sortEvent"},features:[t.OA$],decls:6,vars:3,consts:[[1,"table","table-bordered","table-striped"],[3,"ngClass"],[3,"ngClass","class","ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"ngClass","ngStyle","click"],["class","d-lg-flex align-items-center gap-lg-1 d-inline ",4,"ngIf"],["container","body",3,"ngbTooltip","ngClass",4,"ngIf"],[1,"d-lg-flex","align-items-center","gap-lg-1","d-inline"],["container","body",3,"ngClass","ngbTooltip"],["aria-hidden","true",1,"fa-stack"],[1,"fas","fa-sort"],["class","fas fa-sort-down",4,"ngIf"],["class","fas fa-sort-up",4,"ngIf"],[1,"fas","fa-sort-down"],[1,"fas","fa-sort-up"],["container","body",3,"ngbTooltip","ngClass"],[3,"style",4,"ngFor","ngForOf"],[3,"ngComponentOutlet","ndcDynamicInputs",4,"ngIf"],[4,"ngIf"],[3,"ngComponentOutlet","ndcDynamicInputs"],[3,"innerHTML"]],template:function(g,L){1&g&&(t.j41(0,"table",0)(1,"thead")(2,"tr",1),t.DNE(3,u,3,10,"th",2),t.k0s()(),t.j41(4,"tbody"),t.DNE(5,G,2,1,"tr",3),t.k0s()()),2&g&&(t.R7$(2),t.Y8G("ngClass",L.setMainTableStyle?"bg-primary text-white":L.customHeaderStyle),t.R7$(1),t.Y8G("ngForOf",L.columns),t.R7$(2),t.Y8G("ngForOf",L.tableRows))},dependencies:[c.YU,c.OI,c.Sq,c.bT,c.B3,y.md,T.Bf,T.ar,T.dE],styles:[".sortable-header[_ngcontent-%COMP%]{cursor:pointer}.sortable-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.3em}.sortable-header[_ngcontent-%COMP%]   .fa-stack[_ngcontent-%COMP%]{width:20%}.sortable-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;text-align:left;width:100%;font:inherit;cursor:inherit}th[_ngcontent-%COMP%]{vertical-align:middle}"]})}return r})()},53200:(F,R,s)=>{"use strict";s.d(R,{h:()=>I});var t=s(40035),l=s(17705);let I=(()=>{class c{transform(T){switch(T){case t.vD.INSTRUCTOR_PERMISSION_ROLE_COOWNER:return"Co-owner";case t.vD.INSTRUCTOR_PERMISSION_ROLE_MANAGER:return"Manager";case t.vD.INSTRUCTOR_PERMISSION_ROLE_OBSERVER:return"Observer";case t.vD.INSTRUCTOR_PERMISSION_ROLE_TUTOR:return"Tutor";default:return"Custom"}}static#t=this.\u0275fac=function(o){return new(o||c)};static#e=this.\u0275pipe=l.EJ8({name:"instructorRoleName",type:c,pure:!0})}return c})()},58013:(F,R,s)=>{"use strict";s.r(R),s.d(R,{InstructorCourseDetailsPageModule:()=>ut});var t=s(60177),l=s(82646),I=s(2578),c=s(33669),y=s(79470),T=s(59030),o=s(57119),b=s(70274),m=s(77048),h=s(70980),A=s(94089),u=s(26195),O=s(21894),x=s(78613),e=s(17705),P=s(30715),G=s(58240),d=s(89734),D=s(94227),r=s(6294),E=s(86978),n=s(21036),g=s(16),L=s(76037),N=s(57645),$=s(57286),k=s(72890),Y=s(53992),W=s(53200);function X(v,B){if(1&v&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"instructorRoleName"),e.k0s()),2&v){const i=B.$implicit;e.R7$(1),e.E5c(" ",e.bMT(2,3,i.role),": ",i.name," (",i.email,") ")}}function K(v,B){1&v&&e.nrm(0,"i",27)}function V(v,B){1&v&&e.nrm(0,"tm-ajax-loading")}function H(v,B){1&v&&e.nrm(0,"i",28)}function J(v,B){1&v&&e.nrm(0,"tm-ajax-loading")}function z(v,B){if(1&v){const i=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"button",20),e.bIt("click",function(){e.eBV(i);const f=e.XpG(2);return e.Njj(f.openRemindStudentModal())}),e.nrm(3,"i",21),e.EFF(4," Remind Students to Join "),e.k0s(),e.j41(5,"button",22),e.bIt("click",function(){e.eBV(i);const f=e.XpG(2);return e.Njj(f.downloadAllStudentsFromCourse(f.courseDetails.course.courseId))}),e.DNE(6,K,1,0,"i",23),e.DNE(7,V,1,0,"tm-ajax-loading",24),e.EFF(8," Download Student List "),e.k0s(),e.j41(9,"button",25),e.bIt("click",function(){e.eBV(i);const f=e.XpG(2);return e.Njj(f.openDeleteAllStudentsConfirmationModal())}),e.DNE(10,H,1,0,"i",26),e.DNE(11,J,1,0,"tm-ajax-loading",24),e.EFF(12," Delete All Students "),e.k0s()()()}if(2&v){const i=e.XpG(2);e.R7$(6),e.Y8G("ngIf",!i.isLoadingCsv),e.R7$(1),e.Y8G("ngIf",i.isLoadingCsv),e.R7$(3),e.Y8G("ngIf",!i.isDeleting),e.R7$(1),e.Y8G("ngIf",i.isDeleting)}}const Z=function(v){return{courseid:v}};function Q(v,B){if(1&v&&(e.j41(0,"div",29),e.nrm(1,"i",30),e.EFF(2," There are no students in this course. Click "),e.j41(3,"a",31),e.EFF(4,"here"),e.k0s(),e.EFF(5," to enroll students. "),e.k0s()),2&v){const i=e.XpG(2);e.R7$(3),e.Y8G("queryParams",e.eq3(1,Z,i.courseDetails.course.courseId))}}function q(v,B){if(1&v){const i=e.RV6();e.j41(0,"div",32)(1,"tm-student-list",33),e.bIt("removeStudentFromCourseEvent",function(f){e.eBV(i);const _=e.XpG(2);return e.Njj(_.removeStudentFromCourse(f))}),e.k0s()()}if(2&v){const i=e.XpG(2);e.R7$(1),e.Y8G("courseId",i.courseDetails.course.courseId)("students",i.students)("useGrayHeading",!0)("enableRemindButton",!0)("tableSortBy",i.studentSortBy)("tableSortOrder",i.studentSortOrder)}}function tt(v,B){if(1&v&&(e.j41(0,"div")(1,"h1"),e.EFF(2,"Course Details"),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7,"Course ID:"),e.k0s(),e.j41(8,"span",6),e.EFF(9),e.k0s()(),e.j41(10,"div",4)(11,"label",5),e.EFF(12,"Course name:"),e.k0s(),e.j41(13,"span",7),e.EFF(14),e.k0s()(),e.j41(15,"div",4)(16,"label",5),e.EFF(17,"Course institute:"),e.k0s(),e.j41(18,"span",8),e.EFF(19),e.k0s()(),e.j41(20,"div",4)(21,"label",5),e.EFF(22,"Sections:"),e.k0s(),e.j41(23,"span",9),e.EFF(24),e.k0s()(),e.j41(25,"div",4)(26,"label",5),e.EFF(27,"Teams:"),e.k0s(),e.j41(28,"span",10),e.EFF(29),e.k0s()(),e.j41(30,"div",4)(31,"label",5),e.EFF(32,"Total students:"),e.k0s(),e.j41(33,"span",11),e.EFF(34),e.k0s()(),e.j41(35,"div",4)(36,"label",12),e.EFF(37,"Instructors:"),e.k0s(),e.j41(38,"div",13),e.DNE(39,X,3,5,"div",14),e.k0s()(),e.DNE(40,z,13,4,"div",15),e.k0s()(),e.DNE(41,Q,6,3,"div",16),e.DNE(42,q,2,6,"ng-template",null,17,e.C5r),e.k0s()),2&v){const i=e.sdS(43),a=e.XpG();e.R7$(9),e.SpI(" ",a.courseDetails.course.courseId," "),e.R7$(5),e.SpI(" ",a.courseDetails.course.courseName," "),e.R7$(5),e.SpI(" ",a.courseDetails.course.institute," "),e.R7$(5),e.SpI(" ",a.courseDetails.stats.numOfSections," "),e.R7$(5),e.SpI(" ",a.courseDetails.stats.numOfTeams," "),e.R7$(5),e.SpI(" ",a.courseDetails.stats.numOfStudents," "),e.R7$(5),e.Y8G("ngForOf",a.instructors),e.R7$(1),e.Y8G("ngIf",a.students.length>0),e.R7$(1),e.Y8G("ngIf",0===a.students.length)("ngIfElse",i)}}let et=(()=>{class v{constructor(i,a,f,_,S,C,M,U,w){this.route=i,this.statusMessageService=a,this.progressBarService=f,this.courseService=_,this.ngbModal=S,this.simpleModalService=C,this.studentService=M,this.instructorService=U,this.tableComparatorService=w,this.courseDetails={course:{courseId:"",courseName:"",institute:"",timeZone:"",creationTimestamp:0,deletionTimestamp:0},stats:{numOfSections:0,numOfTeams:0,numOfStudents:0}},this.instructors=[],this.students=[],this.isLoadingCsv=!1,this.isStudentsLoading=!1,this.sectionsLoaded=0,this.hasLoadingStudentsFailed=!1,this.isDeleting=!1,this.studentSortBy=u.g.NONE,this.studentSortOrder=u.x.ASC}ngOnInit(){this.route.queryParams.subscribe(i=>{this.loadCourseDetails(i.courseid)})}loadCourseDetails(i){this.loadCourseName(i),this.loadInstructors(i),this.loadStudents(i)}loadCourseName(i){this.courseService.getCourseAsInstructor(i).subscribe({next:a=>{this.courseDetails.course=a},error:a=>{this.statusMessageService.showErrorToast(a.error.message)}})}loadInstructors(i){this.instructorService.loadInstructors({courseId:i,intent:A.JD.FULL_DETAIL}).subscribe({next:a=>{this.instructors=a.instructors},error:a=>{this.statusMessageService.showErrorToast(a.error.message)}})}loadStudents(i){this.hasLoadingStudentsFailed=!1,this.isStudentsLoading=!0,this.studentService.getStudentsFromCourse({courseId:i}).subscribe({next:a=>{this.students=[],this.sectionsLoaded=0;const f=a.students.reduce((S,C)=>{const M=C.sectionName;return(S[M]=S[M]||[]).push(C),S},{}),_=Object.keys(f).length;this.instructorService.loadInstructorPrivilege({courseId:i}).subscribe({next:S=>{const C=S.privileges.courseLevel;Object.keys(f).forEach(M=>{const U=S.privileges.sectionLevel[M]||C,j=f[M].map(dt=>({student:dt,isAllowedToViewStudentInSection:U.canViewStudentInSections,isAllowedToModifyStudent:U.canModifyStudent}));this.students.push(...j),this.students.sort(this.sortStudentBy(u.g.NONE,u.x.ASC)),this.sectionsLoaded+=1,this.sectionsLoaded===_&&(this.isStudentsLoading=!1)})},error:S=>{this.isStudentsLoading=!1,this.hasLoadingStudentsFailed=!0,this.statusMessageService.showErrorToast(S.error.message)}}),_||(this.isStudentsLoading=!1),this.courseDetails.stats=this.courseService.calculateCourseStatistics(a.students)},error:a=>{this.isStudentsLoading=!1,this.hasLoadingStudentsFailed=!0,this.statusMessageService.showErrorToast(a.error.message)}})}openModal(i){this.ngbModal.open(i)}openRemindStudentModal(){this.simpleModalService.openConfirmationModal("Sending join requests?",O.i.INFO,`Usually, there is no need to use this feature because\n      TEAMMATES sends an automatic invite to students at the opening time of each session.\n      Send a join request to all yet-to-join students in ${this.courseDetails.course.courseId} anyway?`).result.then(()=>{this.remindAllStudentsFromCourse(this.courseDetails.course.courseId)},()=>{})}openDeleteAllStudentsConfirmationModal(){this.simpleModalService.openConfirmationModal("Delete all students?",O.i.DANGER,`Are you sure you want to remove all students from the course \n        ${this.courseDetails.course.courseId}? This will also delete their feedback responses and comments.`).result.then(()=>{this.deleteAllStudentsFromCourse(this.courseDetails.course.courseId)},()=>{})}deleteAllStudentsFromCourse(i){this.isDeleting=!0;const _=Math.ceil(this.courseDetails.stats.numOfStudents/100);let S=0,C=!1,M=!1;const w=this.simpleModalService.openLoadingModal("Delete Progress",O.i.LOAD,`Deleting all students from the course ${this.courseDetails.course.courseId}, \n        this may take a while...`);w.result.then(()=>{this.isDeleting=!1,S===_&&this.statusMessageService.showSuccessToast("All the students have been removed from the course"),!M&&S<_&&(C=!0,this.statusMessageService.showWarningToast("Delete aborted. Note that some students may not have been deleted."))},()=>{}),function p(v,B,i,a,f){let _,S;function*C(){for(let M=S;!B||B(M);M=i(M))yield _(M)}return 1===arguments.length?({initialState:S,condition:B,iterate:i,resultSelector:_=c.D,scheduler:f}=v):(S=v,!a||(0,y.m)(a)?(_=c.D,f=a):_=a),(0,T.v)(f?()=>(0,o.S)(C(),f):C)}({initialState:0,condition:j=>j<_,iterate:j=>j+1}).pipe((0,b.H)(()=>this.studentService.batchDeleteStudentsFromCourse({courseId:i,limit:100})),(0,m.v)(()=>!C),(0,h.j)(()=>{w.close()})).subscribe({next:()=>{S+=1;const j=Math.round(100*S/_);this.progressBarService.updateProgress(j)},complete:()=>{C?this.loadStudents(i):(this.students=[],this.courseDetails.stats={numOfStudents:0,numOfSections:0,numOfTeams:0})},error:j=>{M=!0,C||this.statusMessageService.showErrorToast(j.error.message)}})}downloadAllStudentsFromCourse(i){this.isLoadingCsv=!0;const a=`${i.concat("_studentList")}.csv`;let f;this.studentService.loadStudentListAsCsv({courseId:i}).pipe((0,h.j)(()=>{this.isLoadingCsv=!1})).subscribe({next:_=>{f=new Blob([_],{type:"text/csv"}),(0,I.saveAs)(f,a)},error:_=>{this.statusMessageService.showErrorToast(_.error.message)}})}remindAllStudentsFromCourse(i){this.courseService.remindUnregisteredStudentsForJoin(i).subscribe({next:a=>{this.statusMessageService.showSuccessToast(a.message)},error:a=>{this.statusMessageService.showErrorToast(a.error.message)}})}getTableData(i){const a=[];let f=!1,_="";const S=i.split("");for(let C=0;C<S.length;C+=1){if('"'===S[C]){if(!(C+1<S.length&&'"'===S[C+1])){f=!f;continue}C+=1}","===S[C]?f?_=_.concat(S[C]):(a.push(_),_=""):_=_.concat(S[C])}return a.push(_.trim()),a}removeStudentFromCourse(i){this.courseService.removeStudentFromCourse(this.courseDetails.course.courseId,i).subscribe({next:()=>{this.students=this.students.filter(f=>f.student.email!==i);const a=this.students.map(f=>f.student);this.courseDetails.stats=this.courseService.calculateCourseStatistics(a),this.statusMessageService.showSuccessToast(`Student is successfully deleted from course "${this.courseDetails.course.courseId}"`)},error:a=>{this.statusMessageService.showErrorToast(a.error.message)}})}sortStudentList(i){this.studentSortBy=i,this.studentSortOrder=this.studentSortOrder===u.x.DESC?u.x.ASC:u.x.DESC,this.students.sort(this.sortStudentBy(i,this.studentSortOrder))}sortStudentBy(i,a){const f=new x.K;return i===u.g.NONE?(_,S)=>this.tableComparatorService.compare(u.g.SECTION_NAME,a,_.student.sectionName,S.student.sectionName)||this.tableComparatorService.compare(u.g.TEAM_NAME,a,_.student.teamName,S.student.teamName)||this.tableComparatorService.compare(u.g.RESPONDENT_NAME,a,_.student.name,S.student.name):(_,S)=>{let C,M;switch(i){case u.g.SECTION_NAME:C=_.student.sectionName,M=S.student.sectionName;break;case u.g.RESPONDENT_NAME:C=_.student.name,M=S.student.name;break;case u.g.TEAM_NAME:C=_.student.teamName,M=S.student.teamName;break;case u.g.RESPONDENT_EMAIL:C=_.student.email,M=S.student.email;break;case u.g.JOIN_STATUS:C=f.transform(_.student.joinState),M=f.transform(S.student.joinState);break;default:C="",M=""}return this.tableComparatorService.compare(i,a,C,M)}}static#t=this.\u0275fac=function(a){return new(a||v)(e.rXU(l.nX),e.rXU(P.x),e.rXU(G.W),e.rXU(d.f),e.rXU(D.Bq),e.rXU(r.r),e.rXU(E.b),e.rXU(n.p),e.rXU(g.C))};static#e=this.\u0275cmp=e.VBU({type:v,selectors:[["tm-instructor-course-details-page"]],decls:2,vars:3,consts:[[3,"shouldShowRetry","message","retryEvent"],[4,"tmIsLoading"],[1,"card"],[1,"card-body","fill-plain"],[1,"row"],[1,"col-sm-2","text-sm-end"],["id","course-id",1,"col-sm-9","text-sm-start"],["id","course-name",1,"col-sm-9","text-sm-start"],["id","course-institute",1,"col-sm-9","text-sm-start"],["id","num-sections",1,"col-sm-9","text-sm-start"],["id","num-teams",1,"col-sm-9","text-sm-start"],["id","num-students",1,"col-sm-9","text-sm-start"],[1,"col-sm-2","text-sm-end","control-label"],["id","instructors",1,"col-sm-9","text-sm-start"],[4,"ngFor","ngForOf"],["style","margin-top: 10px;",4,"ngIf"],["class","alert alert-warning",4,"ngIf","ngIfElse"],["studentListTable",""],[2,"margin-top","10px"],[1,"text-center"],["id","btn-remind-all","type","button","value","Remind Students to Join",1,"btn","btn-primary",3,"click"],[1,"fa","fa-envelope"],["id","btn-download","type","button",1,"btn","btn-primary","btn-margin-left",3,"click"],["class","fa fa-download",4,"ngIf"],[4,"ngIf"],["id","btn-delete-all","type","button","value","Delete All Students",1,"btn","btn-danger","btn-margin-left",3,"click"],["class","fa fa-trash",4,"ngIf"],[1,"fa","fa-download"],[1,"fa","fa-trash"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation-circle","text-muted"],["tmRouterLink","/web/instructor/courses/enroll",3,"queryParams"],["id","student-list",1,"card-body","p-0","student-table-margin","card","border"],[3,"courseId","students","useGrayHeading","enableRemindButton","tableSortBy","tableSortOrder","removeStudentFromCourseEvent"]],template:function(a,f){1&a&&(e.j41(0,"tm-loading-retry",0),e.bIt("retryEvent",function(){return f.loadStudents(f.courseDetails.course.courseId)}),e.DNE(1,tt,44,10,"div",1),e.k0s()),2&a&&(e.Y8G("shouldShowRetry",f.hasLoadingStudentsFailed)("message","Failed to load students"),e.R7$(1),e.Y8G("tmIsLoading",f.isStudentsLoading))},dependencies:[t.Sq,t.bT,L.X,N.n,$.y,k.Y,Y.y,W.h],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:.5rem}.fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}button[_ngcontent-%COMP%]{margin-right:5px}label[_ngcontent-%COMP%]{font-weight:700}.btn-link[_ngcontent-%COMP%]:hover{cursor:pointer}.student-table-margin[_ngcontent-%COMP%]{margin-top:50px}@media (width <= 768px){#btn-remind-all[_ngcontent-%COMP%], #btn-download[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})}return v})();var nt=s(85385),st=s(8843),ot=s(34029),rt=s(84309),it=s(23071),at=s(44661),lt=s(48381);const ct=[{path:"",component:et}];let ut=(()=>{class v{static#t=this.\u0275fac=function(a){return new(a||v)};static#e=this.\u0275mod=e.$C({type:v});static#n=this.\u0275inj=e.G2t({imports:[t.MD,at.x,l.iI.forChild(ct),it.Y,st.e,rt.y,nt.D,ot.Z,lt.d]})}return v})()},21036:(F,R,s)=>{"use strict";s.d(R,{p:()=>c});var t=s(8059),l=s(17705),I=s(16507);let c=(()=>{class y{constructor(o){this.httpRequestService=o}loadInstructors(o){const p={courseid:o.courseId};return o.intent&&(p.intent=o.intent),this.httpRequestService.get(t.Ld.INSTRUCTORS,p)}getInstructor(o){const p={courseid:o.courseId,intent:o.intent};return o.feedbackSessionName&&(p.fsname=o.feedbackSessionName),o.key&&(p.key=o.key),o.moderatedPerson&&(p.moderatedperson=o.moderatedPerson),o.previewAs&&(p.previewas=o.previewAs),this.httpRequestService.get(t.Ld.INSTRUCTOR,p)}createInstructor(o){return this.httpRequestService.post(t.Ld.INSTRUCTOR,{courseid:o.courseId},o.requestBody)}updateInstructor(o){return this.httpRequestService.put(t.Ld.INSTRUCTOR,{courseid:o.courseId},o.requestBody)}deleteInstructor(o){const p={courseid:o.courseId};return o.instructorEmail&&(p.instructoremail=o.instructorEmail),o.instructorId&&(p.instructorid=o.instructorId),this.httpRequestService.delete(t.Ld.INSTRUCTOR,p)}loadInstructorPrivilege(o){const p={courseid:o.courseId};return o.instructorEmail&&(p.instructoremail=o.instructorEmail),o.instructorId&&(p.instructorid=o.instructorId),this.httpRequestService.get(t.Ld.INSTRUCTOR_PRIVILEGE,p)}updateInstructorPrivilege(o){return this.httpRequestService.put(t.Ld.INSTRUCTOR_PRIVILEGE,{courseid:o.courseId,instructoremail:o.instructorEmail},o.requestBody)}regenerateInstructorKey(o,p){return this.httpRequestService.post(t.Ld.INSTRUCTOR_KEY,{courseid:o,instructoremail:p})}static#t=this.\u0275fac=function(p){return new(p||y)(l.KVO(I.R))};static#e=this.\u0275prov=l.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},58240:(F,R,s)=>{"use strict";s.d(R,{W:()=>I});var t=s(21413),l=s(17705);let I=(()=>{class c{constructor(){this.progressPercentage=new t.B}updateProgress(T){this.progressPercentage.next(T)}static#t=this.\u0275fac=function(o){return new(o||c)};static#e=this.\u0275prov=l.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},6294:(F,R,s)=>{"use strict";s.d(R,{r:()=>G});var t=s(17705),l=s(21894),I=s(94227),c=s(60177),y=s(17422);function T(d,D){1&d&&t.nrm(0,"i",15)}function o(d,D){1&d&&t.nrm(0,"i",16)}function p(d,D){1&d&&t.nrm(0,"i",17)}function b(d,D){1&d&&t.eu8(0)}function m(d,D){if(1&d&&(t.j41(0,"div"),t.DNE(1,b,1,0,"ng-container",18),t.k0s()),2&d){const r=t.XpG();t.R7$(1),t.Y8G("ngTemplateOutlet",r.content)}}function h(d,D){if(1&d&&t.nrm(0,"div",19),2&d){const r=t.XpG();t.Y8G("innerHTML",r.content,t.npT)}}function A(d,D){1&d&&(t.j41(0,"div",20),t.nrm(1,"tm-progress-bar"),t.k0s())}function u(d,D){if(1&d){const r=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.activeModal.dismiss())}),t.EFF(1),t.k0s()}if(2&d){const r=t.XpG();t.R7$(1),t.SpI(" ",r.cancelMessage," ")}}const O=function(d){return{"display-none":d}},x=function(d,D,r,E){return{"bg-danger":d,"bg-warning":D,"bg-info":r,"bg-white":E}},e=function(d,D,r,E){return{"btn-danger":d,"btn-warning":D,"btn-info":r,"btn-primary":E}};let P=(()=>{class d{get isTemplate(){return this.content instanceof t.C4Q}constructor(r){this.activeModal=r,this.SimpleModalType=l.i,this.header="",this.content="",this.type=l.i.NEUTRAL,this.isInformationOnly=!1,this.confirmMessage="Yes",this.cancelMessage="No, cancel the operation"}static#t=this.\u0275fac=function(E){return new(E||d)(t.rXU(I.Lw))};static#e=this.\u0275cmp=t.VBU({type:d,selectors:[["tm-confirmation-modal"]],inputs:{header:"header",content:"content",type:"type",isInformationOnly:"isInformationOnly",confirmMessage:"confirmMessage",cancelMessage:"cancelMessage"},decls:17,vars:24,consts:[[1,"transparent-overlay",3,"ngClass"],[1,"modal-header",3,"ngClass"],[1,"modal-title"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-info-circle",4,"ngIf"],[1,"margin-left-5px",3,"innerHTML"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","progress-bar-container",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-light modal-btn-cancel",3,"click",4,"ngIf"],["type","button",1,"btn","modal-btn-ok","z-index-1",3,"ngClass","click"],[1,"fas","fa-times-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-info-circle"],[4,"ngTemplateOutlet"],[3,"innerHTML"],[1,"progress-bar-container"],["type","button",1,"btn","btn-light","modal-btn-cancel",3,"click"]],template:function(E,n){1&E&&(t.nrm(0,"div",0),t.j41(1,"div",1)(2,"div")(3,"h5",2),t.DNE(4,T,1,0,"i",3),t.DNE(5,o,1,0,"i",4),t.DNE(6,p,1,0,"i",5),t.nrm(7,"span",6),t.k0s()(),t.j41(8,"button",7),t.bIt("click",function(){return n.type===n.SimpleModalType.LOAD?n.activeModal.close():n.activeModal.dismiss()}),t.k0s()(),t.j41(9,"div",8),t.DNE(10,m,2,1,"div",9),t.DNE(11,h,1,1,"div",10),t.DNE(12,A,2,0,"div",11),t.k0s(),t.j41(13,"div",12),t.DNE(14,u,2,1,"button",13),t.j41(15,"button",14),t.bIt("click",function(){return n.activeModal.close()}),t.EFF(16),t.k0s()()),2&E&&(t.Y8G("ngClass",t.eq3(12,O,n.type!==n.SimpleModalType.LOAD)),t.R7$(1),t.Y8G("ngClass",t.ziG(14,x,n.type===n.SimpleModalType.DANGER,n.type===n.SimpleModalType.WARNING,n.type===n.SimpleModalType.INFO||n.type===n.SimpleModalType.LOAD,n.type===n.SimpleModalType.NEUTRAL)),t.R7$(3),t.Y8G("ngIf",n.type===n.SimpleModalType.DANGER),t.R7$(1),t.Y8G("ngIf",n.type===n.SimpleModalType.WARNING),t.R7$(1),t.Y8G("ngIf",n.type===n.SimpleModalType.INFO||n.type===n.SimpleModalType.LOAD),t.R7$(1),t.Y8G("innerHTML",n.header,t.npT),t.R7$(3),t.Y8G("ngIf",n.isTemplate),t.R7$(1),t.Y8G("ngIf",!n.isTemplate),t.R7$(1),t.Y8G("ngIf",n.type===n.SimpleModalType.LOAD),t.R7$(2),t.Y8G("ngIf",!n.isInformationOnly),t.R7$(1),t.Y8G("ngClass",t.ziG(19,e,n.type===n.SimpleModalType.DANGER||n.type===n.SimpleModalType.LOAD,n.type===n.SimpleModalType.WARNING,n.type===n.SimpleModalType.INFO,n.type===n.SimpleModalType.NEUTRAL)),t.R7$(1),t.JRh(n.confirmMessage))},dependencies:[c.YU,c.bT,c.T3,y.a],styles:[".margin-left-5px[_ngcontent-%COMP%]{margin-left:5px}.progress-bar-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:2px}.transparent-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;visibility:false;z-index:0}.display-none[_ngcontent-%COMP%]{display:none}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]})}return d})(),G=(()=>{class d{constructor(r){this.ngbModal=r}open(r,E,n,g,L){const N=this.ngbModal.open(P,L);return N.componentInstance.header=r,N.componentInstance.content=n,N.componentInstance.type=E,g&&(Object.entries(g).forEach(([$,k])=>{N.componentInstance[$]=k}),g.onClosed&&(N.closed.subscribe(()=>{g.onClosed()}),N.dismissed.subscribe(()=>{g.onClosed()}))),N}openConfirmationModal(r,E,n,g,L){const N={isInformationOnly:!1,confirmMessage:"Yes",cancelMessage:"No, cancel the operation",...g};return this.open(r,E,n,N,L)}openInformationModal(r,E,n,g,L){const N={isInformationOnly:!0,confirmMessage:"OK",...g};return this.open(r,E,n,N,L)}openLoadingModal(r,E,n,g,L){const N={isInformationOnly:!0,confirmMessage:"Abort",...g};return this.open(r,E,n,N,L)}static#t=this.\u0275fac=function(E){return new(E||d)(t.KVO(I.Bq))};static#e=this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},2578:function(F,R){var s,l;void 0!==(l="function"==typeof(s=function(){"use strict";function c(m,h,A){var u=new XMLHttpRequest;u.open("GET",m),u.responseType="blob",u.onload=function(){b(u.response,h,A)},u.onerror=function(){console.error("could not download file")},u.send()}function y(m){var h=new XMLHttpRequest;h.open("HEAD",m,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function T(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(h)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,p=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(m,h,A){var u=o.URL||o.webkitURL,O=document.createElement("a");O.download=h=h||m.name||"download",O.rel="noopener","string"==typeof m?(O.href=m,O.origin===location.origin?T(O):y(O.href)?c(m,h,A):T(O,O.target="_blank")):(O.href=u.createObjectURL(m),setTimeout(function(){u.revokeObjectURL(O.href)},4e4),setTimeout(function(){T(O)},0))}:"msSaveOrOpenBlob"in navigator?function(m,h,A){if(h=h||m.name||"download","string"!=typeof m)navigator.msSaveOrOpenBlob(function I(m,h){return typeof h>"u"?h={autoBom:!1}:"object"!=typeof h&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\ufeff",m],{type:m.type}):m}(m,A),h);else if(y(m))c(m,h,A);else{var u=document.createElement("a");u.href=m,u.target="_blank",setTimeout(function(){T(u)})}}:function(m,h,A,u){if((u=u||open("","_blank"))&&(u.document.title=u.document.body.innerText="downloading..."),"string"==typeof m)return c(m,h,A);var O="application/octet-stream"===m.type,x=/constructor/i.test(o.HTMLElement)||o.safari,e=/CriOS\/[\d]+/.test(navigator.userAgent);if((e||O&&x||p)&&typeof FileReader<"u"){var P=new FileReader;P.onloadend=function(){var D=P.result;D=e?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=D:location=D,u=null},P.readAsDataURL(m)}else{var G=o.URL||o.webkitURL,d=G.createObjectURL(m);u?u.location=d:location.href=d,u=null,setTimeout(function(){G.revokeObjectURL(d)},4e4)}});o.saveAs=b.saveAs=b,F.exports=b})?s.apply(R,[]):s)&&(F.exports=l)},77048:(F,R,s)=>{"use strict";s.d(R,{v:()=>I});var t=s(39974),l=s(54360);function I(c,y=!1){return(0,t.N)((T,o)=>{let p=0;T.subscribe((0,l._)(o,b=>{const m=c(b,p++);(m||y)&&o.next(b),!m&&o.complete()}))})}}}]);