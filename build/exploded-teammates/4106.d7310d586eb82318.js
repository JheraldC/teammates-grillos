"use strict";(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[4106],{8843:(w,v,n)=>{n.d(v,{e:()=>b});var e=n(60177),l=n(17705);let b=(()=>{class u{static#e=this.\u0275fac=function(f){return new(f||u)};static#s=this.\u0275mod=l.$C({type:u});static#t=this.\u0275inj=l.G2t({imports:[e.MD]})}return u})()},92461:(w,v,n)=>{n.d(v,{f:()=>b});var e=n(40035),l=n(17705);let b=(()=>{class u{transform(h){switch(h){case e.DG.PUBLISHED:return"Respondents can view responses received, as per the visibility settings of each question.";case e.DG.NOT_PUBLISHED:return"Respondents cannot view responses received.";default:return"Unknown"}}static#e=this.\u0275fac=function(f){return new(f||u)};static#s=this.\u0275pipe=l.EJ8({name:"publishStatusTooltip",type:u,pure:!0})}return u})()},44187:(w,v,n)=>{n.d(v,{l:()=>se});var e=n(17705),l=n(60177),b=n(94227),u=n(40035),a=n(85385),h=n(7730),f=n(48381),k=n(53992),E=n(57286);function F(o,S){1&o&&e.eu8(0)}const B=function(o,S){return{courseid:o,fsname:S,editingMode:!0}};function A(o,S){if(1&o&&(e.j41(0,"a",22),e.DNE(1,F,1,0,"ng-container",23),e.k0s()),2&o){const s=e.XpG(),i=e.sdS(3);e.Y8G("queryParams",e.l_i(2,B,s.courseId,s.fsName)),e.R7$(1),e.Y8G("ngTemplateOutlet",i)}}function U(o,S){if(1&o&&(e.j41(0,"button",24),e.EFF(1," Edit "),e.k0s()),2&o){const s=e.XpG();e.Y8G("disabled",!s.instructorPrivileges.canModifySession)}}function C(o,S){1&o&&e.eu8(0)}function M(o,S){if(1&o&&(e.j41(0,"a",25),e.DNE(1,C,1,0,"ng-container",23),e.k0s()),2&o){const s=e.XpG(),i=e.sdS(10);e.Y8G("queryParams",e.l_i(2,B,s.courseId,s.fsName)),e.R7$(1),e.Y8G("ngTemplateOutlet",i)}}function c(o,S){if(1&o){const s=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.onSubmitSessionAsInstructor())}),e.EFF(1," Submit "),e.k0s()}if(2&o){const s=e.XpG();e.Y8G("disabled",s.submissionStatus!==s.FeedbackSessionSubmissionStatus.OPEN||!s.instructorPrivileges.canSubmitSessionInSections)}}function p(o,S){if(1&o){const s=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.unpublishSession())}),e.EFF(1," Unpublish Results "),e.k0s()}if(2&o){const s=e.XpG();e.ZvI("btn-unpublish-",s.idx," btn dropdown-item clickable"),e.Y8G("disabled",!s.instructorPrivileges.canModifySession)}}const r=function(o,S){return[o,S]};function m(o,S){if(1&o){const s=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.publishSession())}),e.EFF(1," Publish Results "),e.k0s()}if(2&o){const s=e.XpG();e.ZvI("btn-publish-",s.idx," btn dropdown-item clickable"),e.Y8G("disabled",e.l_i(4,r,s.FeedbackSessionSubmissionStatus.NOT_VISIBLE,s.FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN).includes(s.submissionStatus)||s.publishStatus===s.FeedbackSessionPublishStatus.PUBLISHED||!s.instructorPrivileges.canModifySession)}}function N(o,S){if(1&o){const s=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.remindResultsLinkToStudent())}),e.EFF(1," Resend link to view results "),e.k0s()}if(2&o){const s=e.XpG();e.ZvI("btn-resend-",s.idx," btn dropdown-item clickable")}}function g(o,S){1&o&&e.nrm(0,"tm-ajax-loading",29),2&o&&e.Y8G("color","#000000")}const _=function(o){return{disabled:o}},I=function(o,S){return{courseid:o,fsname:S}};let R=(()=>{class o{constructor(){this.idx=0,this.fsName="",this.courseId="",this.rowClicked=0,this.isSendReminderLoading=!1,this.publishStatus=u.DG.NOT_PUBLISHED,this.submissionStatus=u.u.NOT_VISIBLE,this.instructorPrivileges={canModifyCourse:!1,canModifyInstructor:!1,canModifySession:!1,canModifyStudent:!1,canViewStudentInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1,canModifySessionCommentsInSections:!1},this.copySession=()=>{},this.moveSessionToRecycleBin=()=>{},this.unpublishSession=()=>{},this.publishSession=()=>{},this.remindResultsLinkToStudent=()=>{},this.downloadSessionResults=()=>{},this.sendRemindersToAllNonSubmitters=()=>{},this.sendRemindersToSelectedNonSubmitters=()=>{},this.setRowClicked=()=>{},this.onSubmitSessionAsInstructor=()=>{},this.FeedbackSessionSubmissionStatus=u.u,this.FeedbackSessionPublishStatus=u.DG,this.SortableTableHeaderColorScheme=h.u}static#e=this.\u0275fac=function(i){return new(i||o)};static#s=this.\u0275cmp=e.VBU({type:o,selectors:[["tm-group-buttons"]],inputs:{idx:"idx",fsName:"fsName",courseId:"courseId",rowClicked:"rowClicked",isSendReminderLoading:"isSendReminderLoading",publishStatus:"publishStatus",submissionStatus:"submissionStatus",instructorPrivileges:"instructorPrivileges",copySession:"copySession",moveSessionToRecycleBin:"moveSessionToRecycleBin",unpublishSession:"unpublishSession",publishSession:"publishSession",remindResultsLinkToStudent:"remindResultsLinkToStudent",downloadSessionResults:"downloadSessionResults",sendRemindersToAllNonSubmitters:"sendRemindersToAllNonSubmitters",sendRemindersToSelectedNonSubmitters:"sendRemindersToSelectedNonSubmitters",setRowClicked:"setRowClicked",onSubmitSessionAsInstructor:"onSubmitSessionAsInstructor"},standalone:!0,features:[e.aNF],decls:37,vars:49,consts:[[1,"d-flex","gap-1"],["tmRouterLink","/web/instructor/sessions/edit",3,"queryParams",4,"ngIf","ngIfElse"],["editSessionBtn",""],["type","button",3,"disabled","click"],["type","button","ngbTooltip","Copy feedback session details",3,"click"],["tmRouterLink","/web/instructor/sessions/submission",3,"queryParams",4,"ngIf","ngIfElse"],["submitBtn",""],["ngbDropdown","","container","body",1,"d-inline-block"],["ngbDropdownToggle",""],["ngbDropdownMenu",""],["tmRouterLink","/web/instructor/sessions/result",1,"btn","dropdown-item","clickable",3,"ngClass","queryParams"],["tmRouterLink","/web/instructor/sessions/report",1,"btn","dropdown-item","clickable",3,"ngClass","queryParams"],["ngbTooltip","Make responses no longer visible","placement","left","container","body",3,"class","disabled","click",4,"ngIf","ngIfElse"],["publishButton",""],[3,"class","click",4,"ngIf"],[3,"disabled","click"],["ngbDropdown","","container","body","ngbTooltip","Send e-mails to remind students and instructors who have not submitted their feedbacks to do so",1,"d-inline-block"],["ngbDropdownToggle","",3,"disabled"],[1,"d-inline-flex"],[1,"padding-left-7px"],[3,"color",4,"ngIf"],[3,"click"],["tmRouterLink","/web/instructor/sessions/edit",3,"queryParams"],[4,"ngTemplateOutlet"],["type","button",1,"btn","btn-light","btn-sm",3,"disabled"],["tmRouterLink","/web/instructor/sessions/submission",3,"queryParams"],["type","button","ngbTooltip","Start submitting feedback",1,"btn","btn-light","btn-sm",3,"disabled","click"],["ngbTooltip","Make responses no longer visible","placement","left","container","body",3,"disabled","click"],["ngbTooltip","Make session responses available for viewing","placement","left","container","body",3,"disabled","click"],[3,"color"]],template:function(i,t){if(1&i&&(e.j41(0,"div",0),e.DNE(1,A,2,5,"a",1),e.DNE(2,U,2,1,"ng-template",null,2,e.C5r),e.j41(4,"button",3),e.bIt("click",function(){return t.moveSessionToRecycleBin()}),e.EFF(5," Delete "),e.k0s(),e.j41(6,"button",4),e.bIt("click",function(){return t.copySession()}),e.EFF(7," Copy "),e.k0s(),e.DNE(8,M,2,5,"a",5),e.DNE(9,c,2,1,"ng-template",null,6,e.C5r),e.j41(11,"div",7)(12,"button",8),e.EFF(13," Results "),e.k0s(),e.j41(14,"div",9)(15,"a",10),e.EFF(16,"View Results (from/to me)"),e.k0s(),e.j41(17,"a",11),e.EFF(18,"View Results (course-wide)"),e.k0s(),e.DNE(19,p,2,4,"button",12),e.DNE(20,m,2,7,"ng-template",null,13,e.C5r),e.DNE(22,N,2,3,"button",14),e.j41(23,"button",15),e.bIt("click",function(){return t.downloadSessionResults()}),e.EFF(24," Download Results "),e.k0s()()(),e.j41(25,"div",16)(26,"button",17)(27,"div",18)(28,"span"),e.EFF(29,"Remind"),e.k0s(),e.j41(30,"div",19),e.DNE(31,g,1,1,"tm-ajax-loading",20),e.k0s()()(),e.j41(32,"div",9)(33,"button",21),e.bIt("click",function(){return t.sendRemindersToAllNonSubmitters(),t.setRowClicked()}),e.EFF(34," Remind all non-submitters "),e.k0s(),e.j41(35,"button",21),e.bIt("click",function(){return t.sendRemindersToSelectedNonSubmitters(),t.setRowClicked()}),e.EFF(36," Select non-submitters to remind "),e.k0s()()()()),2&i){const d=e.sdS(3),D=e.sdS(10),y=e.sdS(21);e.R7$(1),e.Y8G("ngIf",t.instructorPrivileges.canModifySession)("ngIfElse",d),e.R7$(3),e.ZvI("btn-soft-delete-",t.idx," btn btn-light btn-sm"),e.Y8G("disabled",!t.instructorPrivileges.canModifySession),e.R7$(2),e.ZvI("btn-copy-",t.idx," btn btn-light btn-sm"),e.R7$(2),e.Y8G("ngIf",t.submissionStatus===t.FeedbackSessionSubmissionStatus.OPEN&&t.instructorPrivileges.canSubmitSessionInSections)("ngIfElse",D),e.R7$(4),e.ZvI("btn-results-",t.idx," btn btn-light btn-sm"),e.R7$(3),e.Y8G("ngClass",e.eq3(36,_,!t.instructorPrivileges.canViewSessionInSections))("queryParams",e.l_i(38,I,t.courseId,t.fsName)),e.R7$(2),e.Y8G("ngClass",e.eq3(41,_,!t.instructorPrivileges.canViewSessionInSections))("queryParams",e.l_i(43,I,t.courseId,t.fsName)),e.R7$(2),e.Y8G("ngIf",!e.l_i(46,r,t.FeedbackSessionSubmissionStatus.NOT_VISIBLE,t.FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN).includes(t.submissionStatus)&&t.publishStatus===t.FeedbackSessionPublishStatus.PUBLISHED)("ngIfElse",y),e.R7$(3),e.Y8G("ngIf",t.publishStatus===t.FeedbackSessionPublishStatus.PUBLISHED),e.R7$(1),e.ZvI("btn-download-",t.idx," btn dropdown-item clickable"),e.Y8G("disabled",!t.instructorPrivileges.canViewSessionInSections),e.R7$(3),e.ZvI("btn-remind-",t.idx," btn btn-light btn-sm"),e.Y8G("disabled",t.submissionStatus!==t.FeedbackSessionSubmissionStatus.OPEN||!t.instructorPrivileges.canModifySession),e.R7$(5),e.Y8G("ngIf",t.isSendReminderLoading&&t.rowClicked===t.idx),e.R7$(2),e.ZvI("btn-remind-all-",t.idx," btn dropdown-item clickable"),e.R7$(2),e.ZvI("btn-remind-selected-",t.idx," btn dropdown-item clickable")}},dependencies:[l.MD,l.YU,l.bT,l.T3,f.d,k.y,a.D,E.y,b.zH,b.tg,b.do,b.U0,b.n8,b.md],encapsulation:2})}return o})();function O(o,S){if(1&o){const s=e.RV6();e.j41(0,"a",3),e.bIt("click",function(t){return e.eBV(s),e.XpG().onClick(),e.Njj(t.preventDefault())}),e.EFF(1,"Show"),e.k0s()}if(2&o){const s=e.XpG();e.ZvI("show-response-rate-",s.idx,"")}}function j(o,S){if(1&o&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&o){const s=e.XpG();e.ZvI("response-rate-",s.idx,""),e.R7$(1),e.SpI(" ",s.responseRate,"\n")}}function Y(o,S){1&o&&e.nrm(0,"tm-ajax-loading",4),2&o&&e.Y8G("useBlueSpinner",!0)}let X=(()=>{class o{constructor(){this.responseRate="",this.idx=0,this.empty=!1,this.isLoading=!1,this.onClick=()=>{}}static#e=this.\u0275fac=function(i){return new(i||o)};static#s=this.\u0275cmp=e.VBU({type:o,selectors:[["tm-response-rate"]],inputs:{responseRate:"responseRate",idx:"idx",empty:"empty",isLoading:"isLoading",onClick:"onClick"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[["href","#",3,"class","click",4,"ngIf"],[3,"class",4,"ngIf"],[3,"useBlueSpinner",4,"ngIf"],["href","#",3,"click"],[3,"useBlueSpinner"]],template:function(i,t){1&i&&(e.DNE(0,O,2,3,"a",0),e.DNE(1,j,2,4,"div",1),e.DNE(2,Y,1,1,"tm-ajax-loading",2)),2&i&&(e.Y8G("ngIf",t.empty&&!t.isLoading),e.R7$(1),e.Y8G("ngIf",!t.empty),e.R7$(1),e.Y8G("ngIf",t.isLoading))},dependencies:[a.D,E.y,l.MD,l.bT],encapsulation:2})}return o})(),W=(()=>{class o{constructor(){this.toolTip="",this.value=""}ngOnChanges(s){this.toolTip=s.toolTip?.currentValue}static#e=this.\u0275fac=function(i){return new(i||o)};static#s=this.\u0275cmp=e.VBU({type:o,selectors:[["tm-cell-with-tooltip"]],inputs:{toolTip:"toolTip",value:"value"},standalone:!0,features:[e.OA$,e.aNF],decls:2,vars:2,consts:[[1,"ngb-tooltip-class",3,"ngbTooltip"]],template:function(i,t){1&i&&(e.j41(0,"span",0),e.EFF(1),e.k0s()),2&i&&(e.Y8G("ngbTooltip",t.toolTip),e.R7$(1),e.JRh(t.value))},dependencies:[b.n8,b.md],encapsulation:2})}return o})();var P=n(35725),L=n(26195),$=n(10424),V=n(21894),x=n(6294),K=n(23934),H=n(14725),Z=n(95252),J=n(92461),z=n(79885),Q=n(40747);function q(o,S){if(1&o){const s=e.RV6();e.j41(0,"div")(1,"tm-sortable-table",2),e.bIt("sortEvent",function(t){e.eBV(s);const d=e.XpG();return e.Njj(d.sortSessionsTableRowModelsEventHandler(t))}),e.k0s()()}if(2&o){const s=e.XpG();e.R7$(1),e.Y8G("columns",s.columnsData)("rows",s.rowsData)("initialSortBy",s.initialSortBy)("sortOrder",s.sortOrder)("headerColorScheme",s.headerColorScheme)}}function ee(o,S){1&o&&(e.j41(0,"div",3),e.EFF(1," There are no feedback sessions in this course. "),e.k0s())}let se=(()=>{class o{set sessionsTableRowModels(s){this.sessionsTableRowModelsVar=s,this.setRowData()}get sessionsTableRowModels(){return this.sessionsTableRowModelsVar}constructor(s,i,t,d,D,y,G,T){this.ngbModal=s,this.simpleModalService=i,this.formatDateDetailPipe=t,this.formatDateBriefPipe=d,this.publishStatusName=D,this.publishStatusTooltip=y,this.submissionStatusTooltip=G,this.submissionStatusName=T,this.SortBy=L.g,this.SortOrder=L.x,this.SessionsTableColumn=P.i,this.FeedbackSessionSubmissionStatus=u.u,this.FeedbackSessionPublishStatus=u.DG,this.SortableTableHeaderColorScheme=h.u,this.rowClicked=-1,this.initialSortBy=L.g.COURSE_ID,this.sortOrder=L.x.ASC,this.courseCandidates=[],this.columnsToShow=[P.i.COURSE_ID],this.headerColorScheme=h.u.BLUE,this.isSendReminderLoading=!1,this.sortSessionsTableRowModelsEvent=new e.bkB,this.loadResponseRateEvent=new e.bkB,this.moveSessionToRecycleBinEvent=new e.bkB,this.copySessionEvent=new e.bkB,this.submitSessionAsInstructorEvent=new e.bkB,this.publishSessionEvent=new e.bkB,this.unpublishSessionEvent=new e.bkB,this.resendResultsLinkToStudentsEvent=new e.bkB,this.downloadSessionResultsEvent=new e.bkB,this.sendRemindersToAllNonSubmittersEvent=new e.bkB,this.sendRemindersToSelectedNonSubmittersEvent=new e.bkB,this.sessionsTableRowModelsVar=[],this.rowsData=[],this.columnsData=[]}ngOnInit(){this.setColumnData(),this.setRowData()}createColumnData(s){return void 0===s?.columnType||this.columnsToShow.includes(s.columnType)?[{header:s.header,...s.sortBy&&{sortBy:s.sortBy},...s.headerToolTip&&{headerToolTip:s.headerToolTip},...s.alignment&&{alignment:s.alignment},...s.headerClass&&{headerClass:s.headerClass}}]:[]}createRowData(s){return void 0===s?.columnType||this.columnsToShow.includes(s.columnType)?[{...s.value&&{value:s.value},...s.displayValue&&{displayValue:s.displayValue},...s.customComponent&&{customComponent:s.customComponent},...s.style&&{style:s.style}}]:[]}setColumnData(){this.columnsData=[...this.createColumnData({columnType:P.i.COURSE_ID,header:"Course ID",sortBy:L.g.COURSE_ID,headerClass:"sort-course-id"}),...this.createColumnData({header:"Session Name",sortBy:L.g.SESSION_NAME,headerClass:"sort-session-name"}),...this.createColumnData({columnType:P.i.START_DATE,header:"Start Date",sortBy:L.g.SESSION_START_DATE}),...this.createColumnData({columnType:P.i.END_DATE,header:"End Date",sortBy:L.g.SESSION_END_DATE}),...this.createColumnData({header:"Submissions"}),...this.createColumnData({header:"Responses"}),...this.createColumnData({header:"Response Rate",headerToolTip:"Number of students submitted / Class size"}),...this.createColumnData({header:"Action(s)",alignment:"center"})]}setRowData(){this.rowsData=this.sessionsTableRowModelsVar.map(s=>{const{feedbackSession:i}=s,{submissionStatus:t,submissionStartTimestamp:d,submissionEndTimestamp:D,timeZone:y,publishStatus:G}=i,T=this.getDeadlines(s);return[...this.createRowData({columnType:P.i.COURSE_ID,value:s.feedbackSession.courseId}),...this.createRowData({value:s.feedbackSession.feedbackSessionName}),...this.createRowData({columnType:P.i.START_DATE,...this.createDateCellWithToolTip(d,y)}),...this.createRowData({columnType:P.i.END_DATE,...this.createDateCellWithToolTip(D,y)}),...this.createRowData(this.createCellWithToolTip(this.submissionStatusTooltip.transform(t,T),this.submissionStatusName.transform(t,T))),...this.createRowData(this.createCellWithToolTip(this.publishStatusTooltip.transform(G),this.publishStatusName.transform(G))),...this.createRowData(this.createCellWithResponseRateComponent(s)),...this.createRowData(this.createCellWithGroupButtonsComponent(s))]})}createCellWithGroupButtonsComponent(s){const{feedbackSession:i,instructorPrivilege:t}=s,{courseId:d,feedbackSessionName:D,submissionStatus:y,publishStatus:G}=i;return{customComponent:{component:R,componentData:T=>({idx:T,courseId:d,fsName:D,rowClicked:this.rowClicked,publishStatus:G,submissionStatus:y,instructorPrivileges:t,isSendReminderLoading:this.isSendReminderLoading,copySession:()=>this.copySession(T),setRowClicked:()=>this.setRowClicked(T),downloadSessionResults:()=>this.downloadSessionResults(T),moveSessionToRecycleBin:()=>this.moveSessionToRecycleBin(T),remindResultsLinkToStudent:()=>this.remindResultsLinkToStudent(T),sendRemindersToAllNonSubmitters:()=>this.sendRemindersToAllNonSubmitters(T),onSubmitSessionAsInstructor:()=>this.submitSessionAsInstructorEvent.emit(T),publishSession:()=>this.publishSession(T,this.rowsData[T],this.columnsData),unpublishSession:()=>this.unpublishSession(T,this.rowsData[T],this.columnsData),sendRemindersToSelectedNonSubmitters:()=>this.sendRemindersToSelectedNonSubmitters(T)})}}}createCellWithResponseRateComponent(s){const{responseRate:i,isLoadingResponseRate:t}=s;return{customComponent:{component:X,componentData:d=>({idx:d,responseRate:i,empty:""===i,isLoading:t,onClick:()=>{this.loadResponseRateEvent.emit(d)}})}}}createCellWithToolTip(s,i){return{customComponent:{component:W,componentData:()=>({toolTip:s,value:i})}}}createDateCellWithToolTip(s,i){return{value:String(s),customComponent:{component:W,componentData:()=>({toolTip:this.formatDateDetailPipe.transform(s,i),value:this.formatDateBriefPipe.transform(s,i)})}}}sortSessionsTableRowModelsEventHandler(s){this.sortSessionsTableRowModelsEvent.emit(s)}moveSessionToRecycleBin(s){this.simpleModalService.openConfirmationModal(`Delete session <strong>${this.sessionsTableRowModels[s].feedbackSession.feedbackSessionName}</strong>?`,V.i.WARNING,'Session will be moved to the recycle bin. This action can be reverted by going to the "Sessions" tab and restoring the desired session(s).').result.then(()=>{this.moveSessionToRecycleBinEvent.emit(s),this.rowsData=this.rowsData.filter((d,D)=>D!==s),this.sessionsTableRowModelsVar=this.sessionsTableRowModelsVar.filter((d,D)=>D!==s),this.setRowData()},()=>{})}copySession(s){const i=this.ngbModal.open($.o),t=this.sessionsTableRowModelsVar[s];i.componentInstance.newFeedbackSessionName=t.feedbackSession.feedbackSessionName,i.componentInstance.courseCandidates=this.courseCandidates,i.componentInstance.sessionToCopyCourseId=t.feedbackSession.courseId,i.result.then(d=>{this.copySessionEvent.emit({...d,sessionToCopyRowIndex:s})},()=>{})}publishSession(s,i,t){this.simpleModalService.openConfirmationModal(`Publish session <strong>${this.sessionsTableRowModelsVar[s].feedbackSession.feedbackSessionName}</strong>?`,V.i.WARNING,"An email will be sent to students to inform them that the responses are ready for viewing.").result.then(()=>{this.publishSessionEvent.emit({idx:s,rowData:i,columnsData:t})},()=>{})}unpublishSession(s,i,t){this.simpleModalService.openConfirmationModal(`Unpublish session <strong>${this.sessionsTableRowModelsVar[s].feedbackSession.feedbackSessionName}</strong>?`,V.i.WARNING,"An email will be sent to students to inform them that the session \n      has been unpublished and the session responses will no longer be viewable by students.").result.then(()=>{this.unpublishSessionEvent.emit({idx:s,rowData:i,columnsData:t})},()=>{})}remindResultsLinkToStudent(s){this.resendResultsLinkToStudentsEvent.emit(s)}sendRemindersToAllNonSubmitters(s){this.sendRemindersToAllNonSubmittersEvent.emit(s)}sendRemindersToSelectedNonSubmitters(s){this.sendRemindersToSelectedNonSubmittersEvent.emit(s)}downloadSessionResults(s){this.downloadSessionResultsEvent.emit(s)}setRowClicked(s){this.rowClicked=s}getDeadlines(s){return{studentDeadlines:s.feedbackSession.studentDeadlines,instructorDeadlines:s.feedbackSession.instructorDeadlines}}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(b.Bq),e.rXU(x.r),e.rXU(K.L),e.rXU(H.C),e.rXU(Z.V),e.rXU(J.f),e.rXU(z.y),e.rXU(Q.u))};static#s=this.\u0275cmp=e.VBU({type:o,selectors:[["tm-sessions-table"]],inputs:{initialSortBy:"initialSortBy",sortOrder:"sortOrder",courseCandidates:"courseCandidates",columnsToShow:"columnsToShow",headerColorScheme:"headerColorScheme",isSendReminderLoading:"isSendReminderLoading",sessionsTableRowModels:"sessionsTableRowModels"},outputs:{sortSessionsTableRowModelsEvent:"sortSessionsTableRowModelsEvent",loadResponseRateEvent:"loadResponseRateEvent",moveSessionToRecycleBinEvent:"moveSessionToRecycleBinEvent",copySessionEvent:"copySessionEvent",submitSessionAsInstructorEvent:"submitSessionAsInstructorEvent",publishSessionEvent:"publishSessionEvent",unpublishSessionEvent:"unpublishSessionEvent",resendResultsLinkToStudentsEvent:"resendResultsLinkToStudentsEvent",downloadSessionResultsEvent:"downloadSessionResultsEvent",sendRemindersToAllNonSubmittersEvent:"sendRemindersToAllNonSubmittersEvent",sendRemindersToSelectedNonSubmittersEvent:"sendRemindersToSelectedNonSubmittersEvent"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noSessionMessage",""],[3,"columns","rows","initialSortBy","sortOrder","headerColorScheme","sortEvent"],[1,"no-session-message"]],template:function(i,t){if(1&i&&(e.DNE(0,q,2,5,"div",0),e.DNE(1,ee,2,0,"ng-template",null,1,e.C5r)),2&i){const d=e.sdS(2);e.Y8G("ngIf",t.sessionsTableRowModels.length>0)("ngIfElse",d)}},dependencies:[l.bT,h.c],styles:[".no-session-message[_ngcontent-%COMP%]{padding:10px;text-align:center}@media (width >= 1200px){.actions-cell[_ngcontent-%COMP%]{min-width:410px}}.actions-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.dropdown-item){margin-left:var(--btn-margin)}.sortable-header[_ngcontent-%COMP%]{cursor:pointer}.sortable-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.3em}.sortable-header[_ngcontent-%COMP%]   .fa-stack[_ngcontent-%COMP%]{width:20%}.sortable-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;text-align:left;width:100%;font:inherit;cursor:inherit}.clickable[_ngcontent-%COMP%]{cursor:pointer}.margin-bottom-0[_ngcontent-%COMP%]{margin-bottom:0}.padding-left-7px[_ngcontent-%COMP%]{padding-left:7px}"]})}return o})()},22647:(w,v,n)=>{n.d(v,{k:()=>r});var e=n(60177),l=n(89417),b=n(82646),u=n(94227),a=n(92461),h=n(85385),f=n(8843),k=n(21079),E=n(36853),F=n(14725),B=n(23934),A=n(95252),U=n(40747),C=n(79885),M=n(44661),c=n(48381),p=n(17705);let r=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#s=this.\u0275mod=p.$C({type:m});static#t=this.\u0275inj=p.G2t({providers:[B.L,F.C,A.V,a.f,U.u,C.y],imports:[e.MD,h.D,f.e,M.x,u.zH,u.n8,l.YN,k.Z,b.iI,c.d,E.H]})}return m})()},14725:(w,v,n)=>{n.d(v,{C:()=>b});var e=n(17705),l=n(50833);let b=(()=>{class u{constructor(h){this.timezoneService=h}transform(h,f){return this.timezoneService.formatToString(h,f,"D MMM h:mm A")}static#e=this.\u0275fac=function(f){return new(f||u)(e.rXU(l.D,16))};static#s=this.\u0275pipe=e.EJ8({name:"formatDateBrief",type:u,pure:!0})}return u})()},79885:(w,v,n)=>{n.d(v,{y:()=>u});var e=n(59919),l=n(40035),b=n(17705);let u=(()=>{class a{transform(f,k){let E="The feedback session";switch(f){case l.u.NOT_VISIBLE:case l.u.VISIBLE_NOT_OPEN:E+=" is waiting to open for submissions";break;case l.u.OPEN:E+=" is open for submissions";break;case l.u.GRACE_PERIOD:E+=" is open for submissions, is in the grace period";break;case l.u.CLOSED:E+=" is closed for submissions"}switch(f){case l.u.VISIBLE_NOT_OPEN:E+=", but is visible to respondents";break;case l.u.OPEN:case l.u.GRACE_PERIOD:case l.u.CLOSED:E+=", and is visible to respondents";break;case l.u.NOT_VISIBLE:E+=", and is not yet visible to respondents"}return k&&e.I.hasOngoingExtension(k)&&(E+=", with current ongoing individual deadline extensions"),E+=".",E}static#e=this.\u0275fac=function(k){return new(k||a)};static#s=this.\u0275pipe=b.EJ8({name:"submissionStatusTooltip",type:a,pure:!0})}return a})()},42455:(w,v,n)=>{n.d(v,{t:()=>U});var e=n(27468),l=n(70980),b=n(29267),u=n(94089),a=n(17705),h=n(94227),f=n(60177),k=n(75655);function E(C,M){if(1&C){const c=a.RV6();a.j41(0,"div",9)(1,"tm-respondent-list-info-table",10),a.bIt("studentListInfoTableRowModelsChange",function(r){a.eBV(c);const m=a.XpG();return a.Njj(m.studentListInfoTableRowModels=r)})("instructorListInfoTableRowModelsChange",function(r){a.eBV(c);const m=a.XpG();return a.Njj(m.instructorListInfoTableRowModels=r)}),a.k0s()()}if(2&C){const c=a.XpG();a.R7$(1),a.Y8G("studentListInfoTableRowModels",c.studentListInfoTableRowModels)("shouldDisplayHasSubmittedSessionColumn",!1)("instructorListInfoTableRowModels",c.instructorListInfoTableRowModels)}}function F(C,M){1&C&&(a.j41(0,"h4",11),a.EFF(1," There are no participants to email. "),a.k0s())}let B=(()=>{class C{constructor(c){this.activeModal=c,this.courseId="",this.feedbackSessionName="",this.studentListInfoTableRowModels=[],this.instructorListInfoTableRowModels=[]}collateRespondentsToSendHandler(){const c=this.studentListInfoTableRowModels.map(r=>({...r})).filter(r=>r.isSelected),p=this.instructorListInfoTableRowModels.map(r=>({...r})).filter(r=>r.isSelected);return c.concat(p)}static#e=this.\u0275fac=function(p){return new(p||C)(a.rXU(h.Lw))};static#s=this.\u0275cmp=a.VBU({type:C,selectors:[["tm-resend-results-link-to-respondent-modal"]],decls:15,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["class","table-responsive",4,"ngIf","ngIfElse"],["noRespondentsToRemind",""],[1,"modal-footer"],["type","button",1,"btn",3,"click"],["id","btn-confirm-resend-results","type","button",1,"btn","btn-primary",3,"click"],[1,"table-responsive"],[3,"studentListInfoTableRowModels","shouldDisplayHasSubmittedSessionColumn","instructorListInfoTableRowModels","studentListInfoTableRowModelsChange","instructorListInfoTableRowModelsChange"],[1,"p-2","bg-info"]],template:function(p,r){if(1&p&&(a.j41(0,"div",0)(1,"h4",1),a.EFF(2," Resend Published Email "),a.j41(3,"small"),a.EFF(4,"(Select the student(s) or instructor(s) you want to resend the published email to)"),a.k0s()(),a.j41(5,"button",2),a.bIt("click",function(){return r.activeModal.dismiss()}),a.k0s()(),a.j41(6,"div",3),a.DNE(7,E,2,3,"div",4),a.DNE(8,F,2,0,"ng-template",null,5,a.C5r),a.k0s(),a.j41(10,"div",6)(11,"button",7),a.bIt("click",function(){return r.activeModal.dismiss()}),a.EFF(12,"Cancel"),a.k0s(),a.j41(13,"button",8),a.bIt("click",function(){return r.activeModal.close(r.collateRespondentsToSendHandler())}),a.EFF(14,"Send"),a.k0s()()),2&p){const m=a.sdS(9);a.R7$(7),a.Y8G("ngIf",r.studentListInfoTableRowModels.length>0)("ngIfElse",m)}},dependencies:[f.bT,k.I],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"]})}return C})();var A=n(55191);class U extends b.v{constructor(M,c,p,r,m,N,g,_,I,R,O,j){super(M,c,p,r,m,N,g,_,I,R,O),this.studentService=j,this.isSendReminderLoading=!1}resendResultsLinkToRespondentsEventHandler(M){this.isSendReminderLoading=!0;const c=M.feedbackSession.courseId,p=M.feedbackSession.feedbackSessionName;(0,e.p)([this.studentService.getStudentsFromCourse({courseId:c}),this.instructorService.loadInstructors({courseId:c,intent:u.JD.FULL_DETAIL})]).pipe((0,l.j)(()=>{this.isSendReminderLoading=!1})).subscribe({next:r=>{const m=r[0].students,N=r[1].instructors,g=this.ngbModal.open(B);g.componentInstance.courseId=c,g.componentInstance.feedbackSessionName=p,g.componentInstance.studentListInfoTableRowModels=m.map(_=>({email:_.email,name:_.name,teamName:_.teamName,sectionName:_.sectionName,hasSubmittedSession:!1,isSelected:!1})),g.componentInstance.instructorListInfoTableRowModels=N.map(_=>({email:_.email,name:_.name,hasSubmittedSession:!1,isSelected:!1})),g.result.then(_=>{this.isSendReminderLoading=!0,this.feedbackSessionsService.remindResultsLinkToRespondents(c,p,{usersToRemind:_.map(I=>I.email),isSendingCopyToInstructor:!0}).pipe((0,l.j)(()=>{this.isSendReminderLoading=!1})).subscribe({next:()=>{this.statusMessageService.showSuccessToast("Session published notification emails have been resent to those students and instructors. Please allow up to 1 hour for all the notification emails to be sent out.")},error:I=>{this.statusMessageService.showErrorToast(I.error.message)}})},()=>{})},error:r=>{this.statusMessageService.showErrorToast(r.error.message)}})}sendRemindersToRespondentsEventHandler(M,c){this.isSendReminderLoading=!0;const p=M.feedbackSession.courseId,r=M.feedbackSession.feedbackSessionName;(0,e.p)([this.studentService.getStudentsFromCourse({courseId:p}),this.feedbackSessionsService.getFeedbackSessionSubmittedGiverSet({courseId:p,feedbackSessionName:r}),this.instructorService.loadInstructors({courseId:p,intent:u.JD.FULL_DETAIL})]).pipe((0,l.j)(()=>{this.isSendReminderLoading=!1})).subscribe({next:m=>{const N=m[0].students,g=new Set(m[1].giverIdentifiers),_=m[2].instructors,I=this.ngbModal.open(A.E);I.componentInstance.courseId=p,I.componentInstance.feedbackSessionName=r,I.componentInstance.studentListInfoTableRowModels=N.map(R=>({email:R.email,name:R.name,teamName:R.teamName,sectionName:R.sectionName,hasSubmittedSession:g.has(R.email),isSelected:c&&!g.has(R.email)})),I.componentInstance.instructorListInfoTableRowModels=_.map(R=>({email:R.email,name:R.name,hasSubmittedSession:g.has(R.email),isSelected:c&&!g.has(R.email)})),I.result.then(R=>{this.isSendReminderLoading=!0,this.feedbackSessionsService.remindFeedbackSessionSubmissionForRespondents(p,r,{usersToRemind:R.respondentsToSend.map(O=>O.email),isSendingCopyToInstructor:R.isSendingCopyToInstructor}).pipe((0,l.j)(()=>{this.isSendReminderLoading=!1})).subscribe({next:()=>{this.statusMessageService.showSuccessToast("Reminder e-mails have been sent out to those students and instructors. Please allow up to 1 hour for all the notification emails to be sent out.")},error:O=>{this.statusMessageService.showErrorToast(O.error.message)}})},()=>{})},error:m=>{this.statusMessageService.showErrorToast(m.error.message)}})}}},64180:(w,v,n)=>{n.d(v,{DR:()=>a,GK:()=>l,Ws:()=>h,ad:()=>b,hQ:()=>u});var e=n(8059);const l=()=>JSON.parse(e.PE.COOWNER),b=()=>JSON.parse(e.PE.MANAGER),u=()=>JSON.parse(e.PE.OBSERVER),a=()=>JSON.parse(e.PE.TUTOR),h=()=>JSON.parse(e.PE.CUSTOM)}}]);