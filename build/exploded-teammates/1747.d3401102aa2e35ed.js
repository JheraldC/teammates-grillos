"use strict";(self.webpackChunkteammates=self.webpackChunkteammates||[]).push([[1747],{57286:(d,u,t)=>{t.d(u,{y:()=>i});var r=t(17705);let i=(()=>{class c{constructor(){this.useBlueSpinner=!1,this.color="white"}static#e=this.\u0275fac=function(l){return new(l||c)};static#s=this.\u0275cmp=r.VBU({type:c,selectors:[["tm-ajax-loading"]],inputs:{useBlueSpinner:"useBlueSpinner",color:"color"},decls:2,vars:3,consts:[[1,"loading-container"],["role","status"]],template:function(l,e){1&l&&(r.j41(0,"div",0),r.nrm(1,"div",1),r.k0s()),2&l&&(r.R7$(1),r.ZvI("spinner-border spinner-border-sm text-",e.useBlueSpinner?"primary":e.color,""))},styles:[".loading-container[_ngcontent-%COMP%]{display:inline;margin-right:10px}"]})}return c})()},71747:(d,u,t)=>{t.r(u),t.d(u,{SessionLinksRecoveryPageModule:()=>L});var r=t(60177),i=t(89417),c=t(82646),p=t(66338),h=t(70980),l=t(11086),e=t(17705),f=t(43743),g=t(30715),v=t(57286);const S=["captchaElem"];function y(o,j){if(1&o){const n=e.RV6();e.j41(0,"div",3)(1,"ngx-recaptcha2",9,10),e.bIt("success",function(a){e.eBV(n);const m=e.XpG();return e.Njj(m.handleSuccess(a))}),e.k0s()()}if(2&o){const n=e.XpG();e.R7$(1),e.Y8G("siteKey",n.captchaSiteKey)("useGlobalDomain",!1)("size",n.size)("hl",n.lang)}}function k(o,j){1&o&&e.nrm(0,"tm-ajax-loading")}let R=(()=>{class o{constructor(n,s,a){this.feedbackSessionsService=n,this.statusMessageService=s,this.formBuilder=a,this.captchaSuccess=!1,this.size="normal",this.lang="en",this.isFormSubmitting=!1,this.captchaSiteKey=l.c.captchaSiteKey}ngOnInit(){this.formSessionLinksRecovery=this.formBuilder.group({email:["",i.k0.required],recaptcha:[""]})}onSubmitFormSessionLinksRecovery(n){this.captchaSiteKey||(this.captchaResponse=""),this.formSessionLinksRecovery.valid&&void 0!==this.captchaResponse?(this.isFormSubmitting=!0,this.feedbackSessionsService.sendFeedbackSessionLinkToRecoveryEmail({sessionLinksRecoveryEmail:n.controls.email.value,captchaResponse:this.captchaResponse}).pipe((0,h.j)(()=>{this.isFormSubmitting=!1})).subscribe({next:s=>{s.isEmailSent?this.statusMessageService.showSuccessToast(s.message):this.statusMessageService.showErrorToast(s.message)},error:s=>{this.statusMessageService.showErrorToast(s.error.message)}}),this.resetFormGroups()):this.statusMessageService.showErrorToast("Please enter a valid email address and click the reCAPTCHA before submitting.")}resetFormGroups(){this.formSessionLinksRecovery=this.formBuilder.group({email:["",i.k0.required],recaptcha:[""]}),this.reloadCaptcha()}reloadCaptcha(){this.captchaSiteKey&&this.captchaElem.reloadCaptcha()}handleSuccess(n){this.captchaSuccess=!0,this.captchaResponse=n}static#e=this.\u0275fac=function(s){return new(s||o)(e.rXU(f.u),e.rXU(g.x),e.rXU(i.ze))};static#s=this.\u0275cmp=e.VBU({type:o,selectors:[["tm-session-links-recovery-page"]],viewQuery:function(s,a){if(1&s&&e.GBs(S,5),2&s){let m;e.mGM(m=e.lsd())&&(a.captchaElem=m.first)}},decls:15,vars:3,consts:[[1,"color-orange"],[1,"card","bg-light","col-sm-9","col-md-6"],[1,"card-body",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"control-label"],["type","email","formControlName","email","maxlength","254","email","true","spellcheck","false",1,"form-control"],["class","form-group",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[4,"ngIf"],["formControlName","recaptcha",3,"siteKey","useGlobalDomain","size","hl","success"],["captchaElem",""]],template:function(s,a){1&s&&(e.j41(0,"h1",0),e.EFF(1," Recovering Session Links for Students\n"),e.k0s(),e.j41(2,"p"),e.EFF(3," If you cannot find your feedback session links, enter your course registered email below. Links to all your feedback sessions with start date within the past 90 days will be sent to the email address.\n"),e.k0s(),e.j41(4,"div",1)(5,"form",2),e.bIt("ngSubmit",function(){return a.onSubmitFormSessionLinksRecovery(a.formSessionLinksRecovery)}),e.j41(6,"div",3)(7,"label",4)(8,"strong"),e.EFF(9,"Email:"),e.k0s()(),e.nrm(10,"input",5),e.k0s(),e.DNE(11,y,3,4,"div",6),e.j41(12,"button",7),e.DNE(13,k,1,0,"tm-ajax-loading",8),e.EFF(14,"Submit "),e.k0s()()()),2&s&&(e.R7$(5),e.Y8G("formGroup",a.formSessionLinksRecovery),e.R7$(6),e.Y8G("ngIf",""!==a.captchaSiteKey),e.R7$(2),e.Y8G("ngIf",a.isFormSubmitting))},dependencies:[r.bT,i.qT,i.me,i.BC,i.cb,i.tU,i.Dg,i.j4,i.JD,p.zM,v.y]})}return o})();var b=t(85385);const C=[{path:"",component:R}];let L=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#s=this.\u0275mod=e.$C({type:o});static#t=this.\u0275inj=e.G2t({imports:[r.MD,i.YN,i.X1,p.kd,c.iI.forChild(C),b.D]})}return o})()}}]);